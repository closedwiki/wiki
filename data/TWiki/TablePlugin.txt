%META:TOPICINFO{author="PeterThoeny" date="1016001000" format="1.0" version="1.12"}%
---+ Table Plugin

Gives extra control of table display:
	* Allows sorting
	* Changing table properties like border width, cell spacing and cell padding
	* Changing background color for header cells
	* Changing background color for data cells - colors can _alternate_
	* Behaviour can be specified for a specific table using %<nop>TABLE{...}% or with global preferences


---++ <nop>%TOPIC% Global Settings

Plugin settings are stored as preferences variables. To reference
a plugin setting write ==%<nop>&lt;plugin&gt;_&lt;setting&gt;%==, for example, ==%<nop>INTERWIKIPLUGIN_SHORTDESCRIPTION%==

	* One line description, shown in the %TWIKIWEB%.TextFormattingRules topic:
		* Set SHORTDESCRIPTION = Control attributes of tables and sorting of table columns

	* Set DEBUG to 1 to get debug messages in =data/debug.txt=.  Default: =0=
		* Set DEBUG = 0

	* Table border width.  Default: 1
		* Set TABLEBORDER = 1

	* Table cell padding.  Default: 0
		* Set CELLPADDING = 0

	* Table cell spacing.  Default: 1
		* Set CELLSPACING = 1

	* Vertical alignment of cells. Set to: =top=, =middle=, =bottom= or =baseline=; default: (empty)
		* Set VALIGN = 

	* Table header cell alignment. Set to: =left=, =center=, =right= or =justify=; default: (empty)
		* Set HEADERALIGN = 

	* Table data cell alignment. Set to: =left=, =center=, =right= or =justify=; default: (empty)
		* Set DATAALIGN = 

	* Color for header cells ('*'s around text).  Default: <span style="background : #99CCCC;">#99CCCC</span>
		* #Set HEADER_BG = red

	* Background color for table rows, two alternate colors.  Default: <span style="background : #FFFFCC;">#FFFFCC</span>,<span style="background : #FFFFFF;">#FFFFFF</span>
		* Set DATA_BG = #FFFFCC,#FFFFFF

	* Make sortable:
		* #Set SORT = attachments
		* Set SORT = all
		* #Set SORT = none

---++ Sorting

Click on column heading text to sort by a column.  Initial column will be sorted in descending order, click again to get ascending order.  The type of data in the cell is determined automatically:

	* date if format is:
		* dd MMM YYY - hh:mm
		* dd-MMM-YY or dd-MM-YYYY (can be / or space in place of -)
		* MMM is Jan, Feb, etc
	* number is digits, with optional decimal point
	* otherwise treated as text

---++ Per Table Settings

On line before the table use =%<nop>TABLE{...}%=:

| *Argument* | *Comment* | *Example* |
| =sort=	  | Set table sorting =on= or =off= | =sort="on"= |
| =initsort= | Column to sort initially (1 to number of columns) | =initsort="2"= |
| =initdirection= | Initial sorting direction for =initsort=, set to  =up= or =down= | =initsort="down"= |
| =headerbg= | Header cell background colour | =headerbg="#99CCCC"= |
| =databg=	| Data cell background colour, a comma separated list | =databg="#C8CB8F,#DBDDB5"= |
| =tableborder= | Table border width (pixels) | =tableborder="2"= |
| =cellpadding= | Cell padding (pixels) | =cellpadding="0"= |
| =cellspacing= | Cell spacing (pixels) | =cellspacing="3"= |
| =valign= | Vertical alignment of cells, set to =top=, =middle=, =bottom= or =baseline= | =valign="top"= |
| =headeralign= | Header cell alignment, set to =left=, =center=, =right= or =justify=. Overrides individual cell settings | =headeralign="left"= |
| =dataalign= | Data cell alignment, set to =left=, =center=, =right= or =justify=. Overrides individual cell settings | =dataalign="center"= |

All default to the global setting

---++ Examples

Line before table: =%<nop>TABLE{sort="on" tableborder="0" cellpadding="1" cellspacing="3" headerbg="#99CCCC" databg="#C8CB8F,#DBDDB5"}%=

%TABLE{sort="on" tableborder="0" cellpadding="1" cellspacing="3" headerbg="#99CCCC" databg="#C8CB8F,#DBDDB5"}%
| *Num* | *Status* | *Action* | *Who* | *When* | *Progress* |
| 1 | C | Chose new colours | John | 1-Dec-02 | |
| 2 | X | Release | John | 1-Apr-02 | |
| 3 |	| Get feedback | Anne | 1-Feb-02 | |
| 12 | C | Spec error handling | Jack | 1-Dec-02 | |
| 5 |	| Abc | John | | |

---++ Plugin Installation Instructions

	* Download the ZIP file from the Plugin web (see below)
	* Unzip ==%TOPIC%.zip== in your twiki installation directory. Content:
	  | *File:* | *Description:* |
	  | ==data/TWiki/%TOPIC%.txt== | Plugin topic |
	  | ==data/TWiki/%TOPIC%.txt,v== | Plugin topic repository |
	  | ==lib/TWiki/Plugins/%TOPIC%.pm== | Plugin Perl module |
	  | ==pub/TWiki/%TOPIC%/diamond.gif== | Diamond symbol |
	  | ==pub/TWiki/%TOPIC%/down.gif== | Down arrow |
	  | ==pub/TWiki/%TOPIC%/up.gif== | Up arrow |
	* Test if the plugin is correctly installed:
		* Check above example if the table renders as expected
		* Try click on heading to sort.  Other tables should also be sortable

---++ Plugin Info

|  Plugin Author: | %TWIKIWEB%.JohnTalintyre, %TWIKIWEB%.PeterThoeny |
|  Plugin Version: | 13 Mar 2002 |
|  Change History: | 13 Mar 2002 PTh: Added TWiki:Main/ShawnBradford 's initsort and initdirection <br /> 12 Mar 2002 PTh: Added valign, headeralign and dataalign; fixed bug of swapped cellpadding/cellspacing; fixed warning of uninitialized value <br /> 05 Jan 2002 PTh: Fixed sorting bug of cells with leading white space <br /> 06 Dec 2001 PTh: Fixed date sorting bug <br /> 03 Dec 2001 PTh: Fixed sort="off" bug and more <br /> 29 Nov 2001: PTh fixed Perl warnings <br /> 16 Nov 2001: PTh added table border, cell spacing, cell padding, gif files <br /> 07 Oct 2001: Initial version |
|  CPAN Dependencies: | none |
|  Other Dependencies: | none |
|  Perl Version: | 5.0 |
|  Plugin Home: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC% |
|  Feedback: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC%Dev |

__Related Topics:__ %TWIKIWEB%.TWikiPreferences, %TWIKIWEB%.TWikiPlugins

-- %TWIKIWEB%.JohnTalintyre - 07 Oct 2001 <br />
-- %TWIKIWEB%.PeterThoeny - 13 Mar 2002 <br />
%META:FILEATTACHMENT{name="up.gif" attr="" comment="Up arrow" date="1005707580" path="C:\Data\Temp\up.gif" size="876" user="PeterThoeny" version="1.1"}%
%META:FILEATTACHMENT{name="down.gif" attr="" comment="Down arrow" date="1005707591" path="C:\Data\Temp\down.gif" size="869" user="PeterThoeny" version="1.1"}%
%META:FILEATTACHMENT{name="diamond.gif" attr="" comment="Diamond symbol" date="1005707607" path="C:\Data\Temp\diamond.gif" size="881" user="PeterThoeny" version="1.1"}%
