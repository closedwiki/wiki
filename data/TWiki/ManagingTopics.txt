%META:TOPICINFO{author="PeterThoeny" date="1008578651" format="1.0" version="1.14"}%
%META:TOPICPARENT{name="WebHome"}%
%TOC%
%STARTINCLUDE%
---# Managing Topics

_Browser-based rename, move, and delete for individual topics_

---++ Overview

Use browser controls while viewing a topic, to change its name, move it to another TWiki web, or delete it to a hidden =Trash= web.

---++ How to Rename/Move/Delete a Topic

	1. *Click* on ==[More]== (bottom right of page) on the topic to be changed, then, in the new screen, on ==[Rename/move]==.
	1. *Select* target web if other than the current web - chose =Trash= to [[#DeleteTopic][delete a topic]]
	1. *Enter* the new topic name - default is current name <br />
	  __NOTE:__ You will be warned if there are locks or if there is a name conflict.
	1. *Select* from the list of referring links any topics NOT to be updated with the new name (by default, all referring links will be updated).
	1. *Click* on ==[Rename/Move]==: the topic will be renamed and links to the topic updated as requested.
		* If any of the referring pages are locked then they will be listed.
		* You can correct these later by again pressing ==[Rename/Move]==.

---+++ Referring Topics

Referring topics are found using the the %<nop>SEARCH% variable, see the template =searchrenameview.tmpl=.  First, matching topics in the current Web are listed - matches are to _topic_.  Next, all Webs (including the current one) are listed that match _web.topic_.  Because %<nop>SEARCH% is used, Webs marked in WebPreferences as NOSEARCHALL will not show up in the search for refernces to the _topic_ being changed.

Changed references are kept are as short as possible, ex: _topic_ is used in preference to _web.topic_.

#DeleteTopic
---+++ About Deleting a Topic

Deleted topics are moved to the =Trash= web - NOT physically erased from the server.  All webs share =Trash= - in case of a name conflict with a topic already =Trash=, the user is alerted and asked to choose a new name.

---++ Clearing the Trash

The =Trash= web should be be cleared periodically, by archiving the contents if required (recommended), then deleting the files from the =Trash= directory.

---++ Redirecting from an Old Topic

You can use TWikiMetaData to place a command in %TWIKIWEB%.WebTopicViewTemplate and %TWIKIWEB%.WebTopicNonWikiTemplate that will show if a topic has moved by searching for the tag %<nop>META:TOPICMOVED{...}%. Customize something like this:

<blockquote style="background-color:#f0f0f0">
<verbatim>
%<nop>METASEARCH{type="topicmoved" web="%WEB%" topic="%TOPIC%" 
title="This topic used to exist and was moved to: "}%
</verbatim>
</blockquote>

---++ Effect of Access Settings

Permissions affect the rename function in various ways.  To rename a topic, you need both change and rename permissions.  To alter referring topics, you need change permission.  See TWikiAccessControl for information on setting up access permissions.

---++ How Rename/move Works

	1. %<nop>SEARCH%, with a special template, finds and displays all occurrences of the topic name in other topics, site-wide. These referring links are by default automatically changed to the new topic and/or web name. This includes relevant TWikiMetaData definitions.
		* User can omit one or more topics from the update list.
		* =&lt;pre&gt;= and =&lt;verbatim&gt;= are honoured - no changes are made to text within these areas.
	2. The topic is moved (if locks allow).
	3. References are changed (locks and permissions permitting).
	4. Any referring topics that can't be changed due to locks are listed - user can change them at another time.

---++ Known Limitations

*Rename/move* in is fairly complicated due to the dynamic generation of links. Ideally, it would be possible to run the required part of rendering in a way that would allow identification of the text to be changed. Unfortunately, these hooks don't exist in TWiki at present.  Instead, %<nop>SEARCH% is used with a special template to show the text to be changed, and the selected topics are then altered. One drawback is that =search= can show matches that will not be updated because of case differences. Other mismatches to actual rendered output are also possible as the approaches are so different.

The following shows some limitations of square bracket processing.

<blockquote style="background-color:#f0f0f0">
<verbatim>
[[Old Topic]]  => [[NewTopic][Old Topic]]
[[old topic]]  => [[NewTopic][old topic]]
[[old t opic]] => not changed
[[OldTopic]]	=> [[NewTopic]]
</verbatim>
</blockquote>

-- MikeMannix - 15 Sep 2001 <br />	
%META:TOPICMOVED{by="MikeMannix" date="999329908" from="TWiki.RenameTopic" to="TWiki.ManagingTopics"}%
