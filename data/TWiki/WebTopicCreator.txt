%META:TOPICINFO{author="TWikiContributor" date="1131431859" format="1.1" version="$Rev$"}%
%META:TOPICPARENT{name="WebHome"}%
<script language="JavaScript">
<!--
function capitalize(value) {
 var sIn = value; var sOut = ''; var chgUpper = true; for ( var i = 0; i < sIn.length; i++ ) { var ch = sIn.charAt( i ); if( ch!=' ' ) { if( chgUpper ) { ch = ch.toUpperCase(); chgUpper = false; } } sOut+=ch; if( ch==' ' ) { chgUpper = true; } else { chgUpper = false; }} return sOut; 
}
function canSubmit(form) {
 form.topic.value=capitalize(form.topic.value);
 return true;
}
//-->
</script>
<form name="new" action="%SCRIPTURLPATH{edit}%/%BASEWEB%/" onSubmit="return canSubmit(this);">
---+ %MAKETEXT{"Create New Topic in [_1] Web" args="<nop>%BASEWEB%"}%
<table><tr><td>
%MAKETEXT{"Topic name:"}%
</td><td>

<input type="text" name="topic" size="40" value="" onBlur="this.value=capitalize(this.value);" />
<!-- TODO: move JS to a separate file and make it callable on click of the button too -->
<!-- TODO: blank out all the irrelevant links: Edit, Compose, Attach, Printable, ... Raw text, versions, History, More topic actions: could this be a CSS? -->
&nbsp;<input type="submit" class="twikiSubmit" value="Create" />
</td></tr><tr><td>
%MAKETEXT{"Topic parent:"}%
</td><td>
<select name="topicparent" size="10">
<option value="%URLPARAM{ "parent" default="" }%" selected="selected">%URLPARAM{ "parent" default="%MAKETEXT{"(no parent, orphaned topic)"}%" }%</option>
%SEARCH{ "\.*" regex="on" scope="topic" nosearch="on" nototal="on" format="<option>$topic</option>" }%
<option value="">%MAKETEXT{"(no parent, orphaned topic)"}%</option>
</select>
</td></tr></table>
<input type="hidden" name="onlywikiname" value="on" />
<input type="hidden" name="onlynewtopic" value="on" />
</form>

%MAKETEXT{"To create a new topic, enter a [_1].WikiWord for the topic name, select a topic parent and click 'Create.'" args="%TWIKIWEB%"}%

%MAKETEXT{"Once you have created the topic, consider adding links in related topics to the new topic so that there are more ways people can discover it."}%
