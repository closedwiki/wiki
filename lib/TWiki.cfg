# Configuration file for TWiki, held in 'lib' directory. You can edit
# this file directly to set your configuration, but in general it's better
# to leave this file untouched and create a new file called "LocalSite.cfg"
# (which TWiki will read _after_ it has processed this file). That way,
# there is no risk of your settings being overwritten when you upgrade.
#
# See 'setlib.cfg' in 'bin' directory to configure non-standard location
# for 'lib' directory or Perl modules.
#
# Notes:
# - Latest version at http://twiki.org/
# - Installation instructions in $dataDir/TWiki/TWikiDocumentation.txt
# - Optionally create a new plugin or customize DefaultPlugin.pm for
#   custom extensions of rendering rules.
# - Upgrading TWiki is easy as long as you only customize DefaultPlugin.pm.
# - See a list of variables that can be accessed from topics in
#   TWikiDocumentation.html
#
# If you are installing TWiki for the first time, and you are on a
# Unix or Linux platform and behind a firewall, the only section you
# should need to worry about below is "General path settings".
# Remember it is better to create LocalSite.cfg and write your
# settings there than to edit this file.
#
# If you are on a public site, you will need to consider carefully
# how you are going to manage authentication and access control.
#
# There are a number of documentation topics describing how to
# configure TWiki for different platforms, and a lot of support
# available at TWiki.org.

# Constants used in the rest of the file
use constant TRUE => 1;
use constant FALSE => 0;

######## Operating system ############################################

# $cfg{DetailedOS} and $cfg{OS} are calculated in the TWiki code. You
# should only need to override if there is something badly wrong with
# those calculations.
# $cfg{DetailedOS} should be the value of Perl $OS
# $cfg{OS} may be one of UNIX WINDOWS VMS DOS MACINTOSH OS2

######## General path settings #######################################
# NOTE: If your server is running Microsoft Windows, paths should
# normally be written as "c:/foo" not "c:\foo" (which doesn't do what
# you may think it does). You can use '\' without problems inside
# single quotes, e.g. 'c:\foo'.

# URL for TWiki host e.g. http://myhost.com:123
$cfg{DefaultUrlHost} = 'http://your.domain.com';

# cgi-bin URL path for TWiki e.g. /twiki/bin
$cfg{ScriptUrlPath} = '/twiki/bin';

# Attachments URL path e.g. /twiki/pub
$cfg{PubUrlPath} = '/twiki/pub';

# Attachments store file path (not URL), must match /twiki/pub e.g.
# /usr/local/twiki/pub
$cfg{PubDir} = '/home/httpd/twiki/pub';

# Template directory e.g. /usr/local/twiki/templates
$cfg{TemplateDir} = '/home/httpd/twiki/templates';

# Topic files store (file path not URL) e.g. /usr/local/twiki/data
$cfg{DataDir} = '/home/httpd/twiki/data';

# URL path to scripts used to render links. Defaults to the same as
# $cfg{ScriptUrlPath}. Set if using redirection to shorten URLs.
$cfg{DispScriptUrlPath} = undef;

# Suffix of TWiki Perl scripts (e.g. .pl)
$cfg{ScriptSuffix} = '';

######## Security setup ##############################################

# Remember remote user by matching the IP address if no REMOTE_USER
# (Note: Does not work reliably with dynamic IP addresses). If you
# have to log in to view every page, you probably need to set this.
$cfg{RememberUserIPAddress} = FALSE;

# Pathname of temporary file that maps IP address to username if
# cfgDoRememberRemoteUser is on
$cfg{RemoteUserFileName} = "$cfg{DataDir}/remoteusers.txt";

# Two password formats are supported; htpasswd and htdigest
$cfg{HtpasswdFormatFamily} = 'htpasswd';

# Path to the file that store passwords
$cfg{HtpasswdFileName} = "$cfg{DataDir}/.htpasswd";

# Password encoding; for Windows Apache use sha1
$cfg{HtpasswdEncoding} = 'crypt';

# Authentication realm (must be the same as in password file, MUST
# NOT contain colons):
$cfg{AuthRealm} = 'Enter your WikiName. (First name and last name, no space, no dots, capitalized, e.g. JohnSmith). Cancel to register if you do not have one.';

# Map login name to Wiki name, default 1, set to 0 for .htpasswd
# authenticated sites :
$cfg{MapUserToWikiName} = TRUE;

# Hide password in registration email to the *user*
# Note that TWiki sends admins a separate confirmation.
$cfg{HidePasswdInRegistration} = FALSE;

# Remove .. from %INCLUDE{filename}%, to stop includes
# of relative paths
$cfg{DenyDotDotInclude} = TRUE;

# Filter-in regex for uploaded (attached) file names (Matching
# filenames will have .txt appended) WARNING: Be sure to update
# this list with any configuration or script filetypes that are
# automatically run by your web server
$cfg{UploadFilter} = qr/^(\.htaccess|.*\.(?:php[0-9s]?|phtm[l]?|pl|py|cgi))$/;

# Filter-in regex for webnames, topic names, usernames, include paths
# and skin names
$cfg{NameFilter} = qr/[\*?~^$@%`"'&;|<>\x00-\x1f]/;

# If this is set, the the search module will use more relaxed
# rules governing regular expressions earches.
$cfg{ForceUnsafeRegexes} = FALSE;

# Path control. If set, overrides the default PATH setting to control
# where TWiki looks for programs. Check notes for your operating
# system. NOTE: it is better to use full pathnames on the program path
# settings below, rather than relying on this path.
#
# ---+ Unix or Linux
#    * path separator is :
#    * ensure diff and shell (Bourne or bash type) is found on 
#      the path (control the path with safeEnvPath).
# ---+ Windows ActiveState Perl, with non-Cygwin RCS, OR no
#      PERL5SHELL setting.
#    * path separator is ;
#    * The Windows system directory (e.g. c:winntsystem32) is
#      required in this path.
#    * Must NOT use '/' in pathnames as this upsets cmd.exe -
#      single '' is OK using Perl single-quoted string.
# ---+ Windows: ActiveState Perl, with Cygwin RCS and PERL5SHELL set
#      to 'c:/cygwin/bin/bash.exe -c'
#    * path separator is ;
#    * best to avoid 'c:/foo' type paths, because it can cause a
#      Perl 'Insecure directory in $ENV{PATH}' error.
#      The best approach is to convert 'c:/foo' to '/c/cygdrive/foo'
#      - odd looking but it works!  The Windows system directory 
#      (e.g. /cygdrive/c/winnt/system32) is required in this path.
#      For example:
#      /cygdrive/c/YOURCYGWINDIR/bin;/cygdrive/c/YOURWINDOWSDIR/system32
# ---+ Windows: ActiveState Perl, with non-Cygwin RCS,
#       OR no PERL5SHELL setting.
#    * path separator is ';'
#    * The Windows system directory is required in this path.
#       Must NOT use / in directories on the path as this upsets
#       cmd.exe - single '\' is OK using Perl single quoted string
#       e.g. safeEnvPath = 'c:my programs	wiki';
$cfg{SafeEnvPath} = '/bin:/usr/bin';

# Added to email addresses to Prevent spambots from grabbing
# addresses e.g. set to 'NOSPAM' to get user.com
# rendered as user.com. Usually only required
# for public websites.
$cfg{NoSpamPadding} = '';

# Group of users that can use special action=repRev and action=delRev
# on =save= and ALWAYS have edit powers. See the twiki documentation
# for an explanation of twiki groups.
$cfg{SuperAdminGroup} = 'TWikiAdminGroup';

# Build /twiki/bin from ->url parameter. Note that displayed links
# are incorrect after failed authentication if this is set
$cfg{GetScriptUrlFromCgi} = FALSE;

# Remove port number from URL.
$cfg{RemovePortNumber}  = FALSE;

# Whether or not to to log different actions
$cfg{Log}{view}     = TRUE;
$cfg{Log}{edit}     = TRUE;
$cfg{Log}{save}     = TRUE;
$cfg{Log}{rename}   = TRUE;
$cfg{Log}{attach}   = TRUE;
$cfg{Log}{upload}   = TRUE;
$cfg{Log}{rdiff}    = TRUE;
$cfg{Log}{changes}  = TRUE;
$cfg{Log}{search}   = TRUE;
$cfg{Log}{register} = TRUE;

######## Log files ###################################################
# Name of the various log files. You can use %DATE% in the pathnames
# to make the file renewed every month e.g. /var/log/TWiki/log.%DATE%.

# Directory must be writable by the CGI user (Note: this variable is
# local to this file; it is not used in the code).
my $logDir = $cfg{DataDir};

# File for debug messages (usually very low volume)
$cfg{DebugFileName} = "$logDir/debug.txt";

# Warnings - low volume, hopefully!
$cfg{WarningFileName} = "$logDir/warn%DATE%.txt";

# Access log - high volume, depending on what you enabled in $cfg{Log}
$cfg{LogFileName} = "$logDir/log%DATE%.txt";

######## External programs ###########################################
# NOTE: You might want to avoid c: at start of cygwin unix commands on
# Windows, seems to cause a problem with pipe used in search

# The quote used for command arguments is normally ' for
# unix, and " for Windows.

# Mail program used in case Net::SMTP is not installed.
# See also SMTPMAILHOST in TWikiPreferences.
# Windows: this setting is ignored, just use Net::SMTP.
$cfg{MailProgram} = '/usr/sbin/sendmail -t -oi -oeq';

# Full path to GNU-compatible egrep program
$cfg{EgrepCmd} = '/bin/egrep';

# Full path to GNU-compatible fgrep program
$cfg{FgrepCmd} = '/bin/fgrep';

######## Localisation ################################################

# Set the timezone (this only effects the display of times,
# all internal storage is still in GMT). May be gmtime / servertime
$cfg{DisplayTimeValues} = 'gmtime';

# Internationalisation
# See the output of the 'testenv' script for help with these settings.
# Set 0 to 1 to enable internationalisation support for
# 8-bit character sets
$cfg{UseLocale} = FALSE;

# Site-wide locale - used by TWiki and external programs such as grep,
# and to specify the character set for the user's web browser.  The
# language part also prevents English plural handling for non-English
# languages.  Ignored if 0 is 0.
#
# Locale names are not standardised - check 'locale -a' on your
# system to see what's installed, and check this works using command
# line tools.  You may also need to check what charsets your browsers
# accept - the 'preferred MIME names' at
# http://www.iana.org/assignments/character-sets are a good starting
# point.
#
# WARNING: Topics are stored in site character set format, so data
# conversion of file names and contents will be needed if you change
# locales after creating topics whose names or contents include 8-bit
# characters.
#
# Examples:
# 'de_AT.ISO-8859-15';	# Austria with ISO-8859-15 for Euro
# 'ru_RU.KOI8-R';	# Russia
# 'ja_JP.eucjp';	# Japan
# 'C';			# English only; no I18N features
$cfg{SiteLocale} = 'en_US.ISO-8859-1';

# Site character set override - set this only if you must match a
# specific locale (from 'locale -a') whose character set is not
# supported by your chosen conversion module (i.e. Encode for Perl
# 5.8 or higher, or Unicode::MapUTF8 for other Perl versions).  For
# example, if the locale 'ja_JP.eucjp' exists on your system but only
# 'euc-jp' is supported by Unicode::MapUTF8, set this to 'euc-jp'.
$cfg{SiteCharsetOverride} = '';

# Set 1 to 0 to force explicit listing of national chars in
# regexes, rather than relying on locale-based regexes. Intended
# for Perl 5.6 or higher on platforms with broken locales: should
# only be set if you have locale problems.
$cfg{LocaleRegexes} = TRUE;

# If a suitable working locale is not available (i.e. $cfg{UseLocale}
# is 0), OR  you are using Perl 5.005 (with or without working
# locales), OR $cfg{LocalRegexes} is 0, you can use WikiWords with
# accented national characters by putting any '8-bit' accented
# national characters within these strings - i.e. $cfg{UpperNational}
# should contain upper case non-ASCII letters.  This is termed
# 'non-locale regexes' mode.
#
# If 'non-locale regexes' is in effect, WikiWord linking will work,
# but  some features such as sorting of WikiWords in search results
# may not. These features depend on $cfg{UseLocale}, which can be set
# independently of $cfg{LocaleRegexes}, so they will work with Perl
# 5.005 as long as $cfg{UseLocale} is set to 1 and you have working
# locales.
$cfg{UpperNational} = '';
$cfg{LowerNational} = '';

######## Store settings ##############################################

# Default store implementation
# RcsWrap - use RCS executables
# RcsLite - use a 100% Perl simplified implementation of Perl
# RcsLite is useful if you don't have, and can't install, RCS - for
# example, on a hosted platform. It will work, and is compatible with
# RCS, but is not quite as fast.
$cfg{StoreImpl} = 'RcsWrap';

# Settings for RCS
# The quote used for command arguments is normally ' for
# unix, and " for Windows.
my $rcs = "/usr/bin";
my $ext = ( $cfg{OS} eq "WINDOWS" ) ? "-x,v" : "";
# Suffixes valid on plain text files
# Defines which attachments will be treated as ASCII in RCS
$cfg{RCS}{asciiFileSuffixes} = '.(txt|html|xml|pl)$';
# File security for new directories
$cfg{RCS}{dirPermission}= 0775;
# Set this if you want to use RCS subdirectories instead of storing
# ,v files alongside the topics. Not recommended.
$cfg{RCS}{useSubDir} = FALSE;
# RCS init command, needed when initialising a file as binary
$cfg{RCS}{initBinaryCmd} = "$rcs/rcs $ext -q -i -t-none -kb %FILENAME|F%";
$cfg{RCS}{tmpBinaryCmd}  = "$rcs/rcs $ext -q -kb %FILENAME|F%";
# RCS check in command
$cfg{RCS}{ciCmd}         = "$rcs/ci $ext -q -l -m%COMMENT|U% -t-none -w%USERNAME|S% %FILENAME|F%";
$cfg{RCS}{ciDateCmd}     = "$rcs/ci -l $ext -q -mnone -t-none -d'%DATE%' -w'%USERNAME%' %FILENAME%",
# RCS check out command
$cfg{RCS}{coCmd}         = "$rcs/co $ext -q -p%REVISION|N% -ko %FILENAME|F%";
# RCS history command
$cfg{RCS}{histCmd}       = "$rcs/rlog $ext -h %FILENAME|F%";
# RCS history on revision command
$cfg{RCS}{infoCmd}       = "$rcs/rlog $ext -r%REVISION|N% %FILENAME|F%";
# RCS revision diff command
$cfg{RCS}{diffCmd}       = "$rcs/rcsdiff $ext -q -w -B -r%REVISION1|N% -r%REVISION2|N% -ko --unified=%CONTEXT|N% %FILENAME|F%";
# RCS for breaking a lock
$cfg{RCS}{breakLockCmd}  = "$rcs/rcs $ext -q -l -M %FILENAME|F%";
# RCS unlock command
$cfg{RCS}{unlockCmd}     = "$rcs/rcs $ext -q -u %FILENAME|F%";
# RCS delete revision command
$cfg{RCS}{delRevCmd}     = "$rcs/rcs $ext -q -o%REVISION|N% %FILENAME|F%";
# RCS lock command
$cfg{RCS}{lockCmd}       = "$rcs/rcs $ext -q -l %FILENAME|F%";

######## Change notification #########################################
# If Net::SMTP is available it is used for mail; otherwise see the
# setting of mailProgram, above.

# Name of topic in each web that has notification registrations.
$cfg{NotifyTopicName}     = 'WebNotify';

# Remove IMG tags in notification mails.
$cfg{RemoveImgInMailnotify} = TRUE;

######## Miscellaneous settings ######################################

# Guest user's login name (guest)
$cfg{DefaultUserLogin} = 'guest';

# Guest user's wiki name (TWikiGuest)
$cfg{DefaultUserWikiName} = 'TWikiGuest';

# Set to enable experimental mirror-site support. If this name is
# different to MIRRORSITENAME, then this TWiki is assumed to be a
# mirror of another. You are highly recommended not to dabble with
# this experimental, undocumented feature!
$cfg{SiteWebTopicName} = '';

# Name of the web where docs and site level preferences are held
$cfg{SystemWebName} = 'TWiki';

# Name of site-level preferences topic in the system web
$cfg{SitePrefsTopicName} = 'TWikiPreferences';

# Name of the web where usertopics are stored
$cfg{UsersWebName} = 'Main';

# Name of topic in the usertopics web where registered users
# are listed.
$cfg{UsersTopicName} = 'TWikiUsers';

# Name of main topic in a web
$cfg{HomeTopicName} = 'WebHome';

# Name of preferences topic in a web
$cfg{WebPrefsTopicName} = 'WebPreferences';

# Name of statistics topic
$cfg{Stats}{TopicName} = 'WebStatistics';

# Number of top viewed topics to show in statistics topic
$cfg{Stats}{TopViews} = 10;

# Number of top contributors to show in statistics topic
$cfg{Stats}{TopContrib} = 10;

# How many links to old revisions to show, 0 for all
$cfg{NumberOfRevisions} = 3;

# If this is set to a > 0 value, and the revision control system
# supports it (RCS does), then if a second edit of the same topic
# is done by the same user within this number of seconds, a new
# revision of the topic will NOT be created (the top revision will
# be replaced).
$cfg{ReplaceIfEditedAgainWithin} = 3600;

# Change non-existant plural topic name to singular,
# e.g. TestPolicies to TestPolicy.
$cfg{PluralToSingular} = TRUE;

# Disable plugins. Set to 1 if TWiki isn't working after
# installing a new plugin. This allows you to remove the plugin from
# the ACTIVEPLUGINS list in TWikiPreferences.
$cfg{DisableAllPlugins} = FALSE;

# Pathname to file that maps file suffixes to MIME types :
# For Apache server set this to Apache's mime.types file pathname,
# for example /etc/httpd/mime.types, or use the default shipped in
# the TWiki data directory.
$cfg{MimeTypesFileName} = "$cfg{DataDir}/mime.types";

1;
