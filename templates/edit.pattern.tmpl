%TMPL:INCLUDE{"twiki"}%

%TMPL:DEF{"script"}%
<script type="text/javascript">
//<![CDATA[
	ns4 = (document.layers)? true:false;
	ie4 = (document.all)? true:false;
	dom = (document.getElementById)?true:false;
	
	toShow=new Array();
	toHide=new Array();
	
	function init () {
		initTwist();
		initForm();
	}
	
	function initForm() {
		if (document.main.text) document.main.text.focus();
		for (i = 0; i < toShow.length; i++) {
			if(dom) {
				document.getElementById(toShow[i]).style.display="inline";
			} else if( ie4 ) {
				document.all[toShow[i]].style.display="inline";
			} else if( ns4 ) {
				document.layers[toShow[i]].style.display="inline";
			}
		}
		for ( i = 0; i < toHide.length; i++) {
			if(dom) {
				document.getElementById(toHide[i]).style.display="none";
			} else if( ie4 ) {
				document.all[toHide[i]].style.display="none";
			} else if( ns4 ) {
				document.layers[toHide[i]].style.display="none";
			}
		}
	}
	function checkAll( theButton, theButtonOffset, theNum, theCheck ) {
		// find button element index
		var j = 0;
		for( var i = 0; i <= document.main.length; ++i ) {
			if( theButton == document.main.elements[i] ) {
				j = i;
				break;
			}
		}
		// set/clear all checkboxes
		var last = j+theButtonOffset+theNum;
		for( var i = last-theNum; i < last; ++i ) {
			document.main.elements[i].checked = theCheck;
		}
	}
	function launchWindow( theWeb, theTopic, theAnchor ) {
		if( ! theAnchor ) {
			theAnchor = "";
		}
		win = open( "%SCRIPTURLPATH%/view%SCRIPTSUFFIX%/" + theWeb + "/" + theTopic + "?skin=plain.pattern" + theAnchor, theTopic, "titlebar=0,width=500,height=480,resizable,scrollbars");
		if( win ) {
			win.focus();
		}
		return false;
	}

	/* Twist functions: */
	
	function removeClass(element, classname) {
		var classes = getClassList(element);
		var index = indexOf(classname,classes);
		if (index >= 0) {
			classes.splice(index,1);
			setClassList(element,classes);
		}
	}

	function addClass(element, classname) {
		var classes = getClassList(element);
		if (indexOf(classname, classes)<0) {
			classes[classes.length]=classname;
			setClassList(element,classes);
		}
	}

	function replaceClass(element, oldclass, newclass) {
		removeClass(element,oldclass);
		addClass(element,newclass);
	}

	function getClassList(element) {
		if (element.classes) return element.classes; // cached in element property
		if (element.className && element.className!="") {
			element.classes = element.className.split(' ');
			return element.classes;
		}
		return [];
	}

	function setClassList(element, classlist) {
		element.className=classlist.join(' ');
	}

	function indexOf(element,array) {
		for (var i = 0; i < array.length; i++) {
			if (array[i]==element) {
				return i;
			}
        }
		return -1;
	}
	
	function getElementsByClassName(className) {
	
		var elements = [];
		var allObjects = (document.all) ? document.all : document.getElementsByTagName("*");
		for (var i = 0; i < allObjects.length; i++) {
			if (allObjects.item(i).className.indexOf(className) != -1)
				elements.push(allObjects.item(i));
		}
		return elements;
	}

	function initTwist () {
        var makeHiddenElements =
            getElementsByClassName('twikiTwistMakeHidden');
        var i;
		for (i = 0; i < makeHiddenElements.length; i++) {
			replaceClass(makeHiddenElements[i], 'twikiTwistMakeHidden',
                         'twikiTwistHidden');
		}
		
        var makeVisibleElements =
            getElementsByClassName('twikiTwistMakeVisible');
		for (i = 0; i < makeVisibleElements.length; i++) {
			removeClass(makeVisibleElements[i], 'twikiTwistMakeVisible');
		}
	}
	
	function twist(id) {
		var showControl = document.getElementById(id+'show');
		var hideControl = document.getElementById(id+'hide');
		var toggleElem = document.getElementById(id+'toggle');
		if (!toggleElem.twisted) {
			addClass(showControl, 'twikiTwistHidden');
			removeClass(hideControl, 'twikiTwistHidden');
			removeClass(toggleElem, 'twikiTwistHidden');
			toggleElem.twisted = 1;
		} else {
			removeClass(showControl, 'twikiTwistHidden');
			addClass(hideControl, 'twikiTwistHidden');
			addClass(toggleElem, 'twikiTwistHidden');
			toggleElem.twisted = 0;
		}
	}
//]]>
</script>%TMPL:END%



%TMPL:DEF{"templatecustomstyle"}%
<style type="text/css" media="all">
	.twikiTwistHidden { display:none; }
	.twikiTwistPlaceholder { color:#8490A1; }
	.twikiTwistMakeVisible { display:none; }
</style>
<script type="text/javascript">
//<![CDATA[
document.write("<style type='text/css'>");
document.write(".twikiTwistMakeHidden {display:none;}");
document.write("<\/style>");
//]]>
</script>%TMPL:END%



%TMPL:DEF{"toolbar"}%<div class="patternTop">
<table cellpadding="0" cellspacing="0" border="0">
<tr>
<td class="patternToolBar">
<span id="helpshow" class="twikiTwistMakeVisible"><a href="#" onclick="twist('help'); return false;">%_{"Show formatting help"}%</a></span><span id="helphide" class="twikiTwistHidden twikiTwistMakeVisible"><a href="#" onclick="twist('help'); return false;">%_{"Hide formatting help"}%</a></span>
</td>
<td class="patternToolBar">
<div class="patternToolBarButtons">
<span class="patternButton"><a href="%SCRIPTURLPATH%/manage%SCRIPTSUFFIX%/%WEB%/%TOPIC%?action=editSettings" rel='nofollow'>%_{"Topic settings"}%</a></span>
</div>
</td>
</tr>
</table>
</div>
<div class="patternToolBarBottom"></div>
%TMPL:END%


%TMPL:DEF{"bodystart"}%
<body class="patternNoViewPage patternEditPage" onload="init()"><a name="PageTop"></a><div class="patternPage">%TMPL:END%



%TMPL:DEF{"titleaction"}%%_{"(edit)"}% %TMPL:END%



%TMPL:DEF{"titlehelp"}% %TMPL:END%



%TMPL:DEF{"webaction"}%%_{"Change topic"}%%TMPL:END%



%TMPL:DEF{"simpleheader"}%
---+ <nop>%TOPIC% %_{"(edit)"}%%TMPL:END%



%TMPL:DEF{"topicaction"}%<div class="patternTopicAction"><div class="patternSaveOptions"><span class="patternSaveOptionsContents">
<input type="checkbox" class="twikiCheckbox" title="Creates a new topic revision when saving" id="forcenewrevision" name="forcenewrevision" %FORCENEWREVISIONCHECKBOX% /><label for="forcenewrevision">%_{"Force new revision"}%</label> <a target="ForceNewRevision" onclick="return launchWindow('%TWIKIWEB%','ForceNewRevision')" href="%SCRIPTURLPATH%/view%SCRIPTSUFFIX%/%TWIKIWEB%/ForceNewRevision" title='%_{"Read new revision help text in new window"}%' rel='nofollow'>%_{"help"}%</a></span></div>
<div class="patternActionButtons">
<input type="submit" class="twikiSubmit" name="action_save" id="save" value='%_{"Save"}%' /><label accesskey="s" for="save"></label>%TMPL:P{"sep"}%<input type="submit" class="twikiButton" name="action_quietsave" id="quietsave" value='%_{"QuietSave"}%' /><label accesskey="q" for="quietsave"></label>%TMPL:P{"sep"}%<input type="submit" class="twikiButton" name="action_checkpoint" id="checkpoint" value='%_{"Checkpoint"}%' /><label accesskey="k" for="checkpoint"></label>&nbsp;%_{"or"}%&nbsp;<input type="submit" class="twikiButton" name="action_preview" id="preview" value='%_{"Preview"}%' /><label accesskey="p" for="preview"></label>&nbsp;%_{"or"}%&nbsp;<input type="submit" class="twikiButton" name="action_cancel" id="cancel" value='%_{"Cancel"}%' title='%_{"Cancel editing and discard changes"}%' /><label accesskey="c" for="cancel"></label></div><div class="patternAccessKeyInfo"><a href="#Opens page in new window" onclick="launchWindow('%TWIKIWEB%', 'AccessKeys'); return false;">%_{"Access keys"}%</a>: S = %_{"Save"}%, Q = %_{"Quiet Save"}%, K = %_{"Checkpoint"}%, P = %_{"Preview"}%, C = %_{"Cancel"}%</div></div>%TMPL:END%



%TMPL:DEF{"content"}%
%TMPL:P{"simpleheader"}%
%TMPL:P{"toolbar"}%<div id="helptoggle" class="twikiHelp twikiTwistHidden">%INCLUDE{"%TWIKIWEB%.WikiSyntaxSummary"}%</div>
<div class="patternFormHolder">
<form name="main" action="%SCRIPTURLPATH%/save%SCRIPTSUFFIX%/%WEB%/%TOPIC%" method="post">
<textarea id="topic" name="text" rows="%EDITBOXHEIGHT%" cols="%EDITBOXWIDTH%" style='%EDITBOXSTYLE%'>%TEXT%</textarea>
<input type="hidden" name="originalrev" value="%ORIGINALREV%" />
<input type="hidden" name="skin" value="%URLPARAM{"skin"}%" />
<input type="hidden" name="cover" value="%URLPARAM{"cover"}%" />
<input type="hidden" name="formtemplate" value="%FORMTEMPLATE%" />
<input type="hidden" name="templatetopic" value="%TEMPLATETOPIC%" />
<input type="hidden" name="topicparent" value="%TOPICPARENT%" />
<input type="hidden" name="newtopic" value="%NEWTOPIC%" />
<input type="hidden" name="cmd" value="%CMD%" />
<div class="patternSig">
<label for="sig" class="twikiGrayText">%_{"Your signature to copy/paste:"}%&nbsp;&nbsp;</label><input size="41" name="sig" type="text" readonly="readonly" title='%_{"Select, copy and paste your signature text to the bottom of your entry"}%' id="sig" value="-- <nop>%WIKIUSERNAME% - %DATE%" /></div>
%FORMFIELDS%
%TMPL:P{"topicaction"}%
</form>
</div>
<div class="twikiHelp twikiTwistMakeHidden">%INCLUDE{"%TWIKIWEB%.WikiSyntaxSummary"}%</div>
%TMPL:END%



%TMPL:P{"htmldoctype"}%
%TMPL:P{"head"}%
%TMPL:P{"bodystart"}%
%TMPL:P{"main"}%
%TMPL:P{"bodyend"}%
