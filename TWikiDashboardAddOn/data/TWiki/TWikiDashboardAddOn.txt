%META:TOPICINFO{author="TWikiContributor" date="1349422266" format="1.1" version="$Rev$"}%
---+!! TWiki Dashboard Add-On
<!--
   Contributions to this add-on are appreciated. Please update the add-on page at
   http://twiki.org/cgi-bin/view/Plugins/TWikiDashboardAddOn or provide feedback at
   http://twiki.org/cgi-bin/view/Plugins/TWikiDashboardAddOnDev.
   If you are a TWiki contributor please update the add-on in the SVN repository.
-->
<sticky>
<div style="float:right; background-color:#EBEEF0; margin:0 0 20px 20px; padding: 0 10px 0 10px;">
%TOC{title="Page contents"}%
</div>
</sticky>
%SHORTDESCRIPTION%

---++ Introduction

FIXME

---++ Usage

The add-on defines several section that can be included to create a dashboard. Parameters specify the content of the dashboard:

   * =section="dashboard_start"= -- start a dashboard
      * =width=""= -- width of dashboard in pixels, should match banner width, optional, default: 1024

   * =section="banner"= - dashboard banner
      * =image=""= -- banner image URL, optional
      * =title=""= -- banner title, optional, default no title
      * =width=""= -- banner width in pixels, should match dashboard width and image width, optional, default: 1024
      * =height=""= -- banner height in pixels, optional, default: 150
      * =buttons=""= -- banner buttons, optional.
         * Format: =label1|link1; label2|link2, label3|modal box title 3|modal box content|modal box width...=
         * Link can be a !Web.TopicName or a URL.
         * A modal box is shown if four "|" separated tokens are found. Tokens: Button label, box title, box content, box width
      * =style=""= -- CSS of banner box, optional, default: ="border: solid #d0d0d0 1px; padding: 15px;"=
      * =titlestyle=""= -- CSS of banner title, optional, default: =" margin: 10px 15px; padding: 0; font-size: 18pt; font-weight: 600; color: #333333;"=
      * =contentstyle=""= -- CSS of button container, optional, default: ="bottom: 0; right: 0; margin: 0; padding: 10px 10px; color: #333333;"=

   * =section="box_start"= -- start a box
      * =title=""= -- box title, optional, default no title
      * =width=""= -- box width in pixels, optional, default: 300. Note: This is the usable width of the box content, it does not include 32 pixel of box border and padding
      * =height=""= -- box height in pixels, optional, default: 200
      * =style=""= -- CSS of outer box, optional, default: ="border: solid #d0d0d0 1px; padding: 15px;"=
      * =titlestyle=""= -- CSS of title, optional, default: ="text-align:center; font-size:19px; font-weight:bold; color: #333335; padding:0 0 12px 0; white-space: nowrap; overflow: hidden;"=
      * =contentstyle=""= -- CSS of content, optional, default: ="overflow:auto; "=

   * =section="box_end"= -- end a box

   * =section="dashboard_end"= -- end a dashboard

---++ Example

This example shows a simple dashboard. Write this:
<verbatim>
%DASHBOARD{ section="dashboard_start" }%
%DASHBOARD{ section="banner"
 image="%PUBURL%/%SYSTEMWEB%/TWikiDashboardImages/marin-headlands.jpg"
 title="Dashboard for %WIKIUSERNAME%"
 buttons="TWiki Help|%SYSTEMWEB%.WebHome; Popup Demo|Modal Popup Demo|This requires the TWiki:Plugins.ModalBoxAddOn"
}%
%DASHBOARD{ section="box_start" title="Box 1 title" }%
Box 1 content
%DASHBOARD{ section="box_end" }%
%DASHBOARD{ section="box_start" title="Box 2 title" }%
Box 2 content
%DASHBOARD{ section="box_end" }%
%DASHBOARD{ section="box_start" title="Box 3 title" }%
Box 3 content
%DASHBOARD{ section="box_end" }%
%DASHBOARD{ section="box_start" title="Box 4 title" 
 width="992" height="100"
}%
Box 4 content
%DASHBOARD{ section="box_end" }%
%DASHBOARD{ section="dashboard_end" }%
</verbatim>

To get this dashboard:

---+++ USING %<nop>INCLUDE:
%INCLUDE{ "TWikiDashboardAddOn" section="dashboard_start" }%
%INCLUDE{ "TWikiDashboardAddOn" section="banner"
 image="%PUBURL%/%SYSTEMWEB%/TWikiDashboardImages/marin-headlands.jpg"
 title="Dashboard for %WIKIUSERNAME%"
 buttons="TWiki Help|%SYSTEMWEB%.WebHome; Popup Demo|Modal Popup Demo|This requires the TWiki:Plugins.ModalBoxAddOn|600"
}%
%INCLUDE{ "TWikiDashboardAddOn" section="box_start" title="Box 1 title" }%
Box 1 content
%INCLUDE{ "TWikiDashboardAddOn" section="box_end" }%
%INCLUDE{ "TWikiDashboardAddOn" section="box_start" title="Box 2 title" }%
Box 2 content
%INCLUDE{ "TWikiDashboardAddOn" section="box_end" }%
%INCLUDE{ "TWikiDashboardAddOn" section="box_start" title="Box 3 title" }%
Box 3 content
%INCLUDE{ "TWikiDashboardAddOn" section="box_end" }%
%INCLUDE{ "TWikiDashboardAddOn" section="box_start" title="Box 4 title" 
 width="992" height="100"
}%
Box 4 content
%INCLUDE{ "TWikiDashboardAddOn" section="box_end" }%
%INCLUDE{ "TWikiDashboardAddOn" section="dashboard_end" }%

---+++ USING %<nop>INCLUDE with default (no params):
%INCLUDE{ "TWikiDashboardAddOn" section="dashboard" }%
%INCLUDE{ "TWikiDashboardAddOn" section="dashboard_start" }%
%INCLUDE{ "TWikiDashboardAddOn" section="banner" }%
%INCLUDE{ "TWikiDashboardAddOn" section="box_start" title="Box 1 title" }%
Box 1 content
%INCLUDE{ "TWikiDashboardAddOn" section="box_end" }%
%INCLUDE{ "TWikiDashboardAddOn" section="box_start" }%
Box 2 content (no title)
%INCLUDE{ "TWikiDashboardAddOn" section="box_end" }%
%INCLUDE{ "TWikiDashboardAddOn" section="dashboard_end" }%

---+++ USING %<nop>DASHBOARD:
%DASHBOARD{ section="dashboard_start" }%
%DASHBOARD{ section="banner"
 image="%PUBURL%/%SYSTEMWEB%/TWikiDashboardImages/marin-headlands.jpg"
 title="Dashboard for %WIKIUSERNAME%"
 buttons="TWiki Help|%SYSTEMWEB%.WebHome; Popup Demo|Modal Popup Demo|This requires the TWiki:Plugins.ModalBoxAddOn|600"
}%
%DASHBOARD{ section="box_start" title="Box 1 title" }%
Box 1 content
%DASHBOARD{ section="box_end" }%
%DASHBOARD{ section="box_start" title="Box 2 title" }%
Box 2 content
%DASHBOARD{ section="box_end" }%
%DASHBOARD{ section="box_start" title="Box 3 title" }%
Box 3 content
%DASHBOARD{ section="box_end" }%
%DASHBOARD{ section="box_start" title="Box 4 title" 
 width="992" height="100"
}%
Box 4 content
%DASHBOARD{ section="box_end" }%
%DASHBOARD{ section="dashboard_end" }%

---+++ USING %<nop>DASHBOARD with default (no params):
%DASHBOARD{ section="dashboard_start" }%
%DASHBOARD{ section="banner" }%
%DASHBOARD{ section="box_start" title="Box 1 title" }%
Box 1 content
%DASHBOARD{ section="box_end" }%
%DASHBOARD{ section="box_start" }%
Box 2 content (no title)
%DASHBOARD{ section="box_end" }%
%DASHBOARD{ section="dashboard_end" }%

---++ Dashboard Logic

FIXME: Work in progress

This section defines the actual dashboard. View the [[%SCRIPTURL{view}%/%WEB%/%TOPIC%?raw=on][raw text]] of this topic to look under the hood.
<!--=========================================================
%STARTSECTION{ "dashboard_start" }%%ADDTOHEAD{
 "twiki_dashboard_addon"
 text="<style type='text/css' media='all'>
.twDashboardOuter {
 margin: 0;
 padding: 0;
 width: 1040px; /* = 1024 + 2*7 margin + 2 extra */
}
.twDashboardBanner {
 position: relative;
 margin: 0 7px 7px 7px;
 padding: 0;
 width: 1024px; /* = 3 * (300w+2*15p+2*1b) + 2*2*7m */
 height: 150px;
 -moz-box-shadow: 2px 2px 3px #e8e8e8;
 -webkit-box-shadow: 2px 2px 3px #e8e8e8;
 box-shadow: 2px 2px 3px #e8e8e8;
 -moz-border-radius: 4px;
 border-radius: 4px;
 background-color: #dddddd;
 background-image: url(%PUBURLPATH%/%SYSTEMWEB%/TWikiDashboardImages/golden-gate-sunset.jpg);
}
.twDashboardBannerTitle {
 position: absolute;
 margin: 10px 15px;
 padding: 0;
 font-size: 18pt;
 font-weight: 600;
 color: #333333;
}
.twDashboardBannerButtonRow {
 position: absolute;
 bottom: 0;
 right: 0;
 margin: 0;
 padding: 10px 10px;
 color: #333333;
}
.twDashboardBannerButton {
 float:right;
}
.twDashboardBannerButton a {
 display: inline-block;
 margin: 5px 10px;
 padding: 3px 8px;
}
.ui-dialog .ui-dialog-content {
 text-align: left;
}
.twDashboardBox{
 float: left;
 padding: 7px;
}
</style>"
}%<nop>
%INCLUDE{ "%SYSTEMWEB%.ScrollBoxAddOn" section="scroll_box_engine" }%<nop>
<div class="twDashboardOuter" %IF{ "defined 'width'" then="style=\"width: %CALCULATE{$INT(%width%+2*7+2)}%px;\"" }%>
<nop>%ENDSECTION{ "dashboard_start" }%
=========================================================-->

<!--=========================================================
%STARTSECTION{ "banner" }%<div class="twDashboardBanner" style="%IF{ "defined 'width'" then="width: %width%px; " }%%IF{ "defined 'height'" then="height: %height%px; " }%%IF{ "defined 'image'" then="background-image: url(<nop>%image%); " }%%IF{ "defined 'style'" then="%style%; " }%">
<div class="twDashboardBannerTitle" %IF{ "defined 'titlestyle'" then="style=\"%titlestyle%\"" }%>
%IF{ "defined 'title'" then="$percnttitle$percnt" }%
</div>
%IF{
 "defined 'buttons'"
 then="$percntCALCULATE{$SET(twDashboardBannerButtonDisplay, block)}$percnt $percntJQTHEME{smoothness}$percnt"
 else="$percntCALCULATE{$SET(twDashboardBannerButtonDisplay, none)}$percnt"
}%<nop>
<div class="twDashboardBannerButtonRow" style="display: %CALCULATE{$GET(twDashboardBannerButtonDisplay)}%; %IF{ "defined 'contentstyle'" then="%contentstyle%;" }%">
%CALCULATE{$SETM(x, +1)$SUBSTITUTE($LISTJOIN($sp, $LISTMAP(<div class='twDashboardBannerButton'>$SET(i, $SPLIT(\|, $item))$IF($LISTSIZE($GET(i))>3, $NOP(%)INCLUDE{ \"TWiki.ModalBoxAddOn\" id=\"twDashboardButton_$GET(x)_$index\" title=\"$LISTITEM(2, $GET(i))\" content=\"$LISTITEM(3, $GET(i))\" width=\"$LISTITEM(4, $GET(i))\" buttons=\"{}\" }$NOP(%) <a href='#' id='twDashboardButton_$GET(x)_$index'>$LISTITEM(1, $GET(i))</a>, [[$LISTITEM(2, $GET(i))][$LISTITEM(1, $GET(i))]])</div>, $LISTREVERSE($SPLIT(; *, $TRANSLATE(%buttons%, $comma", `'))))), `, &#44;)}% <script> $('.twDashboardBannerButton a').addClass('twikiButton'); </script>
</div>
</div>
<div style="clear: both;"></div>
<nop>%ENDSECTION{ "banner" }%
=========================================================-->

<!--=========================================================
%STARTSECTION{ "box_start" }%<div class="twDashboardBox">
%INCLUDE{ "%SYSTEMWEB%.ScrollBoxAddOn" section="static_box_start" %IF{ "defined 'title'" then="title=\"%title%\"" }% %IF{ "defined 'width'" then="width=\"%width%\"" else="width=\"300\"" }% %IF{ "defined 'height'" then="height=\"%height%\"" else="height=\"200\"" }% %IF{ "defined 'style'" then="boxstyle=\"%style%\"" }% %IF{ "defined 'titlestyle'" then="titlestyle=\"%titlestyle%\"" }% contentstyle="overflow:auto; %IF{ "defined 'contentstyle'" then="%contentstyle%;" }%" }%
<nop>%ENDSECTION{ "box_start" }%
=========================================================-->

<!--=========================================================
%STARTSECTION{ "box_end" }%<nop>
%INCLUDE{ "%SYSTEMWEB%.ScrollBoxAddOn" section="static_box_end" }%
</div>%ENDSECTION{ "box_end" }%
=========================================================-->

<!--=========================================================
%STARTSECTION{ "dashboard_end" }%<div style="clear: both;"></div>
</div>%ENDSECTION{ "dashboard_end" }%
=========================================================-->

---++ Installation Instructions

__Note:__ You do not need to install anything on the browser to use this add-on. The following instructions are for the administrator who installs the add=on on the TWiki server.

   * For an __automated installation__, run the [[%SCRIPTURL{configure}%][configure]] script and follow "Find More Extensions" in the in the __Extensions__ section.

   * Or, follow these __manual installation__ steps:
      * Download the ZIP file from the Plugins home (see below).
      * Unzip ==%TOPIC%.zip== in your twiki installation directory. Content:
        | *File:* | *Description:* |
        | ==data/TWiki/%TOPIC%.txt== | Add-on topic |
        | ==data/TWiki/TWikiDashboardImages.txt== | Topic with dashboard banner images |
        | ==lib/TWiki/Contrib/%TOPIC%.pm== | Add-on Perl module |
        | ==pub/TWiki/TWikiDashboardImages/*== | Sample dashboard banner images |
      * Set the ownership of the extracted directories and files to the webserver user.

   * Add-on __configuration__:
      * If you use TWiki-5.1 or below add the following setting to %SYSTEMWEB%.TWikiPreferences:
<verbatim>
      * Set DASHBOARD = %INCLUDE{ "%SYSTEMWEB%.TWikiDashboardAddOn" section="%section%" %IF{ "'%height{ default="" }%'!=''" then="height=\"%height%\"" }% %IF{ "'%width{ default="" }%'!=''" then="width=\"%width%\"" }% %IF{ "'%ENCODE{ "%image{ default="" }%" type="entity" }%'!=''" then="image=\"%ENCODE{ "%image%" type="quote" }%\"" }% %IF{ "'%ENCODE{ "%title{ default="" }%" type="entity" }%'!=''" then="title=\"%ENCODE{ "%title%" type="quote" }%\"" }% %IF{ "'%ENCODE{ "%buttons{ default="" }%" type="entity" }%'!=''" then="buttons=\"%ENCODE{ "%buttons%" type="quote" }%\"" }% %IF{ "'%ENCODE{ "%style{ default="" }%" type="entity" }%'!=''" then="style=\"%style%\"" }% %IF{ "'%ENCODE{ "%titlestyle{ default="" }%" type="entity" }%'!=''" then="titlestyle=\"%titlestyle%\"" }% %IF{ "'%ENCODE{ "%contentstyle{ default="" }%" type="entity" }%'!=''" then="contentstyle=\"%contentstyle%\"" }% }%
</verbatim>

   * __Test__ if the installation was successful:
      * See if example above work

---++ Add-On Info

   * Set SHORTDESCRIPTION = Create professional dashboards for intranet home, teams, knowledge bases and more

|  Add-on Author: | TWiki:Main.PeterThoeny |
|  Copyright: | &copy; 2012, TWiki:Main.PeterThoeny |
|  License: | GPL ([[http://www.gnu.org/copyleft/gpl.html][GNU General Public License]]) |
|  Add-on Version: | 2012-10-05 |
|  Change History: | <!-- versions below in reverse order -->&nbsp; |
|  2010-10-05: | TWikibug:Item6954: Initial version |
|  TWiki Dependency: | $TWiki::Plugins::VERSION 1.1 (TWiki 5.0)%BR% TWiki:Plugins.ScrollBoxAddOn %BR% TWiki:Plugins.SpreadSheetPlugin version 2012-04-04 |
|  CPAN Dependencies: | none |
|  Other Dependencies: | none |
|  Perl Version: | 5.005 |
|  Add-on Home: | http://TWiki.org/cgi-bin/view/Plugins/TWikiDashboardAddOn |
|  Feedback: | http://TWiki.org/cgi-bin/view/Plugins/TWikiDashboardAddOnDev |
|  Appraisal: | http://TWiki.org/cgi-bin/view/Plugins/TWikiDashboardAddOnAppraisal |

__Related Topics:__ TWikiDashboardImages, ScrollBoxAddOn, %SYSTEMWEB%.TWikiAddOns
