(function($){$.fn.tabpane=function(options){writeDebug("called tabpane()");var opts=$.extend({},$.fn.tabpane.defaults,options);return this.each(function(){var thisOpt=$.extend({},opts,$(this).data());var $tabContainer=$(this);var $tabGroup=$('<ul class="jqTabGroup"></ul>').prependTo($tabContainer);var index=1;var currentTabId;$(this).children(".jqTab").each(function(){var title=$('h2',this).eq(0).remove().text();$tabGroup.append('<li'+(index==opts.select?' class="current"':'')+'><a href="javascript:void(0)" data="'+this.id+'">'+title+'</a></li>');if(index==opts.select){currentTabId=this.id;$(this).addClass("current");}else{writeDebug("hiding "+this.id);$(this).removeClass("current");}
index++;});$(".jqTabGroup li > a",this).click(function(){$(this).blur();var newTabId=$(this).attr('data');if(newTabId!=currentTabId){writeDebug("switch from "+currentTabId+" to "+newTabId);var $currentTab=$("#"+currentTabId);var $newTab=$("#"+newTabId);var data=$newTab.data();if(typeof(data.beforeHandler)!="undefined"){var command="{ oldTab = '"+currentTabId+"'; newTab = '"+newTabId+"'; "+data.beforeHandler+";}";writeDebug("exec "+command);}
$(this).parent().parent().children("li").removeClass("current");$(this).parent().addClass("current");$currentTab.removeClass("current");$newTab.addClass("current");if(typeof(data.afterHandler)!="undefined"){var command="{ oldTab = '"+currentTabId+"'; newTab = '"+newTabId+"'; "+data.afterHandler+";}";writeDebug("exec "+command);eval(command);}
currentTabId=newTabId;}
return false;});$(this).css("display","block");});};function writeDebug(msg){if($.fn.tabpane.defaults.debug){if(window.console&&window.console.log){window.console.log("DEBUG: TabPane - "+msg);}else{}}};$.fn.tabpane.defaults={debug:false,select:1};})(jQuery);;
