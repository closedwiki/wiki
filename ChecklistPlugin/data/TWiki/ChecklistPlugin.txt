%META:TOPICINFO{author="TWikiContributor" date="1132928252" format="1.0" version="$Rev$"}%
---+!! Checklist Plugin

<nop>ChecklistPlugin creates simple checklists. 
It handles the tags %<nop>CLI% (<nop>CheckList Item), %<nop>CHECKLIST%, %<nop>CHECKLISTSTART%, %<nop>CHECKLISTEND%
and depends on the TWiki:Plugins.SmiliesPlugin (see [[#ChecklistPluginInfo][Plugin Info]]).

A %<nop>CLI% tag creates a image button and a simple click on it changes the state of the image button. 
The default states are 'todo' (represented by a :-I image button) and 'done' (represented by a :ok: image button).

If you put a bullet list or a ordered list between %<nop>CHECKLISTSTART% and %<nop>CHECKLISTEND% every bullet/ordered list item gets a checklist item.

Every state change will be saved to a topic with name <i>&lt;YourTopicName&gt;</i><nop>ChecklistItemState. It is possible to 
define states (default: todo and done) and matching icons. You can also put more than one checklist into a topic.


%TOC%

------
---++ Syntax Rules

Just type a %<nop>CLI% (<nop>CheckList Item) into a topic to create a single checklist item. A simple mouse click on it will change
the state of this item. If the last state is reached the item state falls back to the first state.

If you put a bullet or ordered list between %<nop>CHECKLISTSTART% and %<nop>CHECKLISTEND% every bullet/ordered list item gets a checklist item.

To modify the states or state icons you can set it with %<nop>CHECKLISTSTART% or %<nop>CHECKLIST% tag. This tags can also be used to create "reset" buttons and state legends.

All tags can be used with attributes documented in the [[#ChecklistAttributes][Attributes section]].

To create a link to the checklist item state topic you can put the following forced link on your checklist topic: <verbatim>[<nop>[%<nop>TOPIC%ChecklistItemState]]</verbatim>. 
If you have installed the TWiki:Plugins.SpreadSheetPlugin you can find a statistics on this item state topic. 
And if you have installed the TWiki:Plugins.EditTablePlugin you can edit the states directly on this topic.

---++ Usage Examples

To change the state of a checklist item just click on it.

<table>
<tr><td align="center"> *You type:* </td><td align="center"> *You get: (simulated)* </td></tr>
<tr><td colspan="2" bgcolor="#CCCCCC">
*Example 1: Create a simple checklist:*
	* "second step" icon was clicked one time
	* "last step" icon was clicked two times
</td></tr>
<tr>
<td bgcolor="#EEEEEE" valign="top">
<verbatim>
%CHECKLISTSTART%
	1 first step
	1 second step 
	1 last step 
%CHECKLISTEND%
</verbatim>
</td>
<td bgcolor="#EEEEEE" valign="top">
	1 first step :-I
	1 second step :ok:
	1 last step :-I
</td>
</tr>


<tr><td colspan="2" bgcolor="#CCCCCC">
*Example 2: Create a simple freehand checklist:*
	* "second step" icon was clicked one time
	* "last step" icon was clicked two times
</td></tr>
<tr>
<td bgcolor="#EEEEEE" valign="top">
<verbatim>
	1 first step %CLI% 
	1 second step %CLI% 
	1 last step %CLI% 
</verbatim>
</td>
<td bgcolor="#EEEEEE" valign="top">
	1 first step :-I
	1 second step :ok:
	1 last step :-I
</td>
</tr>
<tr><td colspan="2" bgcolor="#CCCCCC">
*Example 3: Create a checklist with three states and own icons:*
	* "second step" icon was clicked one time
	* and "third step" icon was clicked two times
</td></tr>
<tr>
<td bgcolor="#EEEEEE" valign="top">
<verbatim>
%CHECKLISTSTART{states="todo|doing|done" stateicons=":no:|:-I|8-)"}%

	1 first step 
	1 second step
	1 third step 
%CHECKLISTEND%
</verbatim>
</td>
<td bgcolor="#EEEEEE" valign="top">
	1 first step :no:
	1 second step :-I
	1 third step 8-)
</td>
</tr>
<tr><td colspan="2" bgcolor="#CCCCCC"> *Example 4: Create two checklists on a topic:*
<br/> (%X% every %<nop>CHECKLIST% and every %<nop>CLI% tag needs a name attribute)</td></tr>
<tr>
<td bgcolor="#EEEEEE" valign="top">
<verbatim>
%CHECKLISTSTART{name="first checklist"}%
	1 first step 
	1 second step
%CHECKLISTEND%

%CHECKLIST{name="second checklist"}%

	1 first step %CLI{name="second checklist"}% 
	1 next step %CLI{name="second checklist"}% 
</verbatim>
</td>
<td bgcolor="#EEEEEE" valign="top">

	1 first step :-I
	1 second step :-I

	1 first step :-I
	1 next step :-I
</td>
</tr>
<tr><td colspan="2" bgcolor="#CCCCCC"> *Example 5: Create a checklist in a table:* </td></tr>
<tr>
<td bgcolor="#EEEEEE" valign="top">
<verbatim>
| *state* | *todo* |
| %CLI%	| first step |
| %CLI%	| second step |
</verbatim>
</td>
<td bgcolor="#EEEEEE" valign="top">
| *state* | *todo* |
| :-I | first step |
| :-I | second step |
</td>
</tr>
<tr><td colspan="2" bgcolor="#CCCCCC"> *Example 6: Create a checklist without annoying line breaks if HTML forms are used:* </td></tr>
<tr>
<td bgcolor="#EEEEEE" valign="top">
<verbatim>
%CHECKLIST{useforms="yes"}%
	1 %CLI{text="my first step"}%
	1 %CLI{text="my second step"}%
</verbatim>
</td>
<td bgcolor="#EEEEEE" valign="top">
	1 my first step :-I
	1 my second step :-I 
</td>
</tr>
<tr><td colspan="2" bgcolor="#CCCCCC"> *Example 7: Create a legend and a reset button:* </td></tr>
<tr>
<td bgcolor="#EEEEEE" valign="top">
<verbatim>
%CHECKLISTSTART{showlegend="on" reset=":-I Reset"}%
	1 first step 
	1 next step
%CHECKLISTEND%

</verbatim>
</td>
<td bgcolor="#EEEEEE" valign="top">
	1 first step :-I
	1 next step :-I

( :-I - todo :ok: - done ) :-I Reset

</td>
</tr>
<tr><td colspan="2" bgcolor="#CCCCCC"> *Example 8: Create a button to set all states in a checklist to 'done'*
	* the reset button was clicked
</td></tr>
<tr>
<td bgcolor="#EEEEEE" valign="top">
<verbatim>
	1 first step %CLI% 
	1 next step %CLI% 

%CHECKLIST{reset=":ok: set all done @done"}%
</verbatim>
</td>
<td bgcolor="#EEEEEE" valign="top">
	1 first step :ok:
	1 next step :ok:

:ok: set all done

</td>
</tr>


</table>

#ChecklistAttributes
---++ Attributes
Usage: 
<br/> %<nop>CLI{attribute1="value1" attribute2="value2" ...}% 
<br/> or %<nop>CHECKLIST{attribute1="value1" attribute2="value2" ...}%
<br/> or %<nop>CHECKLISTSTART{attribute1="value1" attribute2="value2" ...}%

Examples:
<verbatim>
%CHECKLIST{showlegend="on" reset=":-I Reset checklist"}%
%CLI{id="i1"}%
</verbatim>

| *Attribute* | *Usable in Tag(s)* | *Comment* | *Example* |
| anchors | %<nop>CLI%<br/>%<nop>CHECKLIST%<br/>%<nop>CHECKLISTSTART% | enables/disables link anchors (default: enabled); if enabled a state change will scroll your topic to the clicked checklist item; useful for long checklists | anchors="yes" |
| clipos | %<nop>CLI%<br/>%<nop>CHECKLISTSTART% | determines the position of the checklist item icon (default: right); if you use another value than "left" the checklist item icon will be appended to a ordered or bullet list item | pos="left" |
| id  | %<nop>CLI% | unique id of a checklist item (default: autogenerated); useful and recommended if you insert new checklist items in an existing checklist with states | id="myfirstownid" |
| name | %<nop>CLI%<br/>%<nop>CHECKLIST%<br/>%<nop>CHECKLISTSTART% | a naming context (default: "_default") - useful and recommended if you define more than one checklist on a topic (%X% if you use it in %<nop>CHECKLIST% you must use it in all related %<nop>CLI% tags too) | name="mychecklist1" |
| pos | %<nop>CHECKLISTSTART% | defines the reset button and legend position (default: bottom); if you use another value than "top" the button position falls back to default | pos="bottom" |
| reset | %<nop>CHECKLIST%<br/>%<nop>CHECKLISTSTART% | it enables a reset image button with a given text or icon (default: undefined); if you put a @<i>&lt;state&gt;</i> into the reset value, you can reset a checklist to the given <i>&lt;state&gt;</i>, e.g: <verbatim>reset="@done :ok: set all done"</verbatim>| reset="Reset all" | 
| showlegend | %<nop>CHECKLIST%<br/>%<nop>CHECKLISTSTART% | if set to "on" a states legend with icons will be displayed (default: off),<br/> e.g: ( :-I - todo :ok: - done) | showlegend="off" |
| states | %<nop>CLI%<br/>%<nop>CHECKLIST%<br/>%<nop>CHECKLISTSTART% | all known states (default: "todo&brvbar;done"; a list separated by a '&brvbar;') | states="todo&brvbar;done" |
| stateicons | %<nop>CLI%<br/>%<nop>CHECKLIST%<br/>%<nop>CHECKLISTSTART% | icons for all states separated by a '&brvbar;' (default: ":-I&brvbar;:ok:); if you  use common variables like %<nop>Y% in stateicons you have to use the &lt;nop&gt; tag after the first %, e.g: <verbatim>%&lt;nop&gt;Y%</verbatim>  | stateicons=":-I&brvbar;:ok:" |
| text | %<nop>CLI% | allows to place text behind the button (default: ""); useful to avoid the annoying line break between checklist button and text if HTML forms are used (related: useforms attribute) | text="my first step" |
| useforms | %<nop>CLI%<br/>%<nop>CHECKLIST%<br/> %<nop>CHECKLISTSTART% | if enabled HTML forms are used instead of hyperlinks (default: disabled) | useforms="off" |

---++ Examples
Use this examples to check your installation:

	1 %CLI{text="first step"}%
	1 %CLI{text="next step"}%

	| *State* | *TODO* |
	| %CLI% | first step |
	| %CLI% | next step |

[[%TOPIC%ChecklistItemState]]
---++ Plugin Settings

Plugin settings are stored as preferences variables. To reference a plugin setting write ==%<nop>&lt;plugin&gt;_&lt;setting&gt;%==, i.e. ==%<nop>INTERWIKIPLUGIN_SHORTDESCRIPTION%==

	* One line description, is shown in the %TWIKIWEB%.TextFormattingRules topic:
		* Set SHORTDESCRIPTION = Create simple checklists.

	* Debug plugin: (See output in =data/debug.txt=)
		* Set DEBUG = 0

	* Setup states and icons (defaults: <verbatim>todo|done</verbatim> and <verbatim>:-I|:ok:</verbatim>; remove # for setup):
		* # Set STATES = todo|done
		* # Set STATEICONS = :-I|:ok:	  

	* Enables 'reset' button (default: disabled with undefined value; value is a text or icon):
		* # Set RESET = [Reset all]

	* Enables/Disables state legend (default: disabled)
		* # Set SHOWLEGEND = off

	* Enables/Disables link anchors (default: enabled)
		* # Set ANCHORS = on

	* Set unknown parameter message (default: <verbatim>%RED% Sorry, some parameters are unknown: %UNKNOWNPARAMSLIST% %ENDCOLOR% &lt;br/&gt; Allowed parameters are (see TWiki.ChecklistPlugin topic for more details): %KNOWNPARAMSLIST%</verbatim>)
		* # Set UNKNOWNPARAMSMSG = %RED% Following parameter(s) is/are unknown: %UNKNOWNPARAMSLIST% %ENDCOLOR%

	* Enables/Disables HTML form usage (default: disabled; old behavior: enabled)
		* # Set USEFORMS = off

---++ Plugin Installation Instructions

__Note:__ You do not need to install anything on the browser to use this plugin. The following instructions are for the administrator who installs the plugin on the server where TWiki is running. 

	* Download the ZIP file from the Plugin web (see below)
	* Unzip ==%TOPIC%.zip== in your twiki installation directory. Content:
	  | *File:* | *Description:* |
	  | ==data/TWiki/%TOPIC%.txt== | Plugin topic |
	  | ==lib/TWiki/Plugins/%TOPIC%.pm== | Plugin Perl module |
	* Linux/UNIX: Don't forget to change owner of data/TWiki/%TOPIC%.txt to your WWW server uid/gid (e.g: chown wwwrun:wwwrun ...).
	* Test if the installation was successful: see Examples section 

#ChecklistPluginInfo
---++ Plugin Info

|  Plugin Author: | TWiki:Main.DanielRohde |
|  Plugin Version: | 25 Nov 2005 (v1.009) |
|  Change History: | <!-- versions below in reverse order -->&nbsp; |
|  v1.009 (25 Nov 2005) | TWiki:Main.DanielRohde: fixed stateicons handling; fixed TWiki:Plugins/TablePlugin sorting problem |
|  v1.008 (9 Nov 2005) | TWiki:Main.DanielRohde: fixed docs; changed default text positioning (text attribute); allowed common variable usage in stateicons attribute; fixed multiple checklists bugs |
|  v1.007 (7 Nov 2005) | TWiki:Main.DanielRohde: added new feature (CHECKLISTSTART/END tags, attributes: clipos, pos); fixed bugs | 
|  v1.006 (4 Nov 2005) | TWiki:Main.DanielRohde: added new attribute (useforms); fixed legend bug; fixed HTML encoding bug |
|  v1.005 (2 Nov 2005) | TWiki:Main.DanielRohde: fixed major bug (edit lock); fixed html encoding; improved doc |
|  v1.004 (1 Nov 2005) | TWiki:Main.DanielRohde: added unknown parameter handling (new attribute: unknownparamsmsg); added 'set to a given state' feature; changed reset behavior; fixed typos |
|  v1.003 (1 Nov 2005) | TWiki:Main.DanielRohde: added attributes (showlegend, anchors); fixed states bug (illegal characters in states option); improved documentation (thanx TWiki:Main.PeterThoeny); fixed typos; fixed some minor bugs|
|  v1.002 (31 Oct 2005) | TWiki:Main.DanielRohde: fixed cache problems; fixed HTML/URL encoding bugs; fixed reload bug; fixed reset image button bug; added anchors|
|  v1.001 (27 Oct 2005) | TWiki:Main.DanielRohde: added new features ('reset','text' attributes); fixed major 'name' attribute bug; fixed documentation bugs | 
|  v1.000 (27 Oct 2005): | TWiki:Main.DanielRohde: Initial version |
|  TWiki Dependency: | $TWiki::Plugins::VERSION 1.024 |
|  CPAN Dependencies: | none |
|  Other Dependencies: | TWiki:Plugins.SmiliesPlugin |
|  Perl Version: | 5.005 |
|  License: | GPL ([[http://www.gnu.org/copyleft/gpl.html][GNU General Public License]]) |
|  TWiki:Plugins/Benchmark: | %TWIKIWEB%.GoodStyle 100%, %TWIKIWEB%.FormattedSearch 100%, %TOPIC% 98% |
|  Plugin Home: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC% |
|  Feedback: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC%Dev |
|  Appraisal: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC%Appraisal |

__Related Topics:__ %TWIKIWEB%.TWikiPreferences, %TWIKIWEB%.TWikiPlugins

-- TWiki:Main.DanielRohde - 27 Oct 2005

