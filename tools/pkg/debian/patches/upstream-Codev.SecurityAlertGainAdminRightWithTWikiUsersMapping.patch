--- lib/TWiki.cfg	2003-02-02 13:45:15.000000000 +1100
+++ lib/TWiki.cfg	2004-01-17 21:49:49.000000000 +1100
@@ -326,6 +326,8 @@
 #                   (e.g. 'fsmith') to Wiki name (e.g. 'FredSmith') :
 $userListFilename   = "$dataDir/$mainWebname/$wikiUsersTopicname.txt";
 #                   %HOMETOPIC% : Name of main topic in a web, default "WebHome" :
+#        Map login name to Wiki name, default "1", set to "0" for .htpasswd authenticated sites :
+$doMapUserToWikiName = "0";
 $mainTopicname      = "WebHome";
 #                   %NOTIFYTOPIC% : Name of topic for email notifications, default "WebNotify" :
 $notifyTopicname  = "WebNotify";
--- lib/TWiki.pm	2003-02-02 11:55:21.000000000 +1100
+++ lib/TWiki.pm	2004-01-17 22:12:30.000000000 +1100
@@ -57,7 +57,7 @@
         $siteWebTopicName $wikiToolName $securityFilter $uploadFilter
         $debugFilename $warningFilename $htpasswdFilename
         $logFilename $remoteUserFilename $wikiUsersTopicname
-        $userListFilename %userToWikiList %wikiToUserList
+        $userListFilename $doMapUserToWikiName %userToWikiList %wikiToUserList
         $twikiWebname $mainWebname $mainTopicname $notifyTopicname
         $wikiPrefsTopicname $webPrefsTopicname
         $statisticsTopicname $statsTopViews $statsTopContrib $doDebugStatistics
@@ -766,6 +766,12 @@
 # WikiName (e.g. JaneSmith)
 sub userToWikiListInit
 {
+    %userToWikiList = ();
+    %wikiToUserList = ();
+
+    # bail out in .htpasswd authenticated sites
+    return unless( $doMapUserToWikiName );
+
     my $text = &TWiki::Store::readFile( $userListFilename );
     my @list = split( /\n/, $text );
 
