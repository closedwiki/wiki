%META:TOPICINFO{author="MichaelDaum" date="1143130240" format="1.1" reprev="1.2" version="1.2"}%
<!--

   PLEASE DO NOT EDIT THIS TOPIC

   It is automatically generated from the subversion repository, and any changes
   you make will simply be overwritten the next time a release is generated.

   Instead, you could check your fix in, raise a bug in the Bugs web, or mail the author(s).
-->
---+!! The Natural Skin
%TOC%

---++ Description
NatSkin is a skin driven by cascading stylesheets which is shipped with 12
predefined styles and 10 style variations that can be applied to each. Most of
these are inspired by the
[[http://www.movabletype.org][MovableType]] and
[[http://wordpress.org][WordPress]] among others a port of the Kubrick style by
[[http://binarybonsai.com][Michael Heilemann]] and thus can provide a blog-like layout.
This includes a PatternSkin style that emulates the look&amp;feel of the PatternSkin
as it is known from the TWiki/Cairo release.

The layout of the NatSkin can be configured online using the NatSkinStyleBrowser
	* by selecting one of the predefined styles;
	* by selectiong one of the predefined variations;
	* the sidebar can be displayed left or right or both for a 3 columns layout;
	* the page border can be switched on, off or enable a thin blog-like layout;
	* there are so-called WebButtons displaying webs as tabs that can be switched on and off;
	* the position of the search box can be set to one of four predefined positions.

The screenshots below only display a limited set of all possible combinations.

This is a rework of the 
TWiki:Plugins/CopyCatSkin by TWiki:Main/MattWilkie. It is used at the 
[[http://nats-www.informatik.uni-hamburg.de/Main/WebHome][Natural Language Systems Division]] 
(NATS) of the University of Hamburg, Germany. 

---++ Features
	* Skin state: an internal representation of different ways to render the NatSkin concerning
		* the skin style,
		* style variants,
		* the sidebar location,
		* the page border decoration,
		* the web buttons in the topbar and
		* the positioning of the search box
	* skin style control: infrastructure to get, set and display the skin style that
	  is currently active using the NatSkinStyleBrowser
	* Conditional content: 
		* USERACTIONS, NATLOGON: display topic actions depending on the user being logged in or not
		* IFSKINSTATE: render skin differently depending on the current skin state
		* IFACCESS: render different content or include topics depending on access rights
	* [[TWikiWebSideBar][WebSideBar]]: a configurable navigation bar
	* MySideBar: every user can extend the sidebar with a personalized navigation
	* <nop>NatSearch: a search+go box that combines advanced search with the GO feature of twiki
	* Login page: independent implementation of a login page for
	  maximal compatibility with old TWiki releases; this is similar to the <nop>TemplateLogin
	  authentication mechanism in Dakar but only provides htpasswd based authentication
	* email address obfuscation: all email addresses in topic texts are obfuscated by the use
	  of dynamic html; so mailto links are still clickable while the pure html text does not
	  allow to extract the addresses by respective web crawlers.
	* marking external links: add a nice icon to offsite links

---++ <nop>NatSearch
<nop>NatSearch unifies the Seach and the Jump box known from the standard TWiki. You can 
use one input field to either jump to a topic or start a content query.

<nop>NatSearch is heavily inspired by the <nop>PhotonSearch of the TWiki:Plugins/PhotonSkin.

---+++ Usage
This basically works in three modes: 
	1 GO: go to the named topic
	2 topic search: search a topic whose name matches the search string
	3 content search: search a topic whose content matches the search string
<nop>NatSearch proceeds along the following lines:
	1 the search string starts with an uppercase letter: 
		1 try a GO
		2 fallback to a topic search when 1.1 fails
		3 fallback to content search when 1.2 fails
	2 the string starts with a /: %BR%
	  normal content search
	3 the string does not start with an upper case letter or /
		1 try a topic search
		2 fallback to content search

If only one topic was found then <nop>NatSearch jumps to that topic directly.

---+++ Options
The search string may be prepended with a set of options that are separated from the
rest of the search string with a colon(:). Known options are:
| *Option* | *Description* |
| g | global search (default is local) |
| l | local search |
| u | case-sensitive search (default is to ignore case) |

A search string may consist of a list of terms that are retrieved. If a term shall contain
spaces it can be surrounded by double quotes. Each term may be preceded with a minus (-) to
exclude this term from the hit set.

---+++ Examples
| *Search* | *Description* |
| <nop>TWikiUsers | if the current web is the %MAINWEB% go to the <nop>TWikiUsers  |
|                 | if the current web is the %TWIKIWEB% go to the <nop>TWikiUsersGuide |
| g:twikiusers | list all topics in all webs whose name match "twikiusers" |
| /<nop>TWikiUsers | list all topics that contain the word "<nop>TWikiUsers" |
| gu:copyright | list all topics that contain the word "copyright" in lowercase |
| g:copyright -webpref | list all topics that contain the word "copyright" but not "webpref" |
| g:"Good morning" -natskin | list all topics that contain the term "Good morning" but not "natskin" |


---+++ Customization
<nop>NatSearch can be restricted to certain webs and topics by setting WebPreferences.
Besides the NOSEARCHALL feature of every web that excludes a web from search the following variables
 restrict the hit set:

| *Name* | *Description* |
| =NATSEARCHINCLUDEWEB= | a regular expression that must match webs to be considered |
| =NATSEARCHEXCLUDEWEB= | a regular expression that must not match a web |
| =NATSEARCHINCLUDETOPIC= | a regular expression that must match a topic in the hit set |
| =NATSEARCHEXCLUDETOPIC= | a regular expression that excludes a topic from the hit set |

Furthermore, the WebPreferences variable =NATSEARCHTEMPLATE= can be set to a template topic that
is used instead of the skin's =search= template. This can be used in <nop>TWikiApplications to
define a customized look of search results.

---++ Special topic variables
There is a set of variables that can be used in a topic to influence the NatSkin.

| *Name* | *Description* |
| =PAGETITLE= | the &lt;title>...</title> of the html page; if no PAGETITLE is defined the NatSkin \
                will check for some formfields (Headlines, <nop>TopicDescription) to be used as a html page title \
		and back off to the topic name |
| =KEYWORDS= | the value of this variable will be used to construct &lt;meta name="keywords" ... /> in the html head; \
                in addition <nop>SubjectCategory, <nop>BlogTag and <nop>Tags formfields will be used \
		to generate keywords |
| =WHITEBOARD= | possible values: on, off; if WHITEBOARD is set to only the topic form will be edited \
                when clicking on "Edit"; note, that the textarea is still accessible and not hidden completely; \
		this is flag is only there for convenience |

---++ More Documentation

	* NatSkinTemplates
	* NatSkinCss

---++ Installation
	* Get the TWiki:Plugins/NatSkinPlugin supplementary package and install it.
	* If you are installing on TWiki/Cairo then consider applying this patch:
          [[%ATTACHURL%/Cairo_UI_pm.diff][Cairo_UI_pm.diff]]
	* Download the ZIP file from the Skin Home page (see below)
	* Unzip ==%TOPIC%.zip== in your twiki installation directory
	* Test if installed: [[%SCRIPTURL%/view%SCRIPTSUFFIX%/%WEB%/%TOPIC%?skin=nat&style=Kubrick][click here]]

---++ Skin Info
<style type="text/css">
.screenshotter {
  height:130px;
  overflow:hidden;
  position:relative;
}
.screenshotter img {
  width:600px;
  position:absolute;
}
</style>

|  Skin Author: | TWiki:Main/MichaelDaum |
|  Copyright &copy;: | 2003-2006, MichaelDaum@WikiRing.com |
|  License: | GPL ([[http://www.gnu.org/copyleft/gpl.html][GNU General Public License]]) |
|  Skin Version: | v2.9993 |
|  Dependencies: | TWiki:Plugins/NatSkinPlugin |
|  Description: | Driven by cascading stylesheets, Comes with 12 alternative styles, <nop>MoveableType and Wordpress Look-n-Feel |
|  Base Name: | nat |
|  Screenshot: | <div class="screenshotter" style="height:130px;overflow:hidden"><a href="%ATTACHURL%/Clean.jpeg"><img src="%ATTACHURL%/Clean.jpeg" title="Clean"/></a></div> |
|  More Screenshots: | \
<div class="screenshotter"><a href="%ATTACHURL%/GeorgiaBlue.jpeg"><img src="%ATTACHURL%/GeorgiaBlue.jpeg" title="GeorgiaBlue"/></a></div>\
  <div class="screenshotter"><a href="%ATTACHURL%/Gettysburg.jpeg"><img src="%ATTACHURL%/Gettysburg.jpeg" title="Gettysburg" /></a></div>\
	<div class="screenshotter"><a href="%ATTACHURL%/IndependenceThin.jpeg"><img src="%ATTACHURL%/IndependenceThin.jpeg" title="IndependenceThin" /></a></div>\
	<div class="screenshotter"><a href="%ATTACHURL%/Kubrick.jpeg"><img src="%ATTACHURL%/Kubrick.jpeg" title="Kubrick" /></a></div> \
	<div class="screenshotter"><a href="%ATTACHURL%/PlainJane.jpeg"><img src="%ATTACHURL%/PlainJane.jpeg" title="PlainJane" /></a></div>\
	<div class="screenshotter"><a href="%ATTACHURL%/SeaGreenThin.jpeg"><img src="%ATTACHURL%/SeaGreenThin.jpeg" title="SeaGreenThin" /></a></div>\
	<div class="screenshotter"><a href="%ATTACHURL%/Rusty.jpeg"><img src="%ATTACHURL%/Rusty.jpeg" title="Rusty" /></a></div>\
	<div class="screenshotter"><a href="%ATTACHURL%/SquashThin.jpeg"><img src="%ATTACHURL%/SquashThin.jpeg" title="SquashThin" /></a></div>\
	<div class="screenshotter"><a href="%ATTACHURL%/StormyThin.jpeg"><img src="%ATTACHURL%/StormyThin.jpeg" title="StormyThin" /></a></div> \
|
|  Change History: | <!-- specify latest version first -->&nbsp; |
|  2006-05-05: | minor css cleanup;\
                 display default <nop>WebLinks and <nop>WebButton for a current non-public web |
|  2006-04-19: | added support for KEYWORDS per topic | 
|  2006-04-11: | fixed oops dialogue leaping off the page; \
                 be nicer to non-css browers |
|  2006-04-05: | added support for dakar's <nop>TemplateLogin; \
                 preventing an empty line in <nop>WebButtons in case there are no public webs; \
		 added <nop>WebComponent <nop>WebTopicActions; \
		 simplified topicactions templates; \
		 simplified <nop>TemplateLogin templates to match natlogon |
|  2006-03-27: | moved <nop>MySideBar templates from plugin into the skin; \
                 fixed page layout of Kubrick style using borders for geckos; \
		 added HTTPSLOGON variable to get around install hassle on non-ssl servers; \
                 enabled edit and preview upper right topic actions again; \
		 added support for three-column layout using STYLESIDEBAR = both; \
		 fixed html error in topbar |
|  2006-03-20: | several blog css fixes; \
                 added bottom topic actions to edit and preview; \
		 only display web.topic in the web locator no recursive parents anymore; \
		 natsearch docu |
|  2006-03-13: | fixed <nop>WebLinks components; \
                 fixed atom feed link at the page bottom |
|  2006-03-11: | reworked sidebar using the new WEBCOMPONET logic; \
                 docu restructuring - more needed; \
		 using messages.tmpl as far as possible |
|  2006-03-01: | fixed <nop>TWikiForm not showing certain row values (uuh); \
                 added more css for the most recent stuff added to the <nop>BlogPlugin; \
		 removed html from mailnotification; \
		 replaced SCRIPTURL{} with SCRIPTURL+SCRIPTSUFFIX again for legacy platforms; \
		 minor css fixes |
|  2006-02-20: | removed empty lines in templates; \
                 css fixes for lists in the sidebar; \
		 unified font size in attachment tables; \
		 using percentage instead of em size for the thin page layout |
|  2006-02-14: | added variable %<nop>WEBSYNDICATION%; \
                 removed <nop>TablePlugin patch; \
		 made <nop>BaseStyle usable; \
		 added syndiation feeds; \
		 don't use dotted lines on IE; \
		 don't use transparent borders on IE; \
		 added gif version for cite background for IE; \
		 fixed content area of <nop>PatterStyle on IE; \
		 don't use Lucida Grande in <nop>KubrickStyle; \
		 added rss feed icons; \
		 added plain view template |
|  2006-02-03: | compute even/odd search hits for WebSearch using CALC so \
                 that css-2.1 expressions aren't needed anymore; \
                 lots of css font and size fixes, i.e. blog related |
|  2006-01-27: | fixed blog css for all styles |
|  2006-01-26: | lots of css fixes |
|  2006-01-23: | added forgotten IE decorations; \
                 fixed layout problems in the WebButtons; \
		 replaced ICONPATH with ICONURL; \
		 added email_changed oopsattention message |
|  2006-01-09: | more IE fixes; \
                 fixed search template: every hit must be a table of its own :(; \
		 fontsize fixes |
|  2005-12-20: | fixed collapsing tables in firefox &lt; 1.5 |
|  2005-12-05: | componentized template system adding javascript and styles components; \
		 removed inline-styles and -javascript and moved it to the respective components \
		 being inserted into the html header properly now; \
                 surpressing final skin state switches in the NatSkinStyleBrowser; \
		 removed absolute urls; removed EDITURL; \
		 fixed sidebar help for cairo and beijing; \
		 fixed squeezed main page; \
		 added the concept of <nop>WebComponents, that is the <nop>WebSideBar and the WebButtons; \
		 the <nop>WebButtons are customizable the way the <nop>WebSideBar already is |
|  2005-12-01: | added transparent borders and corners to the Kubrick style; \
                 improved <nop>PlasticLoveVariation; \
		 added a custom "cite" style inside blog texts; \
		 some minor IE fixes; \
		 w3c validation fixes to the style browser; \
		 more form fixes in the preview and editform pages; \
		 replaced every launchWindow() javascript with a proper a href using \
		 a _blank target;\
		 added tooltips to topicactions |
|  2005-11-23: | added nops in expensive IFSKINSTATETHEN, \
                 i.e. to prevent the sidebar to be computed multiple times |
|  2005-11-22: | moved basic blogging css to the <nop>BlogPlugin |
|  2005-11-16: | added <nop>PatternStyle emulating cairo's <nop>PatternSkin |
|  2005-11-10: | improved NatSkinStyleBrowser |
|  2005-11-08: | firefox layout fixes |
|  2005-11-07: | more safari fixes |
|  2005-11-02: | fixed javascript problems combined with the TWiki:Plugins.TwistyPlugin; \
                 trigger printing when clicking on "Print" |
|  2005-10-31: | safari fixes where content leaps out of the main area |
|  2005-10-24: | added <nop>UserView templates; standardised favicon handling |
|  2005-10-18: | workaround crash due to recursive accessdenied-exceptions |
|  2005-10-13: | preliminary css support for header art; added some default headers |
|  2005-10-10: | added skin style cycling to the NatSkinStyleBrowser; \
		 fixed way how the oops dialogues switch off the sidebar |
|  2005-10-09: | new release NatSkin-2.51: \
                 reinvention of the NatSkinStyleBrowser; \
		 reworked the standard <nop>WebSideBar; \
                 extensive usage of the new conditional content tags \
                 interfacing the skin state machine, i.e. switch the \
                 sidebar from the left to the right etc.; \
                 removed hard-coded links to a _Support_ web; \
                 lots of fixes to catch up with the evolving dakar engine; \
                 support for the TWiki:Plugins.TwistyPlugin; \
                 support for the TWiki:Plugins.AliasPlugin; \
                 skin state support for the TWiki:Plugins.TablePlugin; \
                 new webbuttons in the topbar; \
                 componentized style sheets for different skin states; \
                 improved css of forms and tables; \
                 better support for the upcomming <nop>BlogPlugin in every skin style; \
                 plus the usual small css fixes |
|  2005-08-30: | lots of css fixes for IE and Opera; \
                 fixed topicactions for IE; \
                 different cancel actions per engine |
|  2005-08-26: | final NatSkin-2.0 |
|  2005-07-12: | first round of pre-releases numbered 1.91 upwards |
|  2005-06-24: | rewritten the templates, renamed the CSS classes |
|  2003-07-25: | Initial version |
|  Skin Home: | TWiki:Plugins/NatSkin |
|  Feedback: | TWiki:Plugins/NatSkinDev |
|  Appraisal: | TWiki:Plugins/NatSkinAppraisal |

__Note:__ The Description, Screenshot and Base Name rows are needed by the TWiki:TWiki/TWikiSkinBrowser

__Related topic:__ TWiki:TWiki/TWikiSkins, TWiki:TWiki/TWikiSkinBrowser, TWiki:Plugins/NatSkinDev, NatSkinPlugin

-- TWiki:Main/MichaelDaum - 05 Mai 2006


%META:FILEATTACHMENT{name="favicon.ico" attr="" comment="" date="1113468984" path="favicon.ico" size="4710" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="previewbg.png" attr="" comment="" date="1114174051" path="previewbg.png" size="19334" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="Cairo_UI_pm.diff" attr="" comment="" date="1120239647" path="Cairo_UI_pm.diff" size="413" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="Independence.jpeg" attr="h" comment="" date="1124706583" path="Independence.jpeg" size="53113" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="Squash.jpeg" attr="h" comment="" date="1124706784" path="Squash.jpeg" size="50940" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="Kubrick.jpeg" attr="h" comment="" date="1124706654" path="Kubrick.jpeg" size="35719" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="external.png" attachment="external.png" attr="h" comment="" date="1123862151" path="external.png" size="165" tmpFilename="/var/tmp/CGItemp25437" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="Clean.jpeg" attr="h" comment="" date="1124706451" path="Clean.jpeg" size="56887" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="CleanThin.jpeg" attr="h" comment="" date="1124706478" path="CleanThin.jpeg" size="51905" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="GeorgiaBlue.jpeg" attr="h" comment="" date="1124706508" path="GeorgiaBlue.jpeg" size="53646" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="GeorgiaBlueThin.jpeg" attr="h" comment="" date="1124706527" path="GeorgiaBlueThin.jpeg" size="49838" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="Gettysburg.jpeg" attr="h" comment="" date="1124706558" path="Gettysburg.jpeg" size="55745" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="GettysburgThin.jpeg" attr="h" comment="" date="1124706570" path="GettysburgThin.jpeg" size="52234" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="IndependenceThin.jpeg" attr="h" comment="" date="1124706638" path="IndependenceThin.jpeg" size="50108" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="PlainJane.jpeg" attr="h" comment="" date="1124706668" path="PlainJane.jpeg" size="50928" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="PlainJaneThin.jpeg" attr="h" comment="" date="1124706685" path="PlainJaneThin.jpeg" size="44181" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="Rusty.jpeg" attr="h" comment="" date="1124706699" path="Rusty.jpeg" size="56897" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="RustyThin.jpeg" attr="h" comment="" date="1124706717" path="RustyThin.jpeg" size="50184" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="SeaGreen.jpeg" attr="h" comment="" date="1124706729" path="SeaGreen.jpeg" size="56265" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="SeaGreenThin.jpeg" attr="h" comment="" date="1124706749" path="SeaGreenThin.jpeg" size="52702" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="SquashThin.jpeg" attr="h" comment="" date="1124706795" path="SquashThin.jpeg" size="49337" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="Stormy.jpeg" attr="h" comment="" date="1124706818" path="Stormy.jpeg" size="52029" user="TWikiContributor" version="1.1"}%
%META:FILEATTACHMENT{name="StormyThin.jpeg" attr="h" comment="" date="1124706827" path="StormyThin.jpeg" size="51154" user="TWikiContributor" version="1.1"}%
