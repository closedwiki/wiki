head	1.4;
access;
symbols;
locks; strict;
comment	@# @;


1.4
date	2007.02.23.23.21.01;	author LynnwoodBrown;	state Exp;
branches;
next	1.3;

1.3
date	2007.02.20.04.38.42;	author LynnwoodBrown;	state Exp;
branches;
next	1.2;

1.2
date	2007.02.20.00.10.23;	author LynnwoodBrown;	state Exp;
branches;
next	1.1;

1.1
date	2007.02.19.21.59.52;	author LynnwoodBrown;	state Exp;
branches;
next	;


desc
@none
@


1.4
log
@none
@
text
@%META:TOPICINFO{author="LynnwoodBrown" date="1172272861" format="1.1" reprev="1.4" version="1.4"}%
%META:TOPICPARENT{name="TopicFunction"}%
---+!! Function: %TOPIC%
%FORMFIELD{"Summary"}%

%TOC{depth="2"}%

---++ Documentation
%STARTSECTION{name="documentation" type="section"}%
%TOPIC% is used to automatically generate the search string, including all user-selected options from RenderBarFilterWithSort.

---+++++ Parameters
   * FORSEARCH - Specifies search string is to be formatted for ==%<nop>SEARCH{}%== rather than the default ==%<nop>DBQUERY{}%== format.
   * BASESEARCH - %RED%Required%ENDCOLOR% - Provides the base search, such as ==[T]opicType.*value\=.*%<nop>BASETOPIC%== (for SEARCH) or ==TopicType = '%<nop>BASETOPIC%'"== for DBQUERY
   * FACETS - %RED%Required%ENDCOLOR% Specify what "facets" in include as filters. Defaults to the contents of "Facets" field in base topic.
   * INITSORT -%RED%Required%ENDCOLOR%  Initial sort. set to either "created" or "modified"
   * INITLIMIT - %RED%Required%ENDCOLOR%  Initial results # limit. Set to 10, 20, 50, 100, or all.
   * Note: if you are using this in conjunction with RenderSearchString, you can simplify things by defining FACETS, INITSORT, and INITLIMIT within the base topic.


---+++++ Css
   * 
%ENDSECTION{name="documentation" type="section"}%

---++ Implementation
<verbatim>
%STARTINCLUDE%%IFDEFINEDTHEN{"%FORSEARCH%" glue="off"}%
~~~  search="
*~~    %BASESEARCH%;
*~~   
%~~    FORMATLIST{"%FACETS%" separator=";" 
~~~          format="$percntIF{ \"$'URLPARAM{$1}'!=''\" then=\"$1.*value\=.*$percntURLPARAM{$1}$percnt\" }$percnt"
~~~    }%" 
~~~   %ELSEDEFINED%
~~~   "%BASESEARCH% 
*~~   
%~~    FORMATLIST{"%FACETS%" separator=" " 
~~~          format="$percntIF{ \"$'URLPARAM{$1}'!=''\" then=\"AND $1 = '$percntURLPARAM{$1}$percnt'\" }$percnt"
~~~    }%" 
~~~   %FIDEFINED%
~~~    order="%URLPARAM{"sort" default="%INITSORT%"}%"  
~~~    limit="%URLPARAM{"limit" default="%INITLIMIT%"}%" 
~~~    reverse="on"
~~~    %STOPINCLUDE%
</verbatim>

<!-- interrupt glue -->

---++ Test
<div class="alt">
%DBCALL{"%TOPIC%" BASESEARCH="[T]opicType.*value\=.*%BASETOPIC%" FACETS="SubjectArea, TopicType"}%
</div>

%DBCALL{"RenderFunctionCallers"}%

---++ Copyright
<div style="text-align:justify;margin:1em;">
(C) 2006 LynnwoodBrown@@Skyloom.com

%DBCALL{"GnuGeneralPublicLicense" section="notice"}%
</div>


<!--
   * Set SIDEBAR = TopicType
   * Set SIDEBARARG = TopicFunction
-->


%META:FORM{name="TopicForm"}%
%META:FIELD{name="TopicType" attributes="" title="TopicType" value="TopicFunction"}%
%META:FIELD{name="SubjectArea" attributes="" title="SubjectArea" value=""}%
%META:FIELD{name="Summary" attributes="" title="Summary" value="Generates a properly formatted searchstring for either SEARCH or DBQUERY"}%
%META:REVCOMMENT{ncomments="0"}%
@


1.3
log
@none
@
text
@d1 1
a1 1
%META:TOPICINFO{author="LynnwoodBrown" date="1171946322" format="1.1" reprev="1.3" version="1.3"}%
d15 4
d41 2
a42 2
~~~    order="%URLPARAM{"sort" default="created"}%"  
~~~    limit="%URLPARAM{"limit" default="20"}%" 
@


1.2
log
@none
@
text
@d1 1
a1 1
%META:TOPICINFO{author="LynnwoodBrown" date="1171930223" format="1.1" reprev="1.2" version="1.2"}%
d13 1
a13 1
   * FORSEARCH - Specifies search string is to be formatted for ==%<nop>SEARCH{}%== rather than the default %<nop>DBQUERY{}%== format.
d25 1
a25 1
*~~        %BASESEARCH%
@


1.1
log
@none
@
text
@d1 1
a1 1
%META:TOPICINFO{author="LynnwoodBrown" date="1171922392" format="1.1" reprev="1.1" version="1.1"}%
d10 1
a10 1
%RED%TODO%ENDCOLOR%
d13 3
a15 1
   * 
d23 1
a23 1
%STARTINCLUDE%%IFDEFINEDTHEN{"%SEARCH%" glue="off"}%
d27 1
a27 1
%~~       FORMATLIST{"%FACETS%" separator=";" 
d31 5
@
