%META:TOPICINFO{author="LingLo" date="1059177060" format="1.0" version="1.10"}%
---+ <nop>%TOPIC%

This plugin allows you to have code fragments automatically formatted and highlighted.  It depends on the [[http://www.beautifier.org/][Beautifier library]] written by Mike Jewell.

---++ Syntax Rules

	* Just paste the code between %<nop>CODE{"syntax"}% and %ENDCODE%.  The following indicates the syntax used for the different languages:

<blockquote>
| *Language* | *Syntax* |
| bash | =%<nop>CODE{"bash"}%= ... =%ENDCODE%= |
| C++ | =%<nop>CODE{"cpp"}%= ... =%ENDCODE%= |
| C# | =%<nop>CODE{"csharp"}%= ... =%ENDCODE%= |
| Java | =%<nop>CODE{"java"}%= ... =%ENDCODE%= |
| Lua | =%<nop>CODE{"lua"}%= ... =%ENDCODE%= |
| Makefile | =%<nop>CODE{"makefile"}%= ... =%ENDCODE%= |
| Perl | =%<nop>CODE{"perl"}%= ... =%ENDCODE%= |
| PL/SQL | =%<nop>CODE{"plsql"}%= ... =%ENDCODE%= |
| Python | =%<nop>CODE{"python"}%= ... =%ENDCODE%= |
| PHP3 | =%<nop>CODE{"php3"}%= ... =%ENDCODE%= |
| Scheme | =%<nop>CODE{"scheme"}%= ... =%ENDCODE%= |
| TCL | =%<nop>CODE{"tcl"}%= ... =%ENDCODE%= |
| HTML | =%<nop>CODE{"html"}= ... %ENDCODE%= |
| XML | =%<nop>CODE{"xml"}%= ... =%ENDCODE%= |
| Verilog | =%<nop>CODE{"verilog"}%= ... =%ENDCODE%= |
| VHDL | =%<nop>CODE{"vhdl"}%= ... =%ENDCODE%= |
</blockquote>

Additional languages can be added since the Beautifier library is flexible and can support a wide range of language families.  Other languages can be added with relative easy by downloading the full PHP dist from http://www.beautifier.org and converting the relevant language file from PHP to Perl.

---++ Examples

<blockquote>
<pre>
%<nop>CODE{"cpp"}%
	void foo() {
	  print("Do stuff.\n");
	}
%ENDCODE%
</pre>
</blockquote> 

---++ <nop>%TOPIC% Global Settings

Plugin settings are stored as preferences variables. To reference a plugin setting write ==%<nop>&lt;plugin&gt;_&lt;setting&gt;%==, i.e. ==%<nop>INTERWIKIPLUGIN_SHORTDESCRIPTION%==

	* One line description, is shown in the %TWIKIWEB%.TextFormattingRules topic:
		* Set SHORTDESCRIPTION = Highlights and formats code fragments.

---++ Plugin Installation Instructions

__Note:__ You do not need to install anything on the browser to use this plugin. The following instructions are for the administrator who installs the plugin on the server where TWiki is running. 

	* Download the ZIP file from the Plugin web (see below)
	* Unzip ==%TOPIC%.zip== in your twiki installation directory, this will also install the Beautifier library by default. Content:
	  | *File:* | *Description:* |
	  | ==data/TWiki/%TOPIC%.txt== | Plugin topic |
	  | ==data/TWiki/%TOPIC%.txt,v== | Plugin topic repository |
	  | ==lib/TWiki/Plugins/%TOPIC%.pm== | Plugin Perl module |
	* (Dakar) Visit =configure= in your TWiki installation, and enable the plugin in the {Plugins} section.
	* To install the Beautifier library, either install it in the Perl library folder or unpack it into the twiki directory.  For the latter, the following files are installed:
	  | *File:* | *Description:* |
%$MANIFEST%

	* To get the doxygen-ish box around the code fragment, the following is needed in the skin's stylesheet:

<blockquote>
<pre>
div.fragment{
		  background : #FFFFCC;
		  border : 1px solid #CCCCCC;
		  margin-left : 2em;
		  margin-right : 2em;
		  padding : 4px;
}
</pre>
</blockquote>
	* Test if the installation was successful:

%CODE{"cpp"}%
#include <nworld.h>

/**
	 @brief Advance the simulation by one timeslice.
*/
void nWorld::StepSim()
{
	 // Iterate simulation loop
	 for (node = entityList.GetHead(); node != NULL; node = node->GetSucc())
	 {
		  entity = (nEntity*)node->GetPtr();
		  entity->Trigger(this, this->stepSize);
	 }
}
%ENDCODE%


---++ Bugs

	* Why doesn't it highlight Tcl keywords with 3 spaces in front? See Nebula.AudioExample, the first code snippet has 4 space indents the rest have 3.  <br />
	-- TWiki:Main/LeafGarland 31 Jul 2002

---++ History

| *Date* | *Change* | *Name* |
|  1 Jan 2006 | upgraded to TWiki::Func::extractNameValuePair for better parameter parsing, upgraded TWiki:Plugins.BuildContrib support | TWiki:Main.WillNorris |
| 26 Jul 2003 | Syntax fixes from TWiki:Main/WillNorris  | TWiki:Main/LingLo |
| 10 Feb 2003 | Syntax fix from TWiki:Main/JoshMore  | TWiki:Main/LingLo |
| 28 Dec 2002 | Accepts mixed case language names | TWiki:Main/LingLo |
| 20 Dec 2002 | Changed syntax to allow for simpler addition of new languages | TWiki:Main/LingLo |
| 16 Oct 2002 | Added nebula nodes and links to Python scripts, but it doesn't work since the node names are usually in strings | TWiki:Main/LeafGarland |
| 30 Jul 2002 | Added nebula nodes and links to Tcl scripts | TWiki:Main/LeafGarland |
| 30 Jul 2002 | Changed Beautifier::Core to use 'linkscripts' | TWiki:Main/LeafGarland |
| 28 Jul 2002 | Created | TWiki:Main/LingLo |

---++ Plugin Info

|  Plugin Author: | TWiki:Main/LingLo |
|  Plugin Version: | 26 Jul 2003 (V1.14) |
|  CPAN Dependencies: | none |
|  Other Dependencies: | [[http://www.beautifier.org][Beautifier]] (supplied) |
|  Perl Version: | 5.005 |
|  Plugin Home: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC% |
|  Feedback: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC%Dev |

__Related Topics:__ %TWIKIWEB%.TWikiPreferences, %TWIKIWEB%.TWikiPlugins

-- TWiki:Main.LingLo - 18 Dec 2002


