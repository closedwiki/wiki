%META:TOPICINFO{author="MichaelDaum" date="1130850299" format="1.1" version="1.2"}%
---+!! %TOPIC%

%TOC%

---++ Summary

Convenience plugin for TWiki:Plugins.TwistyContrib.

It has two major features:
	* When active, the Twisty javascript library is included in every topic. _Note: TWiki:TWiki.PatternSkin also includes this javascript library._
	* Provides a convenience syntax to define Twisty areas.

Check TWiki:Plugins.TwistyContrib for more information on the use of Twisty sections.

---++ Syntax Rules

#VarTWISTYSHOW
---+++ TWISTYSHOW
*Show/open link*
	* Syntax: =%<nop>TWISTYSHOW{id="myid" ... }%=
	* Supported parameters:
    | *Parameter* | *Description* | *Value* |
    | =id= | Unique identifier. Used to link [[#VarTWISTYSHOW][TWISTYSHOW]], [[#VarTWISTYHIDE ][TWISTYHIDE ]] and [[#VarTWISTYTOGGLE][TWISTYTOGGLE]] | required  |
    | =link="Link Text"= | The text to be used in the Twisty Show link  | optional |
    | =mode="div/span"= | Specify if the Twisty Show link will use a =&lt;div&gt;= or a =&lt;span&gt;= tag  | optional, defaults to =&lt;span&gt;= |
    | =img="image url"= | Specify the url of an image that will be displayed at the right side of the link. <br />You may use [[%TWIKIWEB%.TWikiVariables#VarICONPATH][ICONPATH]] to display one of the %TWIKIWEB%.TWikiDocGraphics icons. Alternatively use an image attached to the topic. | optional, defaults to no image |
    | =imgleft="image url"= | Specify the url of an image that will be displayed at the left side of the link. <br />You may use [[%TWIKIWEB%.TWikiVariables#VarICONPATH][ICONPATH]] to display one of the %TWIKIWEB%.TWikiDocGraphics icons. Alternatively use an image attached to the topic. | optional, defaults to no image |
    | =imgright="image url"= | Specify the url of an image that will be displayed at the right side of the link. <br />You may use [[%TWIKIWEB%.TWikiVariables#VarICONPATH][ICONPATH]] to display one of the %TWIKIWEB%.TWikiDocGraphics icons. Alternatively use an image attached to the topic. | optional, defaults to no image |
	* Example: =%<nop>TWISTYSHOW{id="demo" link=" Click to Unfold " imgleft="%<nop>ICONPATH{toggleopen}%"}%= expands to: <br /> 
	=&lt;span id="demoshow" class="twistyMakeVisible"&gt;&lt;a href="#" class="twistyTrigger"&gt;&lt;img src="http://visiblearea.com/devtwiki/pub/TWiki/TWikiDocGraphics/toggleopen.gif" alt="" /&gt;&lt;span class="twikiLinkLabel"&gt; Click to Unfold &lt;/span&gt;&lt;/a&gt;&lt;/span&gt;=
	* Related: [[#VarTWISTYHIDE][TWISTYHIDE]] and [[#VarTWISTYTOGGLE][TWISTYTOGGLE]]

#VarTWISTYHIDE
---+++ TWISTYHIDE
*Hide/close link*
	* Syntax: =%<nop>TWISTYHIDE{id="myid" ... }%=
	* Supported parameters:
    | *Parameter* | *Description* | *Value* |
    | =id= | Unique identifier. Used to link [[#VarTWISTYSHOW][TWISTYSHOW]], [[#VarTWISTYHIDE ][TWISTYHIDE ]] and [[#VarTWISTYTOGGLE][TWISTYTOGGLE]] | required  |
    | =link="Link Text"= | The text to be used in the Twisty Hide link  | optional |
    | =mode="div/span"= | Specify if the Twisty Hide link will use a =&lt;div&gt;= or a =&lt;span&gt;= tag  | optional, defaults to =&lt;span&gt;= |
    | =img="image url"= | Specify the url of an image that will be displayed at the right side of the link. <br />You may use [[%TWIKIWEB%.TWikiVariables#VarICONPATH][ICONPATH]] to display one of the %TWIKIWEB%.TWikiDocGraphics icons. Alternatively use an image attached to the topic. | optional, defaults to no image |
	* Example: =%<nop>TWISTYHIDE{id="demo" link=" Click to Fold " imgleft="%<nop>ICONPATH{toggleclose}%"}%= expands to: <br /> 
	=&lt;span id="demohide" class="twistyHidden twistyMakeVisible"&gt;&lt;a href="#" class="twistyTrigger"&gt;&lt;img src="http://visiblearea.com/devtwiki/pub/TWiki/TWikiDocGraphics/toggleclose.gif" alt="" /&gt;&lt;span class="twikiLinkLabel"&gt; Click to Fold &lt;/span&gt;&lt;/a&gt;&lt;/span&gt;=
	* Related: [[#VarTWISTYSHOW][TWISTYSHOW]] and [[#VarTWISTYTOGGLE][TWISTYTOGGLE]]

#VarTWISTYTOGGLE
---+++ TWISTYTOGGLE
*Twisty Toggle contents section*
	* Syntax: =%<nop>TWISTYTOGGLE{id="myid"}%=
	* Supported parameters:
    | *Parameter* | *Description* | *Value* |
    | =id= | Unique identifier. Used to link [[#VarTWISTYSHOW][TWISTYSHOW]], [[#VarTWISTYHIDE ][TWISTYHIDE ]] and [[#VarTWISTYTOGGLE][TWISTYTOGGLE]].  | required  |
    | =mode="div/span"= | Specify if the Twisty Toggle section will use a =&lt;div&gt;= or a =&lt;span&gt;= tag.  | optional, defaults to =&lt;span&gt;= |
    | =remember="on"= | When the Twisty is clicked its state is remembered the next time the page is shown.<br /> *Note:* when used, think carefully about a unique name (id) for the Twisty, otherwise the cookie that is set might affect other Twisties with the same name. | optional, defaults to forget |
	* Example: =%<nop>TWISTYTOGGLE{id="demo" mode="div" remember="on"}%= expands to: <br /> 
	=&lt;div id="demotoggle" class="twistyMakeHidden twistyRememberState"&gt;=
	* Related: [[#VarTWISTYHIDE][TWISTYHIDE]], [[#VarTWISTYHIDE][TWISTYHIDE]] an [[#VarENDTWISTYTOGGLE][ENDTWISTYTOGGLE]]

#VarENDTWISTYTOGGLE
---+++ ENDTWISTYTOGGLE
*The Twisty closure*
	* Syntax: =%<nop>ENDTWISTYTOGGLE%=
		* Will end the most inner unclosed Twisty Toggle section, using the proper tag
	* Example: =%<nop>ENDTWISTYTOGGLE%= expands to: =&lt;/div&gt;= if =mode="div"= was used in the last [[#VarTWISTYTOGGLE][TWISTYTOGGLE]],
	* Related: [[#VarTWISTYTOGGLE][TWISTYTOGGLE]]

#VarTWISTYBUTTON
---+++ TWISTYBUTTON
*Shorthand version for TWISTYSHOW &amp; TWISTYHIDE*
This is usefull if both the show and the hide button take the same arguments. 
	* Syntax: =%<nop>TWISTYBUTTON{id="myid" ... }%=
	* Supported parameters:
    | *Parameter* | *Description* | *Value* |
    | =id= | Unique identifier. Used to link [[#VarTWISTYBUTTON][TWISTYBUTTON]] and [[#VarTWISTYTOGGLE][TWISTYTOGGLE]] | required  |
    | =link="Link Text"= | The text to be used in the Twisty button link  | optional |
    | =hidelink="Link Text"= | The text to be used in the Twisty hide link  | optional |
    | =showlink="Link Text"= | The text to be used in the Twisty show link  | optional |
    | =mode="div/span"= | Specify if the Twisty link will use a =&lt;div&gt;= or a =&lt;span&gt;= tag  | optional, defaults to =&lt;span&gt;= |
    | =img="image url"= | Specify the url of an image that will be displayed at the right side of the link. <br />You may use [[%TWIKIWEB%.TWikiVariables#VarICONPATH][ICONPATH]] to display one of the %TWIKIWEB%.TWikiDocGraphics icons. Alternatively use an image attached to the topic. | optional, defaults to no image |
    | =imgleft="image url"= | Specify the url of an image that will be displayed at the left side of the link. <br />You may use [[%TWIKIWEB%.TWikiVariables#VarICONPATH][ICONPATH]] to display one of the %TWIKIWEB%.TWikiDocGraphics icons. Alternatively use an image attached to the topic. | optional, defaults to no image |
    | =imgright="image url"= | Specify the url of an image that will be displayed at the right side of the link. <br />You may use [[%TWIKIWEB%.TWikiVariables#VarICONPATH][ICONPATH]] to display one of the %TWIKIWEB%.TWikiDocGraphics icons. Alternatively use an image attached to the topic. | optional, defaults to no image |
    | =hideimg="image url"= | Specify the image to be show in the Twisty hide link | optiona, defaults to =img= value |
    | =showimg="image url"= | Specify the image to be show in the Twisty show link | optional, defaults to =img= value |
	* Related: [[#VarTWISTYSHOW][TWISTYSHOW]] and [[#VarTWISTYHIDE][TWISTYHIDE]]

#VarTWISTY
---+++ TWISTY
*Shorthand version for TWISTYSHOW &amp; TWISTYHIDE &amp; TWISTYTOGGLE*
This renders the button as well as the toggled content section contained within this and the closing ENDTWISTY tag.
	* Syntax: =%<nop>TWISTY{id="myid" ... }%=
	* Supported parameters:
    | *Parameter* | *Description* | *Value* |
    | all parameters supported by [[#VarTWISTYSHOW][TWISTYBUTTON]] |||
    | =mode="div/span"= | Specify if the Twisty Toggle section will use a =&lt;div&gt;= or a =&lt;span&gt;= tag.  | optional, defaults to =&lt;span&gt;= |
	* Related [[#VarTWISTYSHOW][TWISTYBUTTON]] and [[#VarTWISTYTOGGLE][TWISTYTOGGLE]]

#VarENDTWISTY
---+++ ENDTWISTY
*Twisty closure*

complements the opening TWISTY tag. See [[#VarENDTWISTYTOGGLE][ENDTWISTYTOGGLE]].

---++ Demo & Test
 If the plugin is properly installed, you should see the Twisty effect below:


%TWISTYSHOW{id="demo" link="Click to show" imgleft="%ICONPATH{toggleopen}%" }% %TWISTYHIDE{id="demo" link="Click to hide" imgleft="%ICONPATH{'toggleclose'}%"}% 
---
%TWISTYTOGGLE{id="demo" mode="div" remember="on"}% 
*TwistyPlugin is properly installed!*
---
%ENDTWISTYTOGGLE% 

---++ Plugin Settings

Plugin settings are stored as preferences variables. To reference
a plugin setting write ==%<nop>&lt;plugin&gt;_&lt;setting&gt;%==, i.e. ==%<nop>TWISTYPLUGIN_SHORTDESCRIPTION%==

	* One line description, is shown in the %TWIKIWEB%.TextFormattingRules topic:
	* Set SHORTDESCRIPTION = Twisty section javascript library to open/close content dynamically

	* Debug plugin: (See output in =data/debug.txt=)
	* Set DEBUG = 0

---++ Plugin Installation Instructions
	* Download the ZIP file from the Plugin web (see below)
	* Unzip ==%TOPIC%.zip== in your root ($TWIKI_ROOT) directory. Content:
   | *File:* | *Description:* |
%$MANIFEST%
	* Optionally, if it exists, run ==%TOPIC%_installer== to automatically check and install other TWiki modules that this module depends on. You can also do this step manually.
	* Alternatively, manually make sure the dependencies listed in the table below are resolved.
   %$DEPENDENCIES%
	* (Dakar) Visit =configure= in your TWiki installation, and enable the plugin in the {Plugins} section.


---++ Plugin Info

| Authors: | TWiki:Main.RafaelAlvarez |
| Copyright &copy;: | 2005 Rafael Alvarez |
| License: | [[http://www.gnu.org/copyleft/gpl.html][GPL]] |
| Dependencies: | %$DEPENDENCIES% |
| 12/09/2005 | 1.000 First Version |
| Home: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC% |
| Feedback: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC%Dev |
| Appraisal: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC%Appraisal |

	* Set ALLOWTOPICCHANGE = %MAINWEB%.TWikiAdminGroup
