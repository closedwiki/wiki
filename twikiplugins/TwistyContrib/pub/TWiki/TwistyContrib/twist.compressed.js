var twiki;if(!twiki){twiki={};}twiki.TwistyPlugin=new function(){var _1=this;this._getName=function(_2){var re=new RegExp("(.*)(hide|show|toggle)","g");var m=re.exec(_2);var _5=(m&&m[1])?m[1]:"";return _5;};this._getType=function(_6){var re=new RegExp("(.*)(hide|show|toggle)","g");var m=re.exec(_6);var _9=(m&&m[2])?m[2]:"";return _9;};this._toggleTwisty=function(_a){if(!_a){return;}_a.state=(_a.state==twiki.TwistyPlugin.CONTENT_HIDDEN)?twiki.TwistyPlugin.CONTENT_SHOWN:twiki.TwistyPlugin.CONTENT_HIDDEN;_1._update(_a,true);};this._update=function(_b,_c){var _d=_b.show;var _e=_b.hide;var _f=_b.toggle;if(_b.state==twiki.TwistyPlugin.CONTENT_SHOWN){twiki.CSS.addClass(_d,"twistyHidden");twiki.CSS.removeClass(_e,"twistyHidden");twiki.CSS.removeClass(_f,"twistyHidden");}else{twiki.CSS.removeClass(_d,"twistyHidden");twiki.CSS.addClass(_e,"twistyHidden");twiki.CSS.addClass(_f,"twistyHidden");}if(_c&&_b.saveSetting){twiki.Pref.setPref(twiki.TwistyPlugin.COOKIE_PREFIX+_b.name,_b.state);}if(_b.clearSetting){twiki.Pref.setPref(twiki.TwistyPlugin.COOKIE_PREFIX+_b.name,"");}};this._register=function(e){if(!e){return;}var _11=_1._getName(e.id);var ref=_1._storage[_11];if(!ref){ref=new twiki.TwistyPlugin.Storage();}if(twiki.CSS.hasClass(e,"twistyRememberSetting")){ref.saveSetting=true;}if(twiki.CSS.hasClass(e,"twistyForgetSetting")){ref.clearSetting=true;}if(twiki.CSS.hasClass(e,"twistyStartShow")){ref.startShown=true;}if(twiki.CSS.hasClass(e,"twistyStartHide")){ref.startHidden=true;}if(twiki.CSS.hasClass(e,"twistyFirstStartShow")){ref.firstStartShown=true;}if(twiki.CSS.hasClass(e,"twistyFirstStartHide")){ref.firstStartHidden=true;}ref.name=_11;var _13=_1._getType(e.id);ref[_13]=e;_1._storage[_11]=ref;switch(_13){case "show":case "hide":e.onclick=function(){_1._toggleTwisty(ref);return false;};break;}return ref;};this._storage={};this._UIbehaviour={".twistyTrigger":function(e){twiki.TwistyPlugin.init(e.id);},".twistyContent":function(e){twiki.TwistyPlugin.init(e.id);},".twistyExpandAll":function(e){e.onclick=function(){twiki.TwistyPlugin.toggleAll(twiki.TwistyPlugin.CONTENT_SHOWN);};},".twistyCollapseAll":function(e){e.onclick=function(){twiki.TwistyPlugin.toggleAll(twiki.TwistyPlugin.CONTENT_HIDDEN);};}};Behaviour.register(this._UIbehaviour);};twiki.TwistyPlugin.CONTENT_HIDDEN=0;twiki.TwistyPlugin.CONTENT_SHOWN=1;twiki.TwistyPlugin.COOKIE_PREFIX="TwistyContrib_";twiki.TwistyPlugin.prefList;twiki.TwistyPlugin.init=function(_18){var e=document.getElementById(_18);if(!e){return;}var _1a=this._getName(_18);var ref=this._storage[_1a];if(ref&&ref.show&&ref.hide&&ref.toggle){return ref;}ref=this._register(e);if(twiki.CSS.hasClass(e,"twistyMakeHidden")){twiki.CSS.replaceClass(e,"twistyMakeHidden","twistyHidden");}if(twiki.CSS.hasClass(e,"twistyMakeVisible")){twiki.CSS.removeClass(e,"twistyMakeVisible");}if(ref.show&&ref.hide&&ref.toggle){if(twiki.TwistyPlugin.prefList==null){twiki.TwistyPlugin.prefList=twiki.Pref.getPrefList();}var _1c=twiki.Pref.getPrefValueFromPrefList(twiki.TwistyPlugin.COOKIE_PREFIX+ref.name,twiki.TwistyPlugin.prefList);if(ref.firstStartHidden){ref.state=twiki.TwistyPlugin.CONTENT_HIDDEN;}if(ref.firstStartShown){ref.state=twiki.TwistyPlugin.CONTENT_SHOWN;}if(_1c&&_1c=="0"){ref.state=twiki.TwistyPlugin.CONTENT_HIDDEN;}if(_1c&&_1c=="1"){ref.state=twiki.TwistyPlugin.CONTENT_SHOWN;}if(ref.startHidden){ref.state=twiki.TwistyPlugin.CONTENT_HIDDEN;}if(ref.startShown){ref.state=twiki.TwistyPlugin.CONTENT_SHOWN;}this._update(ref,false);}return ref;};twiki.TwistyPlugin.toggleAll=function(_1d){var i;for(var i in this._storage){var e=this._storage[i];e.state=_1d;this._update(e,true);}};twiki.TwistyPlugin.Storage=function(){this.name;this.state=twiki.TwistyPlugin.CONTENT_HIDDEN;this.hide;this.show;this.toggle;this.saveSetting=false;this.clearSetting=false;this.startShown;this.startHidden;this.firstStartShown;this.firstStartHidden;};