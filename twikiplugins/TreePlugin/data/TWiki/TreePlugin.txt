%META:TOPICINFO{author="StephaneLenclud" date="1158443010" format="1.1" reprev="1.5" version="1.5"}%
---+!! <nop>%TOPIC%

Enables dynamic generation of TWiki topic trees based on topics' parent-child relationships.
Useful for dynamic sitemaps and threads.

%TOC%

---++ <nop>%TOPIC% Global Settings

Plugin settings are stored as preferences variables. To reference
a plugin setting write ==%<nop>&lt;plugin&gt;_&lt;setting&gt;%==, for example, ==%<nop>INTERWIKIPLUGIN_SHORTDESCRIPTION%==

   * One line description, shown in the %TWIKIWEB%.TextFormattingRules topic:
   * Set SHORTDESCRIPTION = Dynamic generation of TWiki topic trees 

   * Set DEBUG to 1 to get debug messages in =data/debug.txt=.  Default: =0=
   * Set DEBUG = 0


---+++ Syntax Rules

Adds the following tags:
   * %<nop>TREEVIEW% - displays a TWiki topic's children in a hierarchical fashion.

<!--blockquote-->
Attributes:
   * *web* - specify web
   * *topic* - specify tree's root topic (if none, will do the entire web)
   * *formatting* - specify the formatting method
      * =ullist= is a &lt;ul&gt;-list, see [[TreePluginSamples#UlList][sample UL lists]]
      * =ollist= is a &lt;ol&gt;-list, see [[TreePluginSamples#OlList][sample OL lists]]
      * =outline= is an outline list, see [[TreePluginSamples#SampleOutlines][sample Outlines]]
      * =hlist= is a &lt;h<i>n</i>&gt;-list of section heads, see [[TreePluginSamples#SampleHList][sample Headlines]]
      * =coloroutline= is an outline formatting with level values turned into colors, see [[TreePluginSamples#SampleNestedTables][sample Nested tables]]
      * =mageoutline= is a way to incorporate images into the outline format,
      specifically to display thread-like and fodler views, see [[TreePluginSamples#SampleImageTrees][sample Image Trees]]
   * *stoplevel* - the depth of the tree to show
   * *header* - header output
   * *bookview* - list topics in BookView form 
   * *format* - specify the format for each node (=outline= & =coloroutline=). Format variable options:
      * _$topic_ - the topic name
      * _$web_ - the topic's web
      * _$spacetopic_ - the topic with spaces
      * _$summary_ - the topic's summary
      * _$text_ - the topic's text (which will get rendered)
      * _$author_ - the topic's last author 
      * _$modTime_ - the topic's modification time
      * _$level_ - the tree depth of the topic (in whatever format)
      * _$count_ - the topic's child position
      * _$onum_ - outline number for the topic (eg, 1.3.4.2) 
      * _$url_ - the current topic's URL
   * *formatbranch* - specify the format for a group of children (=outline= & =coloroutline=)
      * _$parent_ - the text of a node
      * _$children_ - the text of all the node's children (if any)
   * *levelprefix* - specify a prefix to a node format. The prefix is inserted $level times at the beginning of the rendered node format (=outline=). It allows generation of trees using TWiki bullet list syntax thus enabling usage of TreePlugin in [[#Combination_with_TreeBrowserPlug][Combination with TreeBrowserPlugin]].


---+++ Samples
See the following pages for sample usage and output.
   * TreePluginSamples
   * HeadingOutlineSample
   * TreeBookviewOutlineSample

<!-- The Plugins.<nop>TreePluginHelp topic in the installation contains complete help information. -->

---++++ Combination with [[TWiki:Plugins.TreeBrowserPlugin][TreeBrowserPlugin]]

=%<nop>TREEBROWSER{"file" title="%<nop>WEB%"}%= %BR%
=%<nop>TREEVIEW{web="%<nop>WEB%" topic="GrandParent" formatting="outline" format="* $topic" levelprefix="   "}%=


---+++ Limitations and Known Issues 
   * The parameter *web* does not work correctly. The Tree gets rendered, but the WikiWords of the topics do not contain the *web* value, but refers to the current web. Since I have limited knowledge of perl OO, I can't repair for now. -- TWiki:Main.MartinRaabe - 16 Jan 2003 

A workaround for that is to do something like:
=%<nop>TREEVIEW{web="TWiki"  formatting="outline" format="* $web.$topic" levelprefix="   "}%=

---+++ Plugin Installation Instructions

---++++ Manual 

Download the =ZIP= or =TGZ= file from TWiki:Plugins.TreePlugin and unzip it into your TWiki installation directory

---++++ Automatic

Download =TreePlugin_installer= from TWiki:Plugins.TreePlugin put it at the root of your TWiki installation and execute it from there.

---++++ Contents

   | *File:* | *Description:* |
   | ==data/TWiki/%TOPIC%.txt== | Plugin topic |
   | ==data/TWiki/%TOPIC%.txt,v== | Version file of Plugin topic |
   | ==data/Plugins/%TOPIC%Samples.txt== | Plugin Samples |
   | ==data/Plugins/%TOPIC%Samples.txt,v== | Version file of Plugin Samples |
   | ==data/Plugins/HeadingOutlineSample.txt== | Heading Outline Sample |
   | ==data/Plugins/HeadingOutlineSample.txt,v== | Version file of Heading Outline Sample |
   | ==data/Plugins/TreeBookviewOutlineSample.txt== | Tree Bookview Outline Sample |
   | ==data/Plugins/TreeBookviewOutlineSample.txt,v== | Version file of Tree Bookview Outline Sample |
   | ==lib/TWiki/Plugins/%TOPIC%.pm== | Plugin Perl module |
   | ==lib/TWiki/Plugins/%TOPIC%/ColorNodeFormatter.pm== | Library component |
   | ==lib/TWiki/Plugins/%TOPIC%/FormatHelper.pm== | Library component |
   | ==lib/TWiki/Plugins/%TOPIC%/FormatOutlineNodeFormatter.pm== | Library component |
   | ==lib/TWiki/Plugins/%TOPIC%/HOutlineNodeFormatter.pm== | Library component |
   | ==lib/TWiki/Plugins/%TOPIC%/ImgNodeFormatter.pm== | Library component |
   | ==lib/TWiki/Plugins/%TOPIC%/ListNodeFormatter.pm== | Library component |
   | ==lib/TWiki/Plugins/%TOPIC%/TreePlugin/Node.pm== | Library component |
   | ==lib/TWiki/Plugins/%TOPIC%/NodeFormatter.pm== | Library component |
   | ==lib/TWiki/Plugins/%TOPIC%/OutlineNodeFormatter.pm== | Library component |
   | ==lib/TWiki/Plugins/%TOPIC%/TWikiNode.pm== | Library component |
   | ==lib/TWiki/Plugins/%TOPIC%/test.tar.gz== | Test files |
   | ==pub/TWiki/TreePlugin/I.gif== | tree icon |
   | ==pub/TWiki/TreePlugin/L.gif== | tree icon |
   | ==pub/TWiki/TreePlugin/oL.gif== | tree icon |
   | ==pub/TWiki/TreePlugin/oT.gif== | tree icon |
   | ==pub/TWiki/TreePlugin/pL.gif== | tree icon |
   | ==pub/TWiki/TreePlugin/pT.gif== | tree icon |
   | ==pub/TWiki/TreePlugin/T.gif== | tree icon |
   | ==pub/TWiki/TreePlugin/white.gif== | tree icon |
   | ==templates/booktree.tmpl== | Template for bookview mode |

   * Unzip ==%TOPIC%.zip== in your twiki installation directory.
   * (Dakar) Visit =configure= in your TWiki installation, and enable the plugin in the {Plugins} section.
   * If you see a tree of this topic here:

%TREEVIEW{topic="TreePlugin"}%

  then installation was successful.

<!-- Check the %TOPIC%Help topic. .-->
<!---   * Add the following line to the "TWiki Plugins" section of %TWIKIWEB%.TextFormattingRules:
   * Plugins.%TOPIC%: Tree viewing
-->

---+++ Plugin Info

|  One Line Description: | View Twiki topics as nodes in a tree |
|  Plugin Author: | TWiki:Main.SlavaKozlov |
|  Plugin Version: | v0.5 |
|  Change History: | <!-- specify latest version first -->&nbsp; |
|  16 Sep 2006: | (v0.5) - TWiki:Main.StephaneLenclud: adding levelprefix parameter to unable usage in combination with TreeBrowserPlugin |
|  26 Jul 2006: | (v0.4) - TWiki:Main.SteffenPoulsen: Ported to TWiki-4 / Dakar. Leading text removed, less warnings, no double bracket links, css classnames around output. |
|  15 Feb 2002: | Alpha (0.2) release |
|  08 Feb 2002: | Internal (0.1) release |
|  CPAN Dependencies: | none _(test package relies on Wiki:PerlUnit)_ |
|  Other Dependencies: | none |
|  Perl Version: | 5.0, 5.6.1, 5.8.7 |
|  Plugin Home: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC% |
|  Feedback: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC%Dev |

__Related Topics:__ %TWIKIWEB%.TWikiPreferences, %TWIKIWEB%.TWikiPlugins, TWiki:Plugins.TreeBrowserPlugin

---++++ Copyright
This code is protected by the following
copyrights:
   * Copyright (C) 2002 Slava Kozlov. All Rights Reserved.

---++++ License
As required for the publication of all extensions to TWiki, this
software is published under the terms of the GNU General Public
License.

This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
General Public License for more details, published at
http://www.gnu.org/copyleft/gpl.html

-- TWiki:Main.SlavaKozlov - 16 Feb 2002

%META:FILEATTACHMENT{name="oT.gif" attr="" autoattached="1" comment="" date="1158432770" path="oT.gif" size="879" user="UnknownUser" version=""}%
%META:FILEATTACHMENT{name="I.gif" attr="" autoattached="1" comment="" date="1158432770" path="I.gif" size="869" user="UnknownUser" version=""}%
%META:FILEATTACHMENT{name="white.gif" attr="" autoattached="1" comment="" date="1158432770" path="white.gif" size="56" user="UnknownUser" version=""}%
%META:FILEATTACHMENT{name="pL.gif" attr="" autoattached="1" comment="" date="1158432770" path="pL.gif" size="880" user="UnknownUser" version=""}%
%META:FILEATTACHMENT{name="oL.gif" attr="" autoattached="1" comment="" date="1158432770" path="oL.gif" size="874" user="UnknownUser" version=""}%
%META:FILEATTACHMENT{name="L.gif" attr="" autoattached="1" comment="" date="1158432770" path="L.gif" size="864" user="UnknownUser" version=""}%
%META:FILEATTACHMENT{name="T.gif" attr="" autoattached="1" comment="" date="1158432770" path="T.gif" size="873" user="UnknownUser" version=""}%
%META:FILEATTACHMENT{name="pT.gif" attr="" autoattached="1" comment="" date="1158432770" path="pT.gif" size="883" user="UnknownUser" version=""}%
