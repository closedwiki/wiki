---+!! !EditRowPlugin
<!--
One line description, required for extensions repository catalog.
   * Set SHORTDESCRIPTION = Single table row inline edit
-->

%SHORTDESCRIPTION%
<img src="%ATTACHURLPATH%/screenshot.gif" alt="screenshot.gif" width='415' height='100' style="float:right" />

%TOC%

A clone of !EditTablePlugin that supports editing a single row in a table
at a time, in-place in the table.
Multiple tables in a topic are supported, but only one table at a time
can be open for editing.

Works like the !EditTablePlugin (it uses exactly the same =%EDITTABLE= tags) and
you can use it to edit the entire table. The main purpose, though, is to support
editing one row at a time. Closed rows are shown with
an edit %ICON{edittopic}% button.

So why should you use this plugin instead of the !EditTablePlugin?
   1 The main point is that *you can edit one row at a time*, instead of
     having to edit the entire
     table. This solves the problem with the long page rendering times
     required to show all the HTML for a full table edit on big tables.
   1 Simple interface to moving rows around in the table, deleting and adding rows.
   1 Gets row numbering right (takes account of headers)
   1 The plugin doesn't use !JavaScript (except for the calendar) and
     doesn't do anything clever with CSS, so it should work with all browsers.
   1 The plugin is coded using a clean object-oriented architecture, which
     means it is easily extensible.
   1 The plugin uses a simple REST interface for saving changes, which allows
     Javascript table editors to use the same interface to save.

At this time most features of !EditTablePlugin are supported. Known exceptions
are:
   * the =helptopic= and =editbutton= switches, which are ignored,
   * the =EDITCELL= feature, which is not supported,
   * The "Initial values" feature.

See also: TWiki:Plugins.EditTablePlugin, TWiki:Plugins.EditTablerowPlugin.

Another great TWiki extension from the <a style="text-decoration:none" href="http://wikiring.com"><img src="%ATTACHURLPATH%/wikiring.png" alt="" /> *WikiRing* </a> - working together to improve your wiki experience!

---++ Usage

Add =%<nop>EDITTABLE{...}%= on the line before the first row of an existing table to make it editable. Parameters:

   * =format= - The format of the cells in a row of the table. The format is defined like a table row, where the cell data specify the type for each cell. For example, =format="| text,16 | label |"=. Cells can be any of the following types:
      * =text, &lt;size&gt;, &lt;initial value&gt;= Simple text field
      * =textarea, &lt;rows&gt;x&lt;columns&gt;, &lt;initial value&gt;= Multirow text box.
      * =select, &lt;size&gt;, &lt;option 1&gt;, &lt;option 2&gt;, etc=
        Select one from a list of choices.
      * =radio, &lt;size&gt;, &lt;option 1&gt;, &lt;option 2&gt;,= etc.
        Radio buttons. =size=
        indicates the number of buttons per line in edit mode.
      * =checkbox, &lt;size&gt;, &lt;option 1&gt;, &lt;option 2&gt;, etc=
        Checkboxes. =size=
        indicates the number of buttons per line in edit mode.
      * label, 0, &lt;label text&gt; Fixed label.
      * =row= The row number, automatically worked out.
      * =date, &lt;size&gt;, &lt;initial value&gt;, &lt;DHTML date format&gt;=
   * =changerows= - Rows can be added and removed if ="on"=. Rows can be added but
     not removed if ="add"=
   * =quietsave= - Quiet Save button is shown if ="on"=
   * =include= - Name of another topic defining the EDITTABLE parameters. The first
     %<nop>EDITTABLE% in the topic is used. This is useful if you have many topics
     with the same table format and you want to update the format in one place.
   * =headerislabel= - The first row of the table is treated as a label row if ="on"=

Table rows are shown with a row edit button %ICON{edittopic}% in the first column,
and a table edit button <img src="%ATTACHURLPATH%/edittable.gif" /> after the
table. When the table is
edited, then a number of buttons may be shown depending on the
settings of =changerows= and =quietsave=.
   * %ICON{save}% saves the changes
   * <img src="%ATTACHURLPATH%/quiet.gif" /> saves without notification
   * %ICON{plus}% adds a new row after the current row, taking for its contents whatever you entered into the current row
   * %ICON{minus}% deletes the row
   * %ICON{arrowup}% Move this row up one row in the table
   * %ICON{arrowdown}% Move this row down one row in the table
   * %ICON{stop}% cancels the open edit

If the plugin is installed and working *and you can modify this topic* then
the following examples will be editable.
---+++ Example 1
%EDITTABLE{ format="| row, -1 | text, 20, init | select, 1, one, two, three, four | radio, 3,:-),:-I,:-( | label, 20 |" changerows="on" quietsave="on" }%
| *Nr* | *Text field* | *Drop down* | *Mood* | *Timestamp* |
| 1 | hello table | one | :-) | 26 Jun 2002 12:30 |
| 2 |  | two | :-( | 27 Jun 2002 12:40 |

---+++ Example 2
%EDITTABLE{ format="| label,12 | text, 40 |" }%
| *Key* | *Value* |
| Name: | John Smith |
| Gender: | M |
| DOB: | 1999/12/31 |
| City: | New York |

---+++ Example 3
%EDITTABLE{ format="| label,12 | textarea, 3x30 |" }%
| *Model* | *Description* |
| 345TG66 | Short, with sightly concave upper surface, and devilish nuts |
| 9A-11 | A new model for 2007, but not quite as pretty as the 9A-10 |
| RR717-D | Solid performer, dependable in vacuum grinders |

---++ Using the REST interface
The plugin supports saving changes to tables via a REST handler. This handler
is invoked using the following URL format:

&lt;twiki-bin-path>/rest/EditRowPlugin/save

The handler accepts the following parameters:
   * =erp_active_topic= the web.wikiname of the topic to be changed
   * =erp_active_table= the table to be changed (numbered from 1)
   * =erp_active_row= - the row to be changed (numbered from 1, or -1 for the whole table)
   * =erp_active_format= - the =format= parameter from the =EDITTABLE= tag
   * =erp_save.x= - if nonzero, this is a save
   * =erp_quietSave.x= - if nonzero, this is a quietsave
   * =erp_upRow.x= - if nonzero, this is a row move
   * =erp_downRow.x= - if nonzero, this is a  row move
   * =erp_deleteRow.x= - if nonzero, this is a row deletion
   * =erp_cancel.x= - if nonzero, this is a cancel
   * =erp_noredirect= - if set, suppresses the redirect and gets a status code instead
The value of each individual cell is stored in a parameter called =erp_&lt;table>_&lt;row>_&lt;column>=

---++ Installation Instructions

%$INSTALL_INSTRUCTIONS%

---++ Plugin Info

|  Plugin Author(s): | Crawford Currie |
|  Plugin Version: | %$VERSION% |
|  Copyright: | &copy; 2007 Wind<nop>River Inc. |
|  License: | [[http://www.gnu.org/licenses/gpl.html][GPL (Gnu General Public License)]] |
|  Change History: | <!-- versions below in reverse order -->&nbsp; |
|  13359 | Bugs:Item3875 - can now edit top row of tables. Also now writes row numbers back to the topic, which was needed to support some compatible apps. |
|  13335 | Fixed broken date prompt, and problem with radio buttons, improved and documented REST interface for Javascript authors |
|  13291 | Added full table editing, including moving rows within the table |
|  13161 | Bulletproofed against issues with rows that are shorter or longer than the format. |
|  13159 | Fixed issue with short rows, and added perms check. Thanks also to TWiki:Main.MichaelDaum for more fixes and testing. Now works on IE. |
|  13148 | Bugs:Item3770: Bugfixes |
|  Dependencies: | %$DEPENDENCIES% |
|  Plugin Home: | http://twiki.org/cgi-bin/view/Plugins/EditRowPlugin |
|  Feedback: | http://twiki.org/cgi-bin/view/Plugins/EditRowPluginDev |
|  Appraisal: | http://twiki.org/cgi-bin/view/Plugins/EditRowPluginAppraisal |

<!-- Do _not_ attempt to edit this topic; it is auto-generated. Please add comments/questions/remarks to the Dev topic instead. -->

%META:FILEATTACHMENT{name="screenshot.gif" attr="h" comment="" version="1"}%
%META:FILEATTACHMENT{name="wikiring.png" attr="h" comment="" version="1"}%
%META:FILEATTACHMENT{name="edittable.gif" attr="h" comment="" version="1"}%
%META:FILEATTACHMENT{name="quiet.gif" attr="h" comment="" version="1"}%
