%META:TOPICINFO{author="SvenDowideit" date="1148433470" format="1.1" version="1.2"}%
---+!! <nop>%TOPIC% 

The InlineEditPlugin provides a quick (zero server roundtrip) edit functionality from the TWiki view script.
It has been architected to allow the definition and choice of Javascript editing component, using a TWiki template file.
It is intended to be used in conjunction with ComponentEditPlugin to enable editing of TWikiVariables.

This is an initial pre-release and is not intended to be used in production. Insufficient testing and feedback has happened - and Its known to have problems with TWikiVariables embeded in HTML attributes.

*WARNING:* when you edit using InlineEditPlugin, it tries to create a topic lock or lease. In Cairo, this is done using the edit script, and in TWiki-4 via rest script. Unfortunatly, this means that they will only work if the respective scripts are authenticated, or a server side session is used.

*WARNING:* tinymce tries to clean up html, so i fyou have any html inline in the topic text, it WILL get broken - I'm planning on using sectional editing to work around this, but thats also a complex issue

&nbsp;
---+++ Usage 
If the InlineEditPlugin is installed and enabled, all you should need to edit a page, is to double click on the rendered topic text. TWikiVariables will be highlighted in Grey boxes, that you can click on to get a popup edit dialog driven by the ComponentEditPlugin.

<img width="640" alt="InlineEditPlugin_tinyMCE.png" align="right" src="%ATTACHURLPATH%/InlineEditPlugin_tinyMCE.png" height="410">
</img>

&nbsp;
---+++!! TODO list 
   1 see what we can do to protect TWikiVariables in html attributes (or even just protecting html at all (tinymce makes a mess with its cleaning up))
   1 possibly protect all inline html from the editor - can fall back to a textarea inline edit for those sections


   1 neither wikiwyg nor tinymce use css styles as specified in pattern skin (ie import @url)
   1 tinymce version currently does not try to set / check leases (is merging going to work?)
      * prepare for sectional edits
      * IMPLEMENT as rest, and add an async call to it when the user wants to edit - need a status bar..
   1 improve the robustness of the TML2HTML and HTML2TML converters
   1 test scripts - call TML2HTML then HTML2TML on all topics, and make sure they are the same..
   1 add templates for more editors
   1 / or maybe just sectional save, ie, the editor sends a diff, not the whole doc.
   1 fix browser back button
   1 hide the twiki actions?
   1 implement raw view etc as non-round trip
   1 benchmarking - both load on server and client time
   1 Qualify functionality on the following browsers:
      * FireFox 1.0.7
      * FireFox 1.5.
      * IE 6.
   1 improve the info wrt why the user is not able to edit
   1 change the size of the edit div..
---+++!! TODO for wikiwyg 
   1 IE support for wikiwyg - add wikiwyg patch from mailing list
   1 naive sectional edit results in loading N*every image
   1 prevent double click from starting wikiwyg before onload / init javascript is completed
   1 Wikiwyg needs to realise if the document has been modified / not, don't really do a save un-necessarily
---+++!! TODO for tinymce 
   * looks like tinymce puts in lots of extra whitespace, which will need to be post cleaned up
   * the stylesheet gathering however does not work on IE, and on FF has an issue


---++ Plugin Settings 

Plugin settings are stored as preferences variables. To reference a plugin setting write ==%&lt;plugin&gt;_&lt;setting&gt;%==, i.e. ==%<nop>INTERWIKIPLUGIN_SHORTDESCRIPTION%==


   * One line description, is shown in the %TWIKIWEB%.TextFormattingRules topic:
      * Set SHORTDESCRIPTION = adds double click to edit functionality to the TWiki view script


   * Debug plugin: (See output in =data/debug.txt=)
      * Set DEBUG = 0

   * Select the javascript header template to load the editor with (wikiwyg / tinymce / textarea)
      * Set EDITOR = textarea

&nbsp;
   * If defined, we use the WysiwygPlugin 's TML2HTML, while if undefined, we use the new and less tested javascript version
      * Set SENDHTML = 1

&nbsp;
   * set a minimum number of lines in a section, for sectional Edit - otherwise you get alot of single line edit boxes
   * 0 means no sections (edit entire topic only)
      * Set MINIMUMSECTIONLENGTH = 1

&nbsp;
---++ Plugin Installation Instructions 

__Note:__ You do not need to install anything on the browser to use this plugin. The following instructions are for the administrator who installs the plugin on the server where TWiki is running. 

&nbsp;
   * Download the ZIP file from the Plugin web (see below)
   * Unzip ==%TOPIC%.zip== in your twiki installation directory. Content: <table cellspacing="1" cellpadding="0" border="1">       *File:*  *Description:*        ==data/TWiki/%TOPIC%.txt==  Plugin topic        ==data/TWiki/%TOPIC%.txt,v==  Plugin topic repository        ==lib/TWiki/Plugins/%TOPIC%.pm==  Plugin Perl module  </table>
   * use the configure script to enable the WysiwygPlugin and InlineEditPlugin
   * Test if the installation was successful:
      * double click in a topic you have permission to edit.

&nbsp;
---++ Plugin Info 

&nbsp;
|  Plugin Author: | TWiki:Main.SvenDowideit - SvenDowideit @wikiring.com |
|  Copyright: | &copy; 2001-2006, SvenDowideit@wikiring.com |
|  Plugin Version: | 30 April 2006 (V0.900) |
|  Change History: | <!-- versions below in reverse order -->&nbsp; |
|  30 April 2006: | Initial version |
|  TWiki Dependency: | $TWiki::Plugins::VERSION 1.024 |
|  CPAN Dependencies: | none |
|  Other Dependencies: | TWiki:Plugins.WysiwygPlugin |
|  Perl Version: | 5.005 |
|  License: | GPL ( [[http://www.gnu.org/copyleft/gpl.html][GNU General Public License]]) |
|  TWiki:Plugins/Benchmark: | %TWIKIWEB%.GoodStyle nn%, %TWIKIWEB%.FormattedSearch nn%, %TOPIC% nn% |
|  Plugin Home: | [[http://TWiki.org/cgi-bin/view/Plugins/%3Cspan%20id=%27TMLvariable10%27%20class=%27TMLvariable%27%20%3ETOPIC%3C/span%3E][http://TWiki.org/cgi-bin/view/Plugins/%TOPIC%]] |
|  Feedback: | [[http://TWiki.org/cgi-bin/view/Plugins/%3Cspan%20id=%27TMLvariable12%27%20class=%27TMLvariable%27%20%3ETOPIC%3C/span%3EDev][http://TWiki.org/cgi-bin/view/Plugins/%TOPIC%Dev]] |
|  Appraisal: | [[http://TWiki.org/cgi-bin/view/Plugins/%3Cspan%20id=%27TMLvariable14%27%20class=%27TMLvariable%27%20%3ETOPIC%3C/span%3EAppraisal][http://TWiki.org/cgi-bin/view/Plugins/%TOPIC%Appraisal]] |

__Related Topics:__ %TWIKIWEB%.TWikiPreferences, %TWIKIWEB%.TWikiPlugins

-- TWiki:Main.SvenDowideit
