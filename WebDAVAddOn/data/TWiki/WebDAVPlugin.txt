---+ <nop>WebDAV for TWiki

Very _very_ early access release of <nop>WebDAV for TWiki. This topic has not been written yet, and any words you may think you are reading are purely a figment of your own imagination.

<nop>WebDAV stands for "Web-based Distributed Authoring and Versioning". It is a set of extensions to the HTTP protocol which allows users to collaboratively edit and manage files on remote web servers.

TWiki integration with <nop>WebDAV means that users can edit attachments on topics by dragging and dropping the attachment from the TWiki topic into an appropriate <nop>WebDAV enabled client program, such as Microsoft&trade; Word&trade; or KWrite. Given the URL of the attachment, they can also be opened directly from applications i.e. the integration publishes TWiki attachment files in a web folder. Saving back the attachment automatically creates a new version. By opening a Web Folder on the attachment directory, users can drag and drop attachments into the topic, and they will automatically be versioned and added to the topic attachment table.

TWiki protections on topics are honoured through use of a Plugin that caches protections in a database, allowing Apache to rapidly test them when a file in a TWiki folder is being accessed.

The TWiki DAV integration consists of a [[http://webdav.org/mod_dav/][mod_dav]] based Apache module, a bin script used for checking in, and the plugin used to extract protections. The Apache module is based on mod_dav version 1.0.3 and includes all of the functionality of that module, so should be a drop-in replacement on Apache 1.3 servers. Apache 2 servers are *not* supported.

---++ Usage

To edit the attachments for a topic, open the topic in the TWiki. Open the application you want to use (e.g. MS Word), and drag the name of the attachment into the application.

At present you can only save back to the file you edited, or to another location (either a web folder or local folder).

Log messages may be generated in any or all of error_log, access_log or /tmp/vsnlog (debugging).

---++ Add-On Installation Instructions

__Note:__ You do not need to install anything on the browser to use this add-on. The following instructions are for the administrator who installs the add-on on the server where TWiki is running. 

	* Satisfy these dependencies on other modules:
	| *Module* | *Type* | *Version* | *Description* |
	| TDB_File | perl | Any | TDB database interface |
	* Download the ZIP file from the Add-on Home (see below)
	* Unzip ==%TOPIC%.zip== in your twiki installation directory. Content:
	| *File:* | *Description:* |
	| ==bin/dav.pl== | Add-on script |
	| ==bin/recache.pl== | Script to rebuild the protections cache |
    | ==data/TWiki/%TOPIC%.txt== | This topic |
	| ==lib/twiki_dav/autogen.sh== | twiki_dav build script |
	| ==lib/twiki_dav/CHANGES== | twiki_dav document |
	| ==lib/twiki_dav/config.h.in== | twiki_dav module |
	| ==lib/twiki_dav/configure.in== | twiki_dav build script |
	| ==lib/twiki_dav/configure== | twiki_dav build script |
	| ==lib/twiki_dav/dav_dyn.c== | twiki_dav module |
	| ==lib/twiki_dav/dav_fs_dbm.c== | twiki_dav module |
	| ==lib/twiki_dav/dav_fs_lock.c== | twiki_dav module |
	| ==lib/twiki_dav/dav_fs_repos.c== | twiki_dav module |
	| ==lib/twiki_dav/dav_fs_repos.h== | twiki_dav module |
	| ==lib/twiki_dav/dav_fs_vsn.c== | twiki_dav module |
	| ==lib/twiki_dav/dav_lock.c== | twiki_dav module |
	| ==lib/twiki_dav/dav_opaquelock.c== | twiki_dav module |
	| ==lib/twiki_dav/dav_opaquelock.h== | twiki_dav module |
	| ==lib/twiki_dav/dav_props.c== | twiki_dav module |
	| ==lib/twiki_dav/dav_shared_stub.c== | twiki_dav module |
	| ==lib/twiki_dav/dav_util.c== | twiki_dav module |
	| ==lib/twiki_dav/dav_xmlparse.c== | twiki_dav module |
	| ==lib/twiki_dav/INSTALL== | twiki_dav document |
	| ==lib/twiki_dav/LICENSE.html== | twiki_dav document |
	| ==lib/twiki_dav/libdav.module.in== | twiki_dav build script |
	| ==lib/twiki_dav/Makefile.in== | twiki_dav build script |
	| ==lib/twiki_dav/Makefile.libdir== | twiki_dav build script |
	| ==lib/twiki_dav/Makefile.tmpl== | twiki_dav build_script |
	| ==lib/twiki_dav/mod_dav.c== | twiki_dav module |
	| ==lib/twiki_dav/mod_dav.h== | twiki_dav module |
	| ==lib/twiki_dav/PROT.c== | twiki_dav module |
	| ==lib/twiki_dav/PROT.h== | twiki_dav module |
    | ==lib/twiki_dav/README== | twiki_dav document |
	| ==lib/TWiki/Plugins/%TOPIC%/build.pl== | Build and uninstall script |
	| ==lib/TWiki/Plugins/%TOPIC%/Permissions.pm== | Plugin module |
	| ==lib/TWiki/Plugins/%TOPIC%.pm== | Plugin module |
	| ==lib/TWiki/Plugins/%TOPIC%/test.zip== | Tests |

Unzip the zip over your TWiki installation. It won't break anything. To build and install the Apache module, follow the instructions on http://webdav.org/mod_dav/install.html Note that administrator access will usually be required to install the module.

Your server is now DAV-enabled, and you should be able to set up DAV access to web folders, as per the instructions.

To enable the TWiki-specific functions of twiki-dav, edit your =httpd.conf= and in the &lt;Directory> (or &lt;Location>) section for your pub directory put the =DAV= and =TWikiDir= directives.
	* =DAV= is the standard DAV directive for enabling DAV on the directory.
	* =TWikiDir= defines the type of the directory (pub or data), the absolute path to the directory after the URI has been resolved, and the path to the checkin script. For example,
<verbatim>
Alias /twiki/dav/ /home/twiki/pub/
<Location /twiki/dav/>
   DAV On
   TWikiDir pub /home/twiki/pub
   TWikiScript /home/twiki/bin/dav.pl
   Options FollowSymLinks Indexes
   Allow from all
   # Obviously set your auth appropriately
   AuthType Basic
   AuthName "Enter your wiki username"
   AuthUserFile /home/twiki/.htpasswd
   Require valid-user
</Location>
</verbatim>

	* *IMPORTANT* The following TWiki variable must be set to point to the same directory as your Apache DAVLockDB directive:
		* Set LOCK_DB = /var/lock/webdav

---++ Add-On Info

|  Add-on Author: | TWiki:Main/CrawfordCurrie |
|  Add-on Version: | 14 Apr 2004 (v1.000) |
|  Change History: | <!-- versions below in reverse order -->&nbsp; |
|  14 Apr 2004: | Initial very _very_ early access release |
|  CPAN Dependencies: | none |
|  Other Dependencies: | Apache 1.3, SDBM, SDBM_File |
|  Perl Version: | 5.005 |
|  License: | GPL |
|  Add-on Home: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC% |
|  Feedback: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC%Dev |

This product includes software developed by Greg Stein <gstein@lyra.org> for use in the mod_dav module for Apache (http://www.webdav.org/mod_dav/). mod_dav is licensed under the terms of the following license: http://webdav.org/mod_dav/license-1.html

TDB is licensed under the terms of the GPL.

__Related Topic:__ %TWIKIWEB%.TWikiAddOns, -- TWiki:Codev.WebDAV

-- TWiki:Main/CrawfordCurrie - 14 Apr 2004
