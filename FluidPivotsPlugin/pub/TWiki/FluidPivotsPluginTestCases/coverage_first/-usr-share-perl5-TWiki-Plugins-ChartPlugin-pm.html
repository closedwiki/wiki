<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 0.61
Devel::Cover is copyright 2001-2006, Paul Johnson (pjcj@cpan.org)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: /usr/share/perl5/TWiki/Plugins/ChartPlugin.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">/usr/share/perl5/TWiki/Plugins/ChartPlugin.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c0">61.6%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>time</th><th>code</th></tr>
<tr><td class="h">1</td><td></td><td></td><td></td><td></td><td></td><td class="s"># ChartPlugin for TWiki Enterprise Collaboration Platform, http://TWiki.org/</td></tr>
<tr><td class="h">2</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">3</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Copyright (C) 2004-2006 Peter Thoeny, Peter@Thoeny.org</td></tr>
<tr><td class="h">4</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Plugin written by http://TWiki.org/cgi-bin/view/Main/TaitCyrus</td></tr>
<tr><td class="h">5</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">6</td><td></td><td></td><td></td><td></td><td></td><td class="s"># For licensing info read LICENSE file in the TWiki root.</td></tr>
<tr><td class="h">7</td><td></td><td></td><td></td><td></td><td></td><td class="s"># This program is free software; you can redistribute it and/or</td></tr>
<tr><td class="h">8</td><td></td><td></td><td></td><td></td><td></td><td class="s"># modify it under the terms of the GNU General Public License</td></tr>
<tr><td class="h">9</td><td></td><td></td><td></td><td></td><td></td><td class="s"># as published by the Free Software Foundation; either version 2</td></tr>
<tr><td class="h">10</td><td></td><td></td><td></td><td></td><td></td><td class="s"># of the License, or (at your option) any later version.</td></tr>
<tr><td class="h">11</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">12</td><td></td><td></td><td></td><td></td><td></td><td class="s"># This program is distributed in the hope that it will be useful,</td></tr>
<tr><td class="h">13</td><td></td><td></td><td></td><td></td><td></td><td class="s"># but WITHOUT ANY WARRANTY; without even the implied warranty of</td></tr>
<tr><td class="h">14</td><td></td><td></td><td></td><td></td><td></td><td class="s"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</td></tr>
<tr><td class="h">15</td><td></td><td></td><td></td><td></td><td></td><td class="s"># GNU General Public License for more details, published at</td></tr>
<tr><td class="h">16</td><td></td><td></td><td></td><td></td><td></td><td class="s"># http://www.gnu.org/copyleft/gpl.html</td></tr>
<tr><td class="h">17</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">18</td><td></td><td></td><td></td><td></td><td></td><td class="s"># As per the GPL, removal of this notice is prohibited.</td></tr>
<tr><td class="h">19</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">20</td><td></td><td></td><td></td><td></td><td></td><td class="s"># =========================</td></tr>
<tr><td class="h">21</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">22</td><td></td><td></td><td></td><td></td><td></td><td class="s"># This file contains routines for producing PNG graphic files containing</td></tr>
<tr><td class="h">23</td><td></td><td></td><td></td><td></td><td></td><td class="s"># chart information, useful for building dashboards.</td></tr>
<tr><td class="h">24</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    NOTE: ONLY in the case where an old version of GD (1.19 or earlier) is</td></tr>
<tr><td class="h">25</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    available will GIF&#39;s be created.  If the GD version is &gt; 1.19, then</td></tr>
<tr><td class="h">26</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    PNG&#39;s are created.</td></tr>
<tr><td class="h">27</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">28</td><td></td><td></td><td></td><td></td><td></td><td class="s"># This plugin uses Perl object oriented programming.  The ChartPlugin</td></tr>
<tr><td class="h">29</td><td></td><td></td><td></td><td></td><td></td><td class="s"># object contains several other Perl objects:</td></tr>
<tr><td class="h">30</td><td></td><td></td><td></td><td></td><td></td><td class="s">#     Table</td></tr>
<tr><td class="h">31</td><td></td><td></td><td></td><td></td><td></td><td class="s">#     Parameters</td></tr>
<tr><td class="h">32</td><td></td><td></td><td></td><td></td><td></td><td class="s">#     Chart</td></tr>
<tr><td class="h">33</td><td></td><td></td><td></td><td></td><td></td><td class="s"># In addition to having it&#39;s own getter/setters.</td></tr>
<tr><td class="h">34</td><td colspan="6"></td></tr><tr><td class="h">35</td><td></td><td></td><td></td><td></td><td></td><td class="s"># =========================</td></tr>
<tr><td class="h">36</td><td></td><td></td><td></td><td></td><td></td><td class="s">package TWiki::Plugins::ChartPlugin;</td></tr>
<tr><td class="h">37</td><td colspan="6"></td></tr><tr><td class="h">38</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--subroutine.html#L38">1</a></div></td><td><div>6</div><div>3</div><div>7</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">39</td><td colspan="6"></td></tr><tr><td class="h">40</td><td></td><td></td><td></td><td></td><td></td><td class="s"># =========================</td></tr>
<tr><td class="h">41</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">use vars qw(</td></tr>
<tr><td class="h">42</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$installWeb $VERSION $RELEASE $debug</td></tr>
<tr><td class="h">43</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pluginInitialized $perlGDModuleFound $perlPOSIXModuleFound</td></tr>
<tr><td class="h">44</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$defaultType @defaultAreaColors @defaultLineColors</td></tr>
<tr><td class="h">45</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$defaultWidth $defaultHeight $defaultBGcolor $defaultNumYGrids</td></tr>
<tr><td class="h">46</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$defaultDataValue $defaultScale $defaultGridColor $defaultPointSize</td></tr>
<tr><td class="h">47</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$defaultLineWidth</td></tr>
<tr><td class="h">48</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$defaultBarLeadingSpace $defaultBarTrailingSpace $defaultBarSpace</td></tr>
<tr><td class="h">49</td><td><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--subroutine.html#L49">1</a></div></td><td><div>7</div><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">50</td><td colspan="6"></td></tr><tr><td class="h">51</td><td></td><td></td><td></td><td></td><td></td><td class="s"># This should always be $Rev: 10613 (11 Mar 2007) $ so that TWiki can determine the checked-in</td></tr>
<tr><td class="h">52</td><td></td><td></td><td></td><td></td><td></td><td class="s"># status of the plugin. It is used by the build automation tools, so</td></tr>
<tr><td class="h">53</td><td></td><td></td><td></td><td></td><td></td><td class="s"># you should leave it alone.</td></tr>
<tr><td class="h">54</td><td></td><td></td><td></td><td></td><td></td><td class="s">$VERSION = &#39;$Rev: 10613 (11 Mar 2007) $&#39;;</td></tr>
<tr><td class="h">55</td><td colspan="6"></td></tr><tr><td class="h">56</td><td></td><td></td><td></td><td></td><td></td><td class="s"># This is a free-form string you can use to &quot;name&quot; your own plugin version.</td></tr>
<tr><td class="h">57</td><td></td><td></td><td></td><td></td><td></td><td class="s"># It is *not* used by the build automation tools, but is reported as part</td></tr>
<tr><td class="h">58</td><td></td><td></td><td></td><td></td><td></td><td class="s"># of the version number in PLUGINDESCRIPTIONS.</td></tr>
<tr><td class="h">59</td><td></td><td></td><td></td><td></td><td></td><td class="s">$RELEASE = &#39;Dakar&#39;;</td></tr>
<tr><td class="h">60</td><td colspan="6"></td></tr><tr><td class="h">61</td><td></td><td></td><td></td><td></td><td></td><td class="s">$pluginInitialized = 0;</td></tr>
<tr><td class="h">62</td><td></td><td></td><td></td><td></td><td></td><td class="s">$perlGDModuleFound = 0;</td></tr>
<tr><td class="h">63</td><td></td><td></td><td></td><td></td><td></td><td class="s">$perlPOSIXModuleFound = 0;</td></tr>
<tr><td class="h">64</td><td colspan="6"></td></tr><tr><td class="h">65</td><td></td><td></td><td></td><td></td><td></td><td class="s"># =========================</td></tr>
<tr><td class="h">66</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub initPlugin</td></tr>
<tr><td class="h">67</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">68</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--subroutine.html#L68">1</a></div></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;( my $topic, my $web, my $user, $installWeb ) = @_;</td></tr>
<tr><td class="h">69</td><td colspan="6"></td></tr><tr><td class="h">70</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# check for Plugins.pm versions</td></tr>
<tr><td class="h">71</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L71">50</a></div></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $TWiki::Plugins::VERSION &lt; 1 ) {</td></tr>
<tr><td class="h">72</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;TWiki::Func::writeWarning( &quot;Version mismatch between ChartPlugin and Plugins.pm&quot; );</td></tr>
<tr><td class="h">73</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">74</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">75</td><td colspan="6"></td></tr><tr><td class="h">76</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get plugin debug flag</td></tr>
<tr><td class="h">77</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L77">50</a></div></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$debug = &amp;TWiki::Func::getPreferencesFlag( &quot;CHARTPLUGIN_DEBUG&quot; ) || 0;</td></tr>
<tr><td class="h">78</td><td colspan="6"></td></tr><tr><td class="h">79</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L79">50</a></div></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&amp;TWiki::Func::writeDebug( &quot;- TWiki::Plugins::ChartPlugin::initPlugin($web.$topic) is OK&quot; ) if $debug;</td></tr>
<tr><td class="h">80</td><td colspan="6"></td></tr><tr><td class="h">81</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Mark that we are not fully initialized yet.  Only get the default</td></tr>
<tr><td class="h">82</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# values from the plugin topic page iff a CHART is found in a topic</td></tr>
<tr><td class="h">83</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$pluginInitialized = 0;</td></tr>
<tr><td class="h">84</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">85</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">86</td><td colspan="6"></td></tr><tr><td class="h">87</td><td></td><td></td><td></td><td></td><td></td><td class="s"># =========================</td></tr>
<tr><td class="h">88</td><td colspan="6"></td></tr><tr><td class="h">89</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Initialize all default values from the plugin topic page.</td></tr>
<tr><td class="h">90</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _init_defaults</td></tr>
<tr><td class="h">91</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">92</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--subroutine.html#L92">1</a></div></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;eval {</td></tr>
<tr><td class="h">93</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require Exporter;</td></tr>
<tr><td class="h">94</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$perlGDModuleFound = require GD;</td></tr>
<tr><td class="h">95</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$perlPOSIXModuleFound = require POSIX;</td></tr>
<tr><td class="h">96</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If the GD or POSIX modules are not found, then there is no use in</td></tr>
<tr><td class="h">97</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# including any of the following.</td></tr>
<tr><td class="h">98</td><td><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L98">50</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L98">33</a></div></td><td></td><td><div>122</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($perlGDModuleFound &amp;&amp; $perlPOSIXModuleFound) {</td></tr>
<tr><td class="h">99</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $libsFound = &quot;&quot;;</td></tr>
<tr><td class="h">100</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eval {</td></tr>
<tr><td class="h">101</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$libsFound = require TWiki::Plugins::ChartPlugin::Chart;</td></tr>
<tr><td class="h">102</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require TWiki::Plugins::ChartPlugin::Parameters;</td></tr>
<tr><td class="h">103</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require TWiki::Plugins::ChartPlugin::Table;</td></tr>
<tr><td class="h">104</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">105</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L105">50</a></div></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $libsFound ) {</td></tr>
<tr><td class="h">106</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Could not find ChartPlugin utility libs possibly because</td></tr>
<tr><td class="h">107</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# of relative use lib dir and chdir after initialization.</td></tr>
<tr><td class="h">108</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Try again with absolute TWiki lib dir path</td></tr>
<tr><td class="h">109</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eval {</td></tr>
<tr><td class="h">110</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $libDir = TWiki::getTWikiLibDir();</td></tr>
<tr><td class="h">111</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$libDir =~ /(.*)/;</td></tr>
<tr><td class="h">112</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$libDir = $1;       # untaint</td></tr>
<tr><td class="h">113</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require &quot;$libDir/TWiki/Plugins/ChartPlugin/Chart.pm&quot;;</td></tr>
<tr><td class="h">114</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require &quot;$libDir/TWiki/Plugins/ChartPlugin/Parameters.pm&quot;;</td></tr>
<tr><td class="h">115</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require &quot;$libDir/TWiki/Plugins/ChartPlugin/Table.pm&quot;;</td></tr>
<tr><td class="h">116</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">117</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">118</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@TWiki::Plugins::ISA = qw(</td></tr>
<tr><td class="h">119</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TWiki::Plugins::ChartPlugin::Chart</td></tr>
<tr><td class="h">120</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TWiki::Plugins::ChartPlugin::Parameters</td></tr>
<tr><td class="h">121</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TWiki::Plugins::ChartPlugin::Table</td></tr>
<tr><td class="h">122</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">123</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">124</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">125</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get default chart type</td></tr>
<tr><td class="h">126</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L126">50</a></div></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$defaultType = &amp;TWiki::Func::getPreferencesValue( &quot;CHARTPLUGIN_TYPE&quot; ) || &#39;line&#39;;</td></tr>
<tr><td class="h">127</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get default chart values</td></tr>
<tr><td class="h">128</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L128">50</a></div></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$defaultWidth = &amp;TWiki::Func::getPreferencesValue( &quot;CHARTPLUGIN_WIDTH&quot; ) || 60;</td></tr>
<tr><td class="h">129</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L129">50</a></div></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$defaultHeight = &amp;TWiki::Func::getPreferencesValue( &quot;CHARTPLUGIN_HEIGHT&quot; ) || 16;</td></tr>
<tr><td class="h">130</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L130">50</a></div></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $defaultAreaColors = &amp;TWiki::Func::getPreferencesValue( &quot;CHARTPLUGIN_AREA_COLORS&quot; )</td></tr>
<tr><td class="h">131</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| &quot;#FF0000 #FFFF00 #00FF00&quot;;</td></tr>
<tr><td class="h">132</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;@defaultAreaColors = split(/[\s,]+/, $defaultAreaColors);</td></tr>
<tr><td class="h">133</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L133">50</a></div></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $defaultLineColors = &amp;TWiki::Func::getPreferencesValue( &quot;CHARTPLUGIN_LINE_COLORS&quot; )</td></tr>
<tr><td class="h">134</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| &quot;#FFFF00 #FF00FF #00FFFF&quot;;</td></tr>
<tr><td class="h">135</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;@defaultLineColors = split(/[\s,]+/, $defaultLineColors);</td></tr>
<tr><td class="h">136</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get default chart bgcolor</td></tr>
<tr><td class="h">137</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L137">50</a></div></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$defaultBGcolor = &amp;TWiki::Func::getPreferencesValue( &quot;CHARTPLUGIN_BGCOLOR&quot; ) || &#39;#FFFFFF #FFFFFF&#39;;</td></tr>
<tr><td class="h">138</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get default number of Y axis grids</td></tr>
<tr><td class="h">139</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L139">50</a></div></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$defaultNumYGrids = &amp;TWiki::Func::getPreferencesValue( &quot;CHARTPLUGIN_NUMYGRIDS&quot; ) || 10;</td></tr>
<tr><td class="h">140</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get default value to use if there is no data seen in the table</td></tr>
<tr><td class="h">141</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$defaultDataValue = &amp;TWiki::Func::getPreferencesValue( &quot;CHARTPLUGIN_DEFAULTDATA&quot; );</td></tr>
<tr><td class="h">142</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get default value for the scale (linear/semilog)</td></tr>
<tr><td class="h">143</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$defaultScale = &amp;TWiki::Func::getPreferencesValue( &quot;CHARTPLUGIN_SCALE&quot; );</td></tr>
<tr><td class="h">144</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get default grid color.</td></tr>
<tr><td class="h">145</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L145">50</a></div></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$defaultGridColor = &amp;TWiki::Func::getPreferencesValue( &quot;CHARTPLUGIN_GRIDCOLOR&quot; ) || &#39;#000000&#39;;</td></tr>
<tr><td class="h">146</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get default value for the size, in pixels, of drawn data points</td></tr>
<tr><td class="h">147</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L147">50</a></div></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$defaultPointSize = &amp;TWiki::Func::getPreferencesValue( &quot;CHARTPLUGIN_POINTSIZE&quot; ) || 2;</td></tr>
<tr><td class="h">148</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get default value for the width, in pixels, of drawn lines</td></tr>
<tr><td class="h">149</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L149">50</a></div></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$defaultLineWidth = &amp;TWiki::Func::getPreferencesValue( &quot;CHARTPLUGIN_LINEWIDTH&quot; ) || 3;</td></tr>
<tr><td class="h">150</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get default value for the leading space before the first bar.</td></tr>
<tr><td class="h">151</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L151">50</a></div></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$defaultBarLeadingSpace = &amp;TWiki::Func::getPreferencesValue( &quot;CHARTPLUGIN_BARLEADINGSPACE&quot; ) || 0;</td></tr>
<tr><td class="h">152</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get default value for the trailing space after the last bar.</td></tr>
<tr><td class="h">153</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L153">50</a></div></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$defaultBarTrailingSpace = &amp;TWiki::Func::getPreferencesValue( &quot;CHARTPLUGIN_BARTRAILINGSPACE&quot; ) || 0;</td></tr>
<tr><td class="h">154</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get default value for the space between bars.</td></tr>
<tr><td class="h">155</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L155">50</a></div></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$defaultBarSpace = &amp;TWiki::Func::getPreferencesValue( &quot;CHARTPLUGIN_BARSPACE&quot; ) || 0;</td></tr>
<tr><td class="h">156</td><td colspan="6"></td></tr><tr><td class="h">157</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$pluginInitialized = 1;</td></tr>
<tr><td class="h">158</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">159</td><td colspan="6"></td></tr><tr><td class="h">160</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Object constructor for creating a ChartPlugin Perl object.  The object is</td></tr>
<tr><td class="h">161</td><td></td><td></td><td></td><td></td><td></td><td class="s"># initialized with the current web.topic.</td></tr>
<tr><td class="h">162</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub ChartPlugin</td></tr>
<tr><td class="h">163</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">164</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--subroutine.html#L164">1</a></div></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($currentTopic, $currentWeb, $currentTopicContents) = @_;</td></tr>
<tr><td class="h">165</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = {};</td></tr>
<tr><td class="h">166</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;bless $this;</td></tr>
<tr><td class="h">167</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$$this{&quot;CURRENT_TOPIC&quot;} = $currentTopic;</td></tr>
<tr><td class="h">168</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$$this{&quot;CURRENT_WEB&quot;} = $currentWeb;</td></tr>
<tr><td class="h">169</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$$this{&quot;CURRENT_TOPICONTENTS&quot;} = $currentTopicContents;</td></tr>
<tr><td class="h">170</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $this;</td></tr>
<tr><td class="h">171</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">172</td><td colspan="6"></td></tr><tr><td class="h">173</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Setter for storing the Table object</td></tr>
<tr><td class="h">174</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--subroutine.html#L174">10</a></div></td><td><div>45</div><div>38</div></td><td class="s">sub _setTables { my ($this, $table) = @_; $$this{&quot;TABLES&quot;} = $table; }</td></tr>
<tr><td class="h">175</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Getter for Table object</td></tr>
<tr><td class="h">176</td><td><div class="c3">60</div><div class="c3">60</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--subroutine.html#L176">60</a></div></td><td><div>191</div><div>340</div></td><td class="s">sub _tables { my ($this) = @_; return $$this{&quot;TABLES&quot;}; }</td></tr>
<tr><td class="h">177</td><td colspan="6"></td></tr><tr><td class="h">178</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Setter for storing the Parameters object</td></tr>
<tr><td class="h">179</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _setParameters</td></tr>
<tr><td class="h">180</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">181</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--subroutine.html#L181">10</a></div></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($this, $args) = @_;</td></tr>
<tr><td class="h">182</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>67</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$$this{&quot;PARAMETERS&quot;} = TWiki::Plugins::ChartPlugin::Parameters-&gt;new($args);</td></tr>
<tr><td class="h">183</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">184</td><td colspan="6"></td></tr><tr><td class="h">185</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Getter for Parameters object</td></tr>
<tr><td class="h">186</td><td><div class="c3">340</div><div class="c3">340</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--subroutine.html#L186">340</a></div></td><td><div>1078</div><div>1756</div></td><td class="s">sub _Parameters { my ($this) = @_; return $$this{&quot;PARAMETERS&quot;}; }</td></tr>
<tr><td class="h">187</td><td colspan="6"></td></tr><tr><td class="h">188</td><td></td><td></td><td></td><td></td><td></td><td class="s"># This routine sets the specified web.topic as the location from where to</td></tr>
<tr><td class="h">189</td><td></td><td></td><td></td><td></td><td></td><td class="s"># get the table information.  If the specified web.topic happen to be the</td></tr>
<tr><td class="h">190</td><td></td><td></td><td></td><td></td><td></td><td class="s"># same as the web.topic from which the %CHART% was found, then the</td></tr>
<tr><td class="h">191</td><td></td><td></td><td></td><td></td><td></td><td class="s"># web.topic contents is already part of the ChartPlugin object so there is</td></tr>
<tr><td class="h">192</td><td></td><td></td><td></td><td></td><td></td><td class="s"># nothing to do.  Otherwise, this routine will read in the specified</td></tr>
<tr><td class="h">193</td><td></td><td></td><td></td><td></td><td></td><td class="s"># web.topic getting its contents and using that as the source to parse out</td></tr>
<tr><td class="h">194</td><td></td><td></td><td></td><td></td><td></td><td class="s"># table information.</td></tr>
<tr><td class="h">195</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _setTopicContents</td></tr>
<tr><td class="h">196</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">197</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--subroutine.html#L197">10</a></div></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($this, $inWeb, $inTopic) = @_;</td></tr>
<tr><td class="h">198</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $topicContents;</td></tr>
<tr><td class="h">199</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If $inWeb and $inTopic match the current web/topic, then we already</td></tr>
<tr><td class="h">200</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# have the topic contents in the object so there is nothing to do.</td></tr>
<tr><td class="h">201</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Otherwise, we need to open the specified web/topic and read in its</td></tr>
<tr><td class="h">202</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# contents.</td></tr>
<tr><td class="h">203</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L203">50</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L203">33</a></div></td><td></td><td><div>109</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( ($inWeb eq $$this{&quot;CURRENT_WEB&quot;}) &amp;&amp; ($inTopic eq $$this{&quot;CURRENT_TOPIC&quot;}) ) {</td></tr>
<tr><td class="h">204</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>275</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$topicContents = $$this{&quot;CURRENT_TOPICONTENTS&quot;};</td></tr>
<tr><td class="h">205</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">206</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# A difference, so read in the topic.</td></tr>
<tr><td class="h">207</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(my $meta, $topicContents) = TWiki::Func::readTopic( $inWeb, $inTopic );</td></tr>
<tr><td class="h">208</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Check to make sure the web.topic actually exists.  If not, return</td></tr>
<tr><td class="h">209</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# undef so the caller can catch the error.</td></tr>
<tr><td class="h">210</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L210">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return undef if ($topicContents eq &quot;&quot;);</td></tr>
<tr><td class="h">211</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$topicContents = TWiki::Func::expandCommonVariables($topicContents, $inTopic, $inWeb);</td></tr>
<tr><td class="h">212</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">213</td><td colspan="6"></td></tr><tr><td class="h">214</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Lets parse the specified topic contents looking for tables.</td></tr>
<tr><td class="h">215</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>72</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_setTables(TWiki::Plugins::ChartPlugin::Table-&gt;new($topicContents));</td></tr>
<tr><td class="h">216</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>4063</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">217</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">218</td><td colspan="6"></td></tr><tr><td class="h">219</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Return the maximum value of the two specified numbers.</td></tr>
<tr><td class="h">220</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _max</td></tr>
<tr><td class="h">221</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">222</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--subroutine.html#L222">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ( $v1, $v2 ) = @_;</td></tr>
<tr><td class="h">223</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L223">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $v1 if( $v1 &gt; $v2 );</td></tr>
<tr><td class="h">224</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $v2;</td></tr>
<tr><td class="h">225</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">226</td><td colspan="6"></td></tr><tr><td class="h">227</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Return the minimum value of the two specified numbers.</td></tr>
<tr><td class="h">228</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _min</td></tr>
<tr><td class="h">229</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">230</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--subroutine.html#L230">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ( $v1, $v2 ) = @_;</td></tr>
<tr><td class="h">231</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L231">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $v1 if( $v1 &lt; $v2 );</td></tr>
<tr><td class="h">232</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $v2;</td></tr>
<tr><td class="h">233</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">234</td><td colspan="6"></td></tr><tr><td class="h">235</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Generate the file name in which the graphic file will be placed.  Also</td></tr>
<tr><td class="h">236</td><td></td><td></td><td></td><td></td><td></td><td class="s"># make sure that the directory in which the graphic file will be placed</td></tr>
<tr><td class="h">237</td><td></td><td></td><td></td><td></td><td></td><td class="s"># exists.  If not, create it.</td></tr>
<tr><td class="h">238</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _make_filename</td></tr>
<tr><td class="h">239</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">240</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--subroutine.html#L240">10</a></div></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ( $type, $name, $topic, $web ) = @_;</td></tr>
<tr><td class="h">241</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Generate the file name to be created</td></tr>
<tr><td class="h">242</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $fullname;</td></tr>
<tr><td class="h">243</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If GD version 1.19 or earlier, then create gif files else png files.</td></tr>
<tr><td class="h">244</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L244">50</a></div></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $GD::VERSION &gt; 1.19 ) {</td></tr>
<tr><td class="h">245</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$fullname = &quot;_ChartPlugin_${type}_${name}.png&quot;;</td></tr>
<tr><td class="h">246</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">247</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$fullname = &quot;_ChartPlugin_${type}_${name}.gif&quot;;</td></tr>
<tr><td class="h">248</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">249</td><td colspan="6"></td></tr><tr><td class="h">250</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# before save, create directories if they don&#39;t exist.</td></tr>
<tr><td class="h">251</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If the top level &quot;pub/$web&quot; directory doesn&#39;t exist, create it.</td></tr>
<tr><td class="h">252</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dir = TWiki::Func::getPubDir() . &quot;/$web&quot;;</td></tr>
<tr><td class="h">253</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L253">50</a></div></td><td></td><td></td><td><div>192</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( ! -e &quot;$dir&quot; ) {</td></tr>
<tr><td class="h">254</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;umask( 002 );</td></tr>
<tr><td class="h">255</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkdir( $dir, 0775 );</td></tr>
<tr><td class="h">256</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">257</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If the top level &quot;pub/$web/$topic&quot; directory doesn&#39;t exist, create</td></tr>
<tr><td class="h">258</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# it.</td></tr>
<tr><td class="h">259</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tempPath = &quot;$dir/$topic&quot;;</td></tr>
<tr><td class="h">260</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L260">50</a></div></td><td></td><td></td><td><div>89</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( ! -e &quot;$tempPath&quot; ) {</td></tr>
<tr><td class="h">261</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;umask( 002 );</td></tr>
<tr><td class="h">262</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkdir( $tempPath, 0775 );</td></tr>
<tr><td class="h">263</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">264</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Return both the directory and the filename</td></tr>
<tr><td class="h">265</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ($tempPath, $fullname);</td></tr>
<tr><td class="h">266</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">267</td><td colspan="6"></td></tr><tr><td class="h">268</td><td></td><td></td><td></td><td></td><td></td><td class="s"># This routine returns an red colored error message.</td></tr>
<tr><td class="h">269</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _make_error</td></tr>
<tr><td class="h">270</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">271</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--subroutine.html#L271">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ( $msg ) = @_;</td></tr>
<tr><td class="h">272</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &quot;&lt;font color=red&gt;ChartPlugin error: $msg&lt;/font&gt;&quot;;</td></tr>
<tr><td class="h">273</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">274</td><td colspan="6"></td></tr><tr><td class="h">275</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Actually construct the chart by parsing out each of the %CHART%</td></tr>
<tr><td class="h">276</td><td></td><td></td><td></td><td></td><td></td><td class="s"># parameters, putting the parameters into the chart object, and then</td></tr>
<tr><td class="h">277</td><td></td><td></td><td></td><td></td><td></td><td class="s"># creating the chart.</td></tr>
<tr><td class="h">278</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _makeChart</td></tr>
<tr><td class="h">279</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">280</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--subroutine.html#L280">10</a></div></td><td><div>81</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ( $this, $args, $topic, $web ) = @_;</td></tr>
<tr><td class="h">281</td><td colspan="6"></td></tr><tr><td class="h">282</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Check to see if the GD module was found.  If not, then create an</td></tr>
<tr><td class="h">283</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# error message to display back to the user.</td></tr>
<tr><td class="h">284</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L284">50</a></div></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( ! $perlGDModuleFound ) {</td></tr>
<tr><td class="h">285</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# It appears that the GD library wasn&#39;t found so we return a</td></tr>
<tr><td class="h">286</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# different type of error that is just plain text.</td></tr>
<tr><td class="h">287</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L287">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;Required Perl module &#39;GD&#39; not found&quot;) if (! $perlGDModuleFound );</td></tr>
<tr><td class="h">288</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">289</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Set/parse the %CHART% parameters putting into the ChartPlugin object</td></tr>
<tr><td class="h">290</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_setParameters ($args);</td></tr>
<tr><td class="h">291</td><td colspan="6"></td></tr><tr><td class="h">292</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Make a chart object in which we will place user specified parameters</td></tr>
<tr><td class="h">293</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>74</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $chart = TWiki::Plugins::ChartPlugin::Chart-&gt;new();</td></tr>
<tr><td class="h">294</td><td colspan="6"></td></tr><tr><td class="h">295</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;type&#39; is available.  This is a required</td></tr>
<tr><td class="h">296</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# parameter.  If it is missing, then generate an error message.</td></tr>
<tr><td class="h">297</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $type = $this-&gt;_Parameters-&gt;getParameter( &quot;type&quot;, $defaultType);</td></tr>
<tr><td class="h">298</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L298">50</a></div></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;parameter *type* must be specified&quot;) if( ! defined $type );</td></tr>
<tr><td class="h">299</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>65</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @unknownTypes = grep(!/area|line|bar|arealine|combo|scatter/, ($type));</td></tr>
<tr><td class="h">300</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Check for a valid type</td></tr>
<tr><td class="h">301</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L301">50</a></div></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;Invalid value of *$type* for parameter *type* &quot;) if (@unknownTypes);</td></tr>
<tr><td class="h">302</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setType($type);</td></tr>
<tr><td class="h">303</td><td colspan="6"></td></tr><tr><td class="h">304</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;subtype&#39; (old name &#39;datatype&#39;) is available.</td></tr>
<tr><td class="h">305</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dataType = $this-&gt;_Parameters-&gt;getParameter( &quot;datatype&quot;, undef);</td></tr>
<tr><td class="h">306</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $subType = $this-&gt;_Parameters-&gt;getParameter( &quot;subtype&quot;, undef);</td></tr>
<tr><td class="h">307</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L307">50</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L307">33</a></div></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;paramters *datatype* and *subtype* can&#39;t both be specified&quot;) if (defined $dataType &amp;&amp; defined $subType);</td></tr>
<tr><td class="h">308</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L308">50</a></div></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$subType = $dataType if (defined $dataType);</td></tr>
<tr><td class="h">309</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L309">50</a></div></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (defined $subType) {</td></tr>
<tr><td class="h">310</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @subTypes = split(/[\s,]+/, $subType);</td></tr>
<tr><td class="h">311</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Check for valid subtypes</td></tr>
<tr><td class="h">312</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @unknownSubTypes = grep(!/area|line|point|pline|scatter|bar/, @subTypes);</td></tr>
<tr><td class="h">313</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L313">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;unknown subtypes: &quot; . join(&quot;, &quot;, @unknownSubTypes)) if (@unknownSubTypes);</td></tr>
<tr><td class="h">314</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Now check to make sure that the subtypes specified are valid for the</td></tr>
<tr><td class="h">315</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# specified type.</td></tr>
<tr><td class="h">316</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;### Check &#39;line&#39; type</td></tr>
<tr><td class="h">317</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L317">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($type eq &quot;line&quot;) {</td></tr>
<tr><td class="h">318</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@unknownSubTypes = grep(!/line|point|pline/, @subTypes);</td></tr>
<tr><td class="h">319</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L319">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;unsupported subtypes: &quot; . join(&quot;, &quot;, @unknownSubTypes) . &quot; for type line&quot;) if (@unknownSubTypes);</td></tr>
<tr><td class="h">320</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">321</td><td colspan="6"></td></tr><tr><td class="h">322</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;### Check &#39;area&#39; type</td></tr>
<tr><td class="h">323</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L323">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($type eq &quot;area&quot;) {</td></tr>
<tr><td class="h">324</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@unknownSubTypes = grep(!/area/, @subTypes);</td></tr>
<tr><td class="h">325</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L325">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;unsupported subtypes: &quot; . join(&quot;, &quot;, @unknownSubTypes) . &quot; for type area&quot;) if (@unknownSubTypes);</td></tr>
<tr><td class="h">326</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">327</td><td colspan="6"></td></tr><tr><td class="h">328</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;### Check &#39;scatter&#39; type</td></tr>
<tr><td class="h">329</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L329">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($type eq &quot;scatter&quot;) {</td></tr>
<tr><td class="h">330</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@unknownSubTypes = grep(!/area|line|point|pline|bar/, @subTypes);</td></tr>
<tr><td class="h">331</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L331">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;unsupported subtypes: &quot; . join(&quot;, &quot;, @unknownSubTypes) . &quot; for type scatter&quot;) if (@unknownSubTypes);</td></tr>
<tr><td class="h">332</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">333</td><td colspan="6"></td></tr><tr><td class="h">334</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;### Check &#39;combo&#39; type</td></tr>
<tr><td class="h">335</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L335">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($type eq &quot;combo&quot;) {</td></tr>
<tr><td class="h">336</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@unknownSubTypes = grep(!/area|line|point|pline|bar/, @subTypes);</td></tr>
<tr><td class="h">337</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L337">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;unsupported subtypes: &quot; . join(&quot;, &quot;, @unknownSubTypes) . &quot; for type combo&quot;) if (@unknownSubTypes);</td></tr>
<tr><td class="h">338</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">339</td><td colspan="6"></td></tr><tr><td class="h">340</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# All OK so set the subtype.</td></tr>
<tr><td class="h">341</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setSubTypes(@subTypes);</td></tr>
<tr><td class="h">342</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">343</td><td colspan="6"></td></tr><tr><td class="h">344</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;scale&#39; is available.</td></tr>
<tr><td class="h">345</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $scale = $this-&gt;_Parameters-&gt;getParameter( &quot;scale&quot;, $defaultScale);</td></tr>
<tr><td class="h">346</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L346">50</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L346">25</a></div></td><td></td><td><div>118</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($scale ne &quot;base10&quot; and $scale ne &quot;linear&quot; and $scale ne &quot;semilog&quot;) {</td></tr>
<tr><td class="h">347</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;Invalid value of *$scale* for parameter *scale* &quot;);</td></tr>
<tr><td class="h">348</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">349</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setScale($scale);</td></tr>
<tr><td class="h">350</td><td colspan="6"></td></tr><tr><td class="h">351</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;name&#39; is available.  This is a required</td></tr>
<tr><td class="h">352</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# parameter.  If it is missing, then generate an error message.</td></tr>
<tr><td class="h">353</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $name = $this-&gt;_Parameters-&gt;getParameter( &quot;name&quot;, undef);</td></tr>
<tr><td class="h">354</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L354">50</a></div></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;parameter *name* must be specified&quot;) if( ! defined $name );</td></tr>
<tr><td class="h">355</td><td colspan="6"></td></tr><tr><td class="h">356</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;web&#39; is available.  If not, then default to</td></tr>
<tr><td class="h">357</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# looking for tables in the current web.</td></tr>
<tr><td class="h">358</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $inWeb = $this-&gt;_Parameters-&gt;getParameter( &quot;web&quot;, $web);</td></tr>
<tr><td class="h">359</td><td colspan="6"></td></tr><tr><td class="h">360</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;topic&#39; is available.  If not, then default to</td></tr>
<tr><td class="h">361</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# looking for tables in the current topic.</td></tr>
<tr><td class="h">362</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $inTopic = $this-&gt;_Parameters-&gt;getParameter( &quot;topic&quot;, $topic);</td></tr>
<tr><td class="h">363</td><td colspan="6"></td></tr><tr><td class="h">364</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Before we parse any further parameters, lets get the contents of the</td></tr>
<tr><td class="h">365</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# specified web/topic.</td></tr>
<tr><td class="h">366</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L366">50</a></div></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (! $this-&gt;_setTopicContents($inWeb, $inTopic)) {</td></tr>
<tr><td class="h">367</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;Error retrieving TWiki topic $inWeb&lt;nop&gt;.$inTopic&quot;);</td></tr>
<tr><td class="h">368</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">369</td><td colspan="6"></td></tr><tr><td class="h">370</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Determine which table the user wants to chart</td></tr>
<tr><td class="h">371</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tableName = $this-&gt;_Parameters-&gt;getParameter( &quot;table&quot;, 1);</td></tr>
<tr><td class="h">372</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Verify that the table name is valid.</td></tr>
<tr><td class="h">373</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L373">50</a></div></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (! $this-&gt;_tables-&gt;checkTableExists($tableName) ) {</td></tr>
<tr><td class="h">374</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;parameter *table* is not valid table; the specified table &#39;$tableName&#39; does not exist.&quot;);</td></tr>
<tr><td class="h">375</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">376</td><td colspan="6"></td></tr><tr><td class="h">377</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;title&#39; is available.</td></tr>
<tr><td class="h">378</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setTitle($this-&gt;_Parameters-&gt;getParameter( &quot;title&quot;, undef));</td></tr>
<tr><td class="h">379</td><td colspan="6"></td></tr><tr><td class="h">380</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;xlabel&#39; is available.</td></tr>
<tr><td class="h">381</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setXlabel($this-&gt;_Parameters-&gt;getParameter( &quot;xlabel&quot;, undef));</td></tr>
<tr><td class="h">382</td><td colspan="6"></td></tr><tr><td class="h">383</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;ylabel&#39; is available.</td></tr>
<tr><td class="h">384</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setYlabel($this-&gt;_Parameters-&gt;getParameter( &quot;ylabel&quot;, undef));</td></tr>
<tr><td class="h">385</td><td colspan="6"></td></tr><tr><td class="h">386</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;data&#39; is available.  This is a required</td></tr>
<tr><td class="h">387</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# parameter.  If it is missing, then generate an error message.</td></tr>
<tr><td class="h">388</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $data = $this-&gt;_Parameters-&gt;getParameter( &quot;data&quot;, undef);</td></tr>
<tr><td class="h">389</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L389">50</a></div></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;parameter *data* must be specified&quot;) if( ! defined $data );</td></tr>
<tr><td class="h">390</td><td colspan="6"></td></tr><tr><td class="h">391</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;xaxis&#39; is available.</td></tr>
<tr><td class="h">392</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xAxis = $this-&gt;_Parameters-&gt;getParameter( &quot;xaxis&quot;, undef);</td></tr>
<tr><td class="h">393</td><td colspan="6"></td></tr><tr><td class="h">394</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;yaxis&#39; is available.</td></tr>
<tr><td class="h">395</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $yAxis = $this-&gt;_Parameters-&gt;getParameter( &quot;yaxis&quot;, &quot;off&quot;);</td></tr>
<tr><td class="h">396</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setYaxis($yAxis);</td></tr>
<tr><td class="h">397</td><td colspan="6"></td></tr><tr><td class="h">398</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;ytic&#39; is available.</td></tr>
<tr><td class="h">399</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $yTic = $this-&gt;_Parameters-&gt;getParameter( &quot;ytics&quot;, -1);</td></tr>
<tr><td class="h">400</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setNumYTics($yTic);</td></tr>
<tr><td class="h">401</td><td colspan="6"></td></tr><tr><td class="h">402</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;xaxisangle&#39; is available.</td></tr>
<tr><td class="h">403</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xaxisangle = $this-&gt;_Parameters-&gt;getParameter( &quot;xaxisangle&quot;, 0);</td></tr>
<tr><td class="h">404</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setXaxisAngle($xaxisangle);</td></tr>
<tr><td class="h">405</td><td colspan="6"></td></tr><tr><td class="h">406</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;ymin&#39; is available.</td></tr>
<tr><td class="h">407</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $yMin = $this-&gt;_Parameters-&gt;getParameter( &quot;ymin&quot;, undef);</td></tr>
<tr><td class="h">408</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L408">50</a></div></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (defined $yMin) {</td></tr>
<tr><td class="h">409</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L409">50</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L409">33</a></div></td><td></td><td><div>69</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($scale eq &quot;semilog&quot; &amp;&amp; $yMin &lt;= 0) {</td></tr>
<tr><td class="h">410</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;user set ymin=$yMin is &amp;lt;= 0 which is not valid when scale=semilog&quot;);</td></tr>
<tr><td class="h">411</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">412</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">413</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setYmin( $yMin );</td></tr>
<tr><td class="h">414</td><td colspan="6"></td></tr><tr><td class="h">415</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;ymax&#39; is available.</td></tr>
<tr><td class="h">416</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $yMax = $this-&gt;_Parameters-&gt;getParameter( &quot;ymax&quot;, undef);</td></tr>
<tr><td class="h">417</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L417">50</a></div></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (defined $yMax) {</td></tr>
<tr><td class="h">418</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L418">0</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L418">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($scale eq &quot;semilog&quot; &amp;&amp; $yMax &lt;= 0) {</td></tr>
<tr><td class="h">419</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;user set ymax=$yMax is &amp;lt;= 0 which is not valid when scale=semilog&quot;);</td></tr>
<tr><td class="h">420</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">421</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">422</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setYmax( $yMax );</td></tr>
<tr><td class="h">423</td><td colspan="6"></td></tr><tr><td class="h">424</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;numygrids&#39; is available.</td></tr>
<tr><td class="h">425</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setNumYGrids( $this-&gt;_Parameters-&gt;getParameter( &quot;numygrids&quot;, $defaultNumYGrids) );</td></tr>
<tr><td class="h">426</td><td colspan="6"></td></tr><tr><td class="h">427</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;numxgrids&#39; is available.</td></tr>
<tr><td class="h">428</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $numxgrids = $this-&gt;_Parameters-&gt;getParameter( &quot;numxgrids&quot;, 10);</td></tr>
<tr><td class="h">429</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setNumXGrids($numxgrids);</td></tr>
<tr><td class="h">430</td><td colspan="6"></td></tr><tr><td class="h">431</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;xgrid&#39; is available.</td></tr>
<tr><td class="h">432</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xGrid = $this-&gt;_Parameters-&gt;getParameter( &quot;xgrid&quot;, &quot;dot&quot;);</td></tr>
<tr><td class="h">433</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setXgrid($xGrid);</td></tr>
<tr><td class="h">434</td><td colspan="6"></td></tr><tr><td class="h">435</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;ygrid&#39; is available.</td></tr>
<tr><td class="h">436</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $yGrid = $this-&gt;_Parameters-&gt;getParameter( &quot;ygrid&quot;, &quot;dot&quot;);</td></tr>
<tr><td class="h">437</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setYgrid($yGrid);</td></tr>
<tr><td class="h">438</td><td colspan="6"></td></tr><tr><td class="h">439</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;datalabel&#39; is available.</td></tr>
<tr><td class="h">440</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dataLabels = $this-&gt;_Parameters-&gt;getParameter( &quot;datalabel&quot;, &quot;off&quot;);</td></tr>
<tr><td class="h">441</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L441">50</a></div></td><td></td><td></td><td><div>100</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setDataLabels(split(/[\s,]+/, $dataLabels)) if (defined $dataLabels);</td></tr>
<tr><td class="h">442</td><td colspan="6"></td></tr><tr><td class="h">443</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;legend&#39; is available.</td></tr>
<tr><td class="h">444</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $legend = $this-&gt;_Parameters-&gt;getParameter( &quot;legend&quot;, undef);</td></tr>
<tr><td class="h">445</td><td colspan="6"></td></tr><tr><td class="h">446</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get the chart width and height</td></tr>
<tr><td class="h">447</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setImageWidth( $this-&gt;_Parameters-&gt;getParameter( &quot;width&quot;, $defaultWidth) );</td></tr>
<tr><td class="h">448</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setImageHeight( $this-&gt;_Parameters-&gt;getParameter( &quot;height&quot;, $defaultHeight) );</td></tr>
<tr><td class="h">449</td><td colspan="6"></td></tr><tr><td class="h">450</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get the chart IMG &#39;alt&#39; text.</td></tr>
<tr><td class="h">451</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $alt = $this-&gt;_Parameters-&gt;getParameter( &quot;alt&quot;, &quot;&quot;);</td></tr>
<tr><td class="h">452</td><td colspan="6"></td></tr><tr><td class="h">453</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get the chart &#39;bgcolor&#39; color.</td></tr>
<tr><td class="h">454</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $bgcolor = $this-&gt;_Parameters-&gt;getParameter( &quot;bgcolor&quot;, $defaultBGcolor);</td></tr>
<tr><td class="h">455</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>87</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setBGcolor(split(/[\s,]+/, $bgcolor));</td></tr>
<tr><td class="h">456</td><td colspan="6"></td></tr><tr><td class="h">457</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Set line/area colors.  If the parameter &#39;colors&#39; is defined, then the</td></tr>
<tr><td class="h">458</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# chart will be made with the user specified colors.  Otherwise the</td></tr>
<tr><td class="h">459</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# chart will be made with the default colors, and then it will depend</td></tr>
<tr><td class="h">460</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# on if an &#39;area&#39; or &#39;line&#39; is being drawn which will determine which</td></tr>
<tr><td class="h">461</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# set of colors to use.</td></tr>
<tr><td class="h">462</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setLineColors(@defaultLineColors);</td></tr>
<tr><td class="h">463</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>58</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setAreaColors(@defaultAreaColors);</td></tr>
<tr><td class="h">464</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;colors&#39; is available.</td></tr>
<tr><td class="h">465</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $colors = $this-&gt;_Parameters-&gt;getParameter( &quot;colors&quot;, undef);</td></tr>
<tr><td class="h">466</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L466">50</a></div></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setColors(split(/[\s,]+/, $colors)) if (defined $colors);</td></tr>
<tr><td class="h">467</td><td colspan="6"></td></tr><tr><td class="h">468</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get the chart grid  color.</td></tr>
<tr><td class="h">469</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $gridColor = $this-&gt;_Parameters-&gt;getParameter( &quot;gridcolor&quot;, $defaultGridColor);</td></tr>
<tr><td class="h">470</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>99</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setGridColor(split(/[\s,]+/, $gridColor));</td></tr>
<tr><td class="h">471</td><td colspan="6"></td></tr><tr><td class="h">472</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if the parameter &#39;defaultdata&#39; is available.</td></tr>
<tr><td class="h">473</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $DataValueDefault = $this-&gt;_Parameters-&gt;getParameter( &quot;defaultdata&quot;, $defaultDataValue);</td></tr>
<tr><td class="h">474</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L474">50</a></div></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$DataValueDefault = &#39;&#39; if ($DataValueDefault eq &quot;none&quot;);</td></tr>
<tr><td class="h">475</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setDefaultDataValue($DataValueDefault);</td></tr>
<tr><td class="h">476</td><td colspan="6"></td></tr><tr><td class="h">477</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get the name of the directory and filename in which to create the</td></tr>
<tr><td class="h">478</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# graphics file.</td></tr>
<tr><td class="h">479</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($dir, $filename) = _make_filename($type, $name, $topic, $web);</td></tr>
<tr><td class="h">480</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setFileDir($dir);</td></tr>
<tr><td class="h">481</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setFileName($filename);</td></tr>
<tr><td class="h">482</td><td colspan="6"></td></tr><tr><td class="h">483</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Validate the legend data making sure it only specifies a single row</td></tr>
<tr><td class="h">484</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# or a single column.</td></tr>
<tr><td class="h">485</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @legend;</td></tr>
<tr><td class="h">486</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L486">50</a></div></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($legend) {</td></tr>
<tr><td class="h">487</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $cnt = my @d = $this-&gt;_tables-&gt;getData($tableName, $legend);</td></tr>
<tr><td class="h">488</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L488">50</a></div></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($cnt &gt; 1) {</td></tr>
<tr><td class="h">489</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;parameter *legend* specifies multiple rows and columns.&quot;);</td></tr>
<tr><td class="h">490</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">491</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L491">50</a></div></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($cnt == 0) {</td></tr>
<tr><td class="h">492</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;parameter *legend* contains an invalid value &#39;$legend&#39;.&quot;);</td></tr>
<tr><td class="h">493</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">494</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td></td><td><div>29</div><div>72</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@legend = @{$d[0]};</td></tr>
<tr><td class="h">495</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setLegend(@legend);</td></tr>
<tr><td class="h">496</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">497</td><td colspan="6"></td></tr><tr><td class="h">498</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If the user specified an X axis range, then extract from the X axis</td></tr>
<tr><td class="h">499</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# data the starting and ending row/columns.  This defines whether the</td></tr>
<tr><td class="h">500</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# data is row ordered or column ordered.  If there is no X axis</td></tr>
<tr><td class="h">501</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# information specified, then assume that the data is in column order.</td></tr>
<tr><td class="h">502</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $columnOrdered = 0;</td></tr>
<tr><td class="h">503</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $rowOrdered = 0;</td></tr>
<tr><td class="h">504</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L504">50</a></div></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (defined ($xAxis)) {</td></tr>
<tr><td class="h">505</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ($xAxisRows, $xAxisColumns) = $this-&gt;_tables-&gt;getRowColumnCount($xAxis);</td></tr>
<tr><td class="h">506</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L506">50</a></div></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;parameter *xaxis* value of &#39;$xAxis&#39; is not valid&quot;) if (! defined($xAxisRows));</td></tr>
<tr><td class="h">507</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @d = $this-&gt;_tables-&gt;getData($tableName, $xAxis);</td></tr>
<tr><td class="h">508</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L508">50</a></div></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;no X axis data found in specified area of table [$xAxis]&quot;) if (! @d);</td></tr>
<tr><td class="h">509</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td></td><td><div>31</div><div>58</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @xAxis = @{$d[0]};</td></tr>
<tr><td class="h">510</td><td><div class="c3">10</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L510">100</a></div></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (abs($xAxisRows) &gt; 0) {</td></tr>
<tr><td class="h">511</td><td><div class="c3">9</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L511">50</a></div></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($xAxisColumns &gt; 0) {</td></tr>
<tr><td class="h">512</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;parameter *xaxis* specifies multiple rows and columns.&quot;);</td></tr>
<tr><td class="h">513</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">514</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$columnOrdered = 1;</td></tr>
<tr><td class="h">515</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">516</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$rowOrdered = 1;</td></tr>
<tr><td class="h">517</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">518</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setXaxis(@xAxis);</td></tr>
<tr><td class="h">519</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">520</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$columnOrdered = 1;</td></tr>
<tr><td class="h">521</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">522</td><td colspan="6"></td></tr><tr><td class="h">523</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Validate the data range as valid</td></tr>
<tr><td class="h">524</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($dataRows, $dataColumns) = $this-&gt;_tables-&gt;getRowColumnCount($data);</td></tr>
<tr><td class="h">525</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L525">50</a></div></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;parameter *data* value of &#39;$data&#39; is not valid&quot;) if (! defined($dataRows));</td></tr>
<tr><td class="h">526</td><td colspan="6"></td></tr><tr><td class="h">527</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get the actual area data.</td></tr>
<tr><td class="h">528</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @data = ();</td></tr>
<tr><td class="h">529</td><td><div class="c3">10</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L529">100</a></div></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;@data = $this-&gt;_tables-&gt;getDataRows($tableName, $data) if ($rowOrdered);</td></tr>
<tr><td class="h">530</td><td><div class="c3">10</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L530">100</a></div></td><td></td><td></td><td><div>59</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;@data = $this-&gt;_tables-&gt;getDataColumns($tableName, $data) if ($columnOrdered);</td></tr>
<tr><td class="h">531</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Validate that there is real data returned.</td></tr>
<tr><td class="h">532</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L532">50</a></div></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;no data found in specified area of table [$data]&quot;) if (! @data);</td></tr>
<tr><td class="h">533</td><td colspan="6"></td></tr><tr><td class="h">534</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$yMin = $chart-&gt;setData(@data);</td></tr>
<tr><td class="h">535</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If scale=semilog and any data is &lt;= 0, then error</td></tr>
<tr><td class="h">536</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L536">50</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--condition.html#L536">33</a></div></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($scale eq &quot;semilog&quot; &amp;&amp; $yMin &lt;= 0) {</td></tr>
<tr><td class="h">537</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;data ($yMin) &amp;lt;= 0 not valid when scale=semilog&quot;);</td></tr>
<tr><td class="h">538</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">539</td><td colspan="6"></td></tr><tr><td class="h">540</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Make sure that there are enough legends to go with all specified</td></tr>
<tr><td class="h">541</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# data sets (if legends were specified)</td></tr>
<tr><td class="h">542</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L542">50</a></div></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($legend) {</td></tr>
<tr><td class="h">543</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $numLegends = @legend;</td></tr>
<tr><td class="h">544</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $numDataSets = @data;</td></tr>
<tr><td class="h">545</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L545">50</a></div></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($numDataSets != $numLegends) {</td></tr>
<tr><td class="h">546</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;parameter *legend* contains an invalid value &#39;$legend&#39; since it specifies $numLegends legends and there are $numDataSets data sets.&quot;);</td></tr>
<tr><td class="h">547</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">548</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">549</td><td colspan="6"></td></tr><tr><td class="h">550</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Set the default point size</td></tr>
<tr><td class="h">551</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setPointSize( $this-&gt;_Parameters-&gt;getParameter( &quot;pointsize&quot;, $defaultPointSize ) );</td></tr>
<tr><td class="h">552</td><td colspan="6"></td></tr><tr><td class="h">553</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Set the default line width</td></tr>
<tr><td class="h">554</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setLineWidth( $this-&gt;_Parameters-&gt;getParameter( &quot;linewidth&quot;, $defaultLineWidth ) );</td></tr>
<tr><td class="h">555</td><td colspan="6"></td></tr><tr><td class="h">556</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Set default bar graph values</td></tr>
<tr><td class="h">557</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>58</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setBarLeadingSpace($defaultBarLeadingSpace);</td></tr>
<tr><td class="h">558</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>63</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setBarTrailingSpace($defaultBarTrailingSpace);</td></tr>
<tr><td class="h">559</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chart-&gt;setBarSpace($defaultBarSpace);</td></tr>
<tr><td class="h">560</td><td colspan="6"></td></tr><tr><td class="h">561</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Create the actual chart.</td></tr>
<tr><td class="h">562</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>65</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $err = $chart-&gt;makeChart();</td></tr>
<tr><td class="h">563</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L563">50</a></div></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _make_error(&quot;chart error: name=$name: $err&quot;) if ($err);</td></tr>
<tr><td class="h">564</td><td colspan="6"></td></tr><tr><td class="h">565</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get remaining parameters and pass to &lt;img ... /&gt;</td></tr>
<tr><td class="h">566</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $options = &quot;&quot;;</td></tr>
<tr><td class="h">567</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>59</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %parameters = $this-&gt;_Parameters-&gt;getAllParameters();</td></tr>
<tr><td class="h">568</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>59</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $k (keys %parameters) {</td></tr>
<tr><td class="h">569</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$options .= &quot;$k=\&quot;$parameters{$k}\&quot; &quot;;</td></tr>
<tr><td class="h">570</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">571</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Make a unique value to append to the image name that forces a web</td></tr>
<tr><td class="h">572</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# browser to reload the image each time the image is viewed.  This is</td></tr>
<tr><td class="h">573</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# done so changes to the values used to generate the chart, or the</td></tr>
<tr><td class="h">574</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# chart layout specifications, are seen immediately and not ignored</td></tr>
<tr><td class="h">575</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# because the browser has cached the image.  Eventually a hash value</td></tr>
<tr><td class="h">576</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# should be used such that the user&#39;s browser CAN cache the image iff</td></tr>
<tr><td class="h">577</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# none of the values/parameters used in creating the chart have changed.</td></tr>
<tr><td class="h">578</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $timestamp = time();</td></tr>
<tr><td class="h">579</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>892</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &quot;&lt;img src=\&quot;%ATTACHURL%/$filename?t=$timestamp\&quot; alt=\&quot;$alt\&quot; $options /&gt;&quot;;</td></tr>
<tr><td class="h">580</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">581</td><td colspan="6"></td></tr><tr><td class="h">582</td><td></td><td></td><td></td><td></td><td></td><td class="s"># The following is really for debugging and timing purposes and is not an</td></tr>
<tr><td class="h">583</td><td></td><td></td><td></td><td></td><td></td><td class="s"># advertised interface.  This routine basically creates a number of charts</td></tr>
<tr><td class="h">584</td><td></td><td></td><td></td><td></td><td></td><td class="s"># and (roughly) times how long it took to create them.</td></tr>
<tr><td class="h">585</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Usage: %CHART_TIMER{### &lt;parameters&gt;}%</td></tr>
<tr><td class="h">586</td><td></td><td></td><td></td><td></td><td></td><td class="s"># where ### is the number of charts to create and &lt;parameters&gt; are valid</td></tr>
<tr><td class="h">587</td><td></td><td></td><td></td><td></td><td></td><td class="s"># %CHART% parameters (&#39;name&#39; is overridden by the timer so is ignored if</td></tr>
<tr><td class="h">588</td><td></td><td></td><td></td><td></td><td></td><td class="s"># specified in &lt;parameters&gt;</td></tr>
<tr><td class="h">589</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _timeit</td></tr>
<tr><td class="h">590</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">591</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--subroutine.html#L591">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ( $this, $loops, $params, $topic, $web ) = @_;</td></tr>
<tr><td class="h">592</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $removeFiles = 0;	# Flag on whether to remove the test graphics or not</td></tr>
<tr><td class="h">593</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $start_time = time();</td></tr>
<tr><td class="h">594</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for (my $i = 0; $i &lt; $loops; $i++) {</td></tr>
<tr><td class="h">595</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $str = &quot;$params name=\&quot;timeit_$i\&quot;&quot;;</td></tr>
<tr><td class="h">596</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_makeChart( $str, $topic, $web );</td></tr>
<tr><td class="h">597</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">598</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $finish_time = time();</td></tr>
<tr><td class="h">599</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $diff = $finish_time - $start_time;</td></tr>
<tr><td class="h">600</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Remove the just created test files.</td></tr>
<tr><td class="h">601</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L601">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($removeFiles) {</td></tr>
<tr><td class="h">602</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (my $i = 0; $i &lt; $loops; $i++) {</td></tr>
<tr><td class="h">603</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ($dir, $filename) = _make_filename(&quot;area&quot;, &quot;timeit_$i&quot;, $topic, $web);</td></tr>
<tr><td class="h">604</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unlink(&quot;$dir/$filename&quot;);</td></tr>
<tr><td class="h">605</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">606</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">607</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &quot;To make $loops charts it (roughly) took $diff seconds.&lt;BR&gt;&quot;;</td></tr>
<tr><td class="h">608</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">609</td><td colspan="6"></td></tr><tr><td class="h">610</td><td colspan="6"></td></tr><tr><td class="h">611</td><td colspan="6"></td></tr><tr><td class="h">612</td><td></td><td></td><td></td><td></td><td></td><td class="s"># =========================</td></tr>
<tr><td class="h">613</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub commonTagsHandler</td></tr>
<tr><td class="h">614</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">615</td><td></td><td></td><td></td><td></td><td></td><td class="s">### my ( $text ) = @_;   # do not uncomment, use $_[0] instead</td></tr>
<tr><td class="h">616</td><td><div class="c3">22</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--subroutine.html#L616">22</a></div></td><td><div>83</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $topic = $_[1];</td></tr>
<tr><td class="h">617</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td><div>72</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $web = $_[2];</td></tr>
<tr><td class="h">618</td><td colspan="6"></td></tr><tr><td class="h">619</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If no %CHART%s on this page, then there is nothing to do so just</td></tr>
<tr><td class="h">620</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# return.</td></tr>
<tr><td class="h">621</td><td><div class="c3">22</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L621">100</a></div></td><td></td><td></td><td><div>217</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( $_[0] !~ m/%CHART.*{.*}%/) {</td></tr>
<tr><td class="h">622</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# nothing to do</td></tr>
<tr><td class="h">623</td><td><div class="c3">21</div></td><td></td><td></td><td></td><td><div>92</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">624</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">625</td><td><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-pm--branch.html#L625">50</a></div></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_init_defaults() if( ! $pluginInitialized );</td></tr>
<tr><td class="h">626</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $chart = ChartPlugin($topic, $web, $_[0]);</td></tr>
<tr><td class="h">627</td><td><div class="c3">1</div><div class="c3">10</div></td><td></td><td></td><td></td><td><div>35</div><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$_[0] =~ s/%CHART{(.*?)}%/$chart-&gt;_makeChart($1, $topic, $web)/eog;</td></tr>
<tr><td class="h">628</td><td><div class="c3">1</div><div class="c0">0</div></td><td></td><td></td><td></td><td><div>548</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$_[0] =~ s/%CHART_TIMER{(\d+) (.*)}%/$chart-&gt;_timeit($1, $2, $topic, $web)/eog;</td></tr>
<tr><td class="h">629</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">630</td><td colspan="6"></td></tr><tr><td class="h">631</td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
</table>
</body>
</html>
