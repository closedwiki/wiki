<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 0.61
Devel::Cover is copyright 2001-2006, Paul Johnson (pjcj@cpan.org)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: /usr/share/perl/5.8.8/File/Copy.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">/usr/share/perl/5.8.8/File/Copy.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c0">7.1%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>time</th><th>code</th></tr>
<tr><td class="h">1</td><td></td><td></td><td></td><td></td><td></td><td class="s"># File/Copy.pm. Written in 1994 by Aaron Sherman &lt;ajs@ajs.com&gt;. This</td></tr>
<tr><td class="h">2</td><td></td><td></td><td></td><td></td><td></td><td class="s"># source code has been placed in the public domain by the author.</td></tr>
<tr><td class="h">3</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Please be kind and preserve the documentation.</td></tr>
<tr><td class="h">4</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">5</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Additions copyright 1996 by Charles Bailey.  Permission is granted</td></tr>
<tr><td class="h">6</td><td></td><td></td><td></td><td></td><td></td><td class="s"># to distribute the revised code under the same terms as Perl itself.</td></tr>
<tr><td class="h">7</td><td colspan="6"></td></tr><tr><td class="h">8</td><td></td><td></td><td></td><td></td><td></td><td class="s">package File::Copy;</td></tr>
<tr><td class="h">9</td><td colspan="6"></td></tr><tr><td class="h">10</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl-5-8-8-File-Copy-pm--subroutine.html#L10">1</a></div></td><td><div>13</div><div>3</div><div>3</div></td><td class="s">use 5.006;</td></tr>
<tr><td class="h">11</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl-5-8-8-File-Copy-pm--subroutine.html#L11">1</a></div></td><td><div>7</div><div>2</div><div>10</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">12</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl-5-8-8-File-Copy-pm--subroutine.html#L12">1</a></div></td><td><div>7</div><div>2</div><div>9</div></td><td class="s">use warnings;</td></tr>
<tr><td class="h">13</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl-5-8-8-File-Copy-pm--subroutine.html#L13">1</a></div></td><td><div>7</div><div>8</div><div>11</div></td><td class="s">use Carp;</td></tr>
<tr><td class="h">14</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl-5-8-8-File-Copy-pm--subroutine.html#L14">1</a></div></td><td><div>7</div><div>3</div><div>10</div></td><td class="s">use File::Spec;</td></tr>
<tr><td class="h">15</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl-5-8-8-File-Copy-pm--subroutine.html#L15">1</a></div></td><td><div>6</div><div>3</div><div>7</div></td><td class="s">use Config;</td></tr>
<tr><td class="h">16</td><td></td><td></td><td></td><td></td><td></td><td class="s">our(@ISA, @EXPORT, @EXPORT_OK, $VERSION, $Too_Big, $Syscopy_is_copy);</td></tr>
<tr><td class="h">17</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub copy;</td></tr>
<tr><td class="h">18</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub syscopy;</td></tr>
<tr><td class="h">19</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub cp;</td></tr>
<tr><td class="h">20</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub mv;</td></tr>
<tr><td class="h">21</td><td colspan="6"></td></tr><tr><td class="h">22</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Note that this module implements only *part* of the API defined by</td></tr>
<tr><td class="h">23</td><td></td><td></td><td></td><td></td><td></td><td class="s"># the File/Copy.pm module of the File-Tools-2.0 package.  However, that</td></tr>
<tr><td class="h">24</td><td></td><td></td><td></td><td></td><td></td><td class="s"># package has not yet been updated to work with Perl 5.004, and so it</td></tr>
<tr><td class="h">25</td><td></td><td></td><td></td><td></td><td></td><td class="s"># would be a Bad Thing for the CPAN module to grab it and replace this</td></tr>
<tr><td class="h">26</td><td></td><td></td><td></td><td></td><td></td><td class="s"># module.  Therefore, we set this module&#39;s version higher than 2.0.</td></tr>
<tr><td class="h">27</td><td></td><td></td><td></td><td></td><td></td><td class="s">$VERSION = &#39;2.09&#39;;</td></tr>
<tr><td class="h">28</td><td colspan="6"></td></tr><tr><td class="h">29</td><td></td><td></td><td></td><td></td><td></td><td class="s">require Exporter;</td></tr>
<tr><td class="h">30</td><td></td><td></td><td></td><td></td><td></td><td class="s">@ISA = qw(Exporter);</td></tr>
<tr><td class="h">31</td><td></td><td></td><td></td><td></td><td></td><td class="s">@EXPORT = qw(copy move);</td></tr>
<tr><td class="h">32</td><td></td><td></td><td></td><td></td><td></td><td class="s">@EXPORT_OK = qw(cp mv);</td></tr>
<tr><td class="h">33</td><td colspan="6"></td></tr><tr><td class="h">34</td><td></td><td></td><td></td><td></td><td></td><td class="s">$Too_Big = 1024 * 1024 * 2;</td></tr>
<tr><td class="h">35</td><td colspan="6"></td></tr><tr><td class="h">36</td><td></td><td></td><td></td><td></td><td></td><td class="s">my $macfiles;</td></tr>
<tr><td class="h">37</td><td></td><td></td><td></td><td></td><td></td><td class="s">if ($^O eq &#39;MacOS&#39;) {</td></tr>
<tr><td class="h">38</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$macfiles = eval { require Mac::MoreFiles };</td></tr>
<tr><td class="h">39</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;warn &#39;Mac::MoreFiles could not be loaded; using non-native syscopy&#39;</td></tr>
<tr><td class="h">40</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if $@ &amp;&amp; $^W;</td></tr>
<tr><td class="h">41</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">42</td><td colspan="6"></td></tr><tr><td class="h">43</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _catname {</td></tr>
<tr><td class="h">44</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--subroutine.html#L44">0</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($from, $to) = @_;</td></tr>
<tr><td class="h">45</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L45">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (not defined &amp;basename) {</td></tr>
<tr><td class="h">46</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require File::Basename;</td></tr>
<tr><td class="h">47</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import  File::Basename &#39;basename&#39;;</td></tr>
<tr><td class="h">48</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">49</td><td colspan="6"></td></tr><tr><td class="h">50</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L50">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($^O eq &#39;MacOS&#39;) {</td></tr>
<tr><td class="h">51</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# a partial dir name that&#39;s valid only in the cwd (e.g. &#39;tmp&#39;)</td></tr>
<tr><td class="h">52</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L52">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$to = &#39;:&#39; . $to if $to !~ /:/;</td></tr>
<tr><td class="h">53</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">54</td><td colspan="6"></td></tr><tr><td class="h">55</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return File::Spec-&gt;catfile($to, basename($from));</td></tr>
<tr><td class="h">56</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">57</td><td colspan="6"></td></tr><tr><td class="h">58</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub copy {</td></tr>
<tr><td class="h">59</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L59">0</a></div></td><td><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L59">0</a></div></td><td><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--subroutine.html#L59">0</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;croak(&quot;Usage: copy(FROM, TO [, BUFFERSIZE]) &quot;)</td></tr>
<tr><td class="h">60</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless(@_ == 2 || @_ == 3);</td></tr>
<tr><td class="h">61</td><td colspan="6"></td></tr><tr><td class="h">62</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $from = shift;</td></tr>
<tr><td class="h">63</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $to = shift;</td></tr>
<tr><td class="h">64</td><td colspan="6"></td></tr><tr><td class="h">65</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L65">0</a></div></td><td><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L65">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $from_a_handle = (ref($from)</td></tr>
<tr><td class="h">66</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? (ref($from) eq &#39;GLOB&#39;</td></tr>
<tr><td class="h">67</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| UNIVERSAL::isa($from, &#39;GLOB&#39;)</td></tr>
<tr><td class="h">68</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| UNIVERSAL::isa($from, &#39;IO::Handle&#39;))</td></tr>
<tr><td class="h">69</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: (ref(\$from) eq &#39;GLOB&#39;));</td></tr>
<tr><td class="h">70</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L70">0</a></div></td><td><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L70">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $to_a_handle =   (ref($to)</td></tr>
<tr><td class="h">71</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? (ref($to) eq &#39;GLOB&#39;</td></tr>
<tr><td class="h">72</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| UNIVERSAL::isa($to, &#39;GLOB&#39;)</td></tr>
<tr><td class="h">73</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| UNIVERSAL::isa($to, &#39;IO::Handle&#39;))</td></tr>
<tr><td class="h">74</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: (ref(\$to) eq &#39;GLOB&#39;));</td></tr>
<tr><td class="h">75</td><td colspan="6"></td></tr><tr><td class="h">76</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L76">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($from eq $to) { # works for references, too</td></tr>
<tr><td class="h">77</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp(&quot;&#39;$from&#39; and &#39;$to&#39; are identical (not copied)&quot;);</td></tr>
<tr><td class="h">78</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# The &quot;copy&quot; was a success as the source and destination contain</td></tr>
<tr><td class="h">79</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# the same data.</td></tr>
<tr><td class="h">80</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">81</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">82</td><td colspan="6"></td></tr><tr><td class="h">83</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L83">0</a></div></td><td><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L83">0</a></div><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L83">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ((($Config{d_symlink} &amp;&amp; $Config{d_readlink}) || $Config{d_link}) &amp;&amp;</td></tr>
<tr><td class="h">84</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!($^O eq &#39;MSWin32&#39; || $^O eq &#39;os2&#39; || $^O eq &#39;vms&#39;)) {</td></tr>
<tr><td class="h">85</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @fs = stat($from);</td></tr>
<tr><td class="h">86</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L86">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (@fs) {</td></tr>
<tr><td class="h">87</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @ts = stat($to);</td></tr>
<tr><td class="h">88</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L88">0</a></div></td><td><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L88">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (@ts &amp;&amp; $fs[0] == $ts[0] &amp;&amp; $fs[1] == $ts[1]) {</td></tr>
<tr><td class="h">89</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp(&quot;&#39;$from&#39; and &#39;$to&#39; are identical (not copied)&quot;);</td></tr>
<tr><td class="h">90</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">91</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">92</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">93</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">94</td><td colspan="6"></td></tr><tr><td class="h">95</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L95">0</a></div></td><td><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L95">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (!$from_a_handle &amp;&amp; !$to_a_handle &amp;&amp; -d $to &amp;&amp; ! -d $from) {</td></tr>
<tr><td class="h">96</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$to = _catname($from, $to);</td></tr>
<tr><td class="h">97</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">98</td><td colspan="6"></td></tr><tr><td class="h">99</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L99">0</a></div></td><td><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L99">0</a></div><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L99">0</a></div><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L99">0</a></div><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L99">0</a></div><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L99">0</a></div><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L99">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (defined &amp;syscopy &amp;&amp; !$Syscopy_is_copy</td></tr>
<tr><td class="h">100</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; !$to_a_handle</td></tr>
<tr><td class="h">101</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; !($from_a_handle &amp;&amp; $^O eq &#39;os2&#39; )	# OS/2 cannot handle handles</td></tr>
<tr><td class="h">102</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; !($from_a_handle &amp;&amp; $^O eq &#39;mpeix&#39;)	# and neither can MPE/iX.</td></tr>
<tr><td class="h">103</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; !($from_a_handle &amp;&amp; $^O eq &#39;MSWin32&#39;)</td></tr>
<tr><td class="h">104</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; !($from_a_handle &amp;&amp; $^O eq &#39;MacOS&#39;)</td></tr>
<tr><td class="h">105</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; !($from_a_handle &amp;&amp; $^O eq &#39;NetWare&#39;)</td></tr>
<tr><td class="h">106</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">107</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">108</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return syscopy($from, $to);</td></tr>
<tr><td class="h">109</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">110</td><td colspan="6"></td></tr><tr><td class="h">111</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $closefrom = 0;</td></tr>
<tr><td class="h">112</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $closeto = 0;</td></tr>
<tr><td class="h">113</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($size, $status, $r, $buf);</td></tr>
<tr><td class="h">114</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local($\) = &#39;&#39;;</td></tr>
<tr><td class="h">115</td><td colspan="6"></td></tr><tr><td class="h">116</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $from_h;</td></tr>
<tr><td class="h">117</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L117">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($from_a_handle) {</td></tr>
<tr><td class="h">118</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$from_h = $from;</td></tr>
<tr><td class="h">119</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">120</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L120">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$from = _protect($from) if $from =~ /^\s/s;</td></tr>
<tr><td class="h">121</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$from_h = \do { local *FH };</td></tr>
<tr><td class="h">122</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L122">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;open($from_h, &quot;&lt; $from\0&quot;) or goto fail_open1;</td></tr>
<tr><td class="h">123</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L123">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binmode $from_h or die &quot;($!,$^E)&quot;;</td></tr>
<tr><td class="h">124</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$closefrom = 1;</td></tr>
<tr><td class="h">125</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">126</td><td colspan="6"></td></tr><tr><td class="h">127</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $to_h;</td></tr>
<tr><td class="h">128</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L128">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($to_a_handle) {</td></tr>
<tr><td class="h">129</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$to_h = $to;</td></tr>
<tr><td class="h">130</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">131</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L131">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$to = _protect($to) if $to =~ /^\s/s;</td></tr>
<tr><td class="h">132</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$to_h = \do { local *FH };</td></tr>
<tr><td class="h">133</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L133">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;open($to_h,&quot;&gt; $to\0&quot;) or goto fail_open2;</td></tr>
<tr><td class="h">134</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L134">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binmode $to_h or die &quot;($!,$^E)&quot;;</td></tr>
<tr><td class="h">135</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$closeto = 1;</td></tr>
<tr><td class="h">136</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">137</td><td colspan="6"></td></tr><tr><td class="h">138</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L138">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (@_) {</td></tr>
<tr><td class="h">139</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$size = shift(@_) + 0;</td></tr>
<tr><td class="h">140</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L140">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;croak(&quot;Bad buffer size for copy: $size\n&quot;) unless ($size &gt; 0);</td></tr>
<tr><td class="h">141</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">142</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L142">0</a></div></td><td><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L142">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$size = tied(*$from_h) ? 0 : -s $from_h || 0;</td></tr>
<tr><td class="h">143</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L143">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$size = 1024 if ($size &lt; 512);</td></tr>
<tr><td class="h">144</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L144">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$size = $Too_Big if ($size &gt; $Too_Big);</td></tr>
<tr><td class="h">145</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">146</td><td colspan="6"></td></tr><tr><td class="h">147</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$! = 0;</td></tr>
<tr><td class="h">148</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for (;;) {</td></tr>
<tr><td class="h">149</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ($r, $w, $t);</td></tr>
<tr><td class="h">150</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L150">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defined($r = sysread($from_h, $buf, $size))</td></tr>
<tr><td class="h">151</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or goto fail_inner;</td></tr>
<tr><td class="h">152</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L152">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last unless $r;</td></tr>
<tr><td class="h">153</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for ($w = 0; $w &lt; $r; $w += $t) {</td></tr>
<tr><td class="h">154</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L154">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t = syswrite($to_h, $buf, $r - $w, $w)</td></tr>
<tr><td class="h">155</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or goto fail_inner;</td></tr>
<tr><td class="h">156</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">157</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">158</td><td colspan="6"></td></tr><tr><td class="h">159</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L159">0</a></div></td><td><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L159">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;close($to_h) || goto fail_open2 if $closeto;</td></tr>
<tr><td class="h">160</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L160">0</a></div></td><td><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L160">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;close($from_h) || goto fail_open1 if $closefrom;</td></tr>
<tr><td class="h">161</td><td colspan="6"></td></tr><tr><td class="h">162</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Use this idiom to avoid uninitialized value warning.</td></tr>
<tr><td class="h">163</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">164</td><td colspan="6"></td></tr><tr><td class="h">165</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# All of these contortions try to preserve error messages...</td></tr>
<tr><td class="h">166</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;fail_inner:</td></tr>
<tr><td class="h">167</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L167">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($closeto) {</td></tr>
<tr><td class="h">168</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$status = $!;</td></tr>
<tr><td class="h">169</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$! = 0;</td></tr>
<tr><td class="h">170</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;close $to_h;</td></tr>
<tr><td class="h">171</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L171">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$! = $status unless $!;</td></tr>
<tr><td class="h">172</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">173</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;fail_open2:</td></tr>
<tr><td class="h">174</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L174">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($closefrom) {</td></tr>
<tr><td class="h">175</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$status = $!;</td></tr>
<tr><td class="h">176</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$! = 0;</td></tr>
<tr><td class="h">177</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;close $from_h;</td></tr>
<tr><td class="h">178</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L178">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$! = $status unless $!;</td></tr>
<tr><td class="h">179</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">180</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;fail_open1:</td></tr>
<tr><td class="h">181</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">182</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">183</td><td colspan="6"></td></tr><tr><td class="h">184</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub move {</td></tr>
<tr><td class="h">185</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L185">0</a></div></td><td></td><td><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--subroutine.html#L185">0</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;croak(&quot;Usage: move(FROM, TO) &quot;) unless @_ == 2;</td></tr>
<tr><td class="h">186</td><td colspan="6"></td></tr><tr><td class="h">187</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($from,$to) = @_;</td></tr>
<tr><td class="h">188</td><td colspan="6"></td></tr><tr><td class="h">189</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($fromsz,$tosz1,$tomt1,$tosz2,$tomt2,$sts,$ossts);</td></tr>
<tr><td class="h">190</td><td colspan="6"></td></tr><tr><td class="h">191</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L191">0</a></div></td><td><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L191">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (-d $to &amp;&amp; ! -d $from) {</td></tr>
<tr><td class="h">192</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$to = _catname($from, $to);</td></tr>
<tr><td class="h">193</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">194</td><td colspan="6"></td></tr><tr><td class="h">195</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;($tosz1,$tomt1) = (stat($to))[7,9];</td></tr>
<tr><td class="h">196</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$fromsz = -s $from;</td></tr>
<tr><td class="h">197</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L197">0</a></div></td><td><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L197">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($^O eq &#39;os2&#39; and defined $tosz1 and defined $fromsz) {</td></tr>
<tr><td class="h">198</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# will not rename with overwrite</td></tr>
<tr><td class="h">199</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unlink $to;</td></tr>
<tr><td class="h">200</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">201</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L201">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1 if rename $from, $to;</td></tr>
<tr><td class="h">202</td><td colspan="6"></td></tr><tr><td class="h">203</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Did rename return an error even though it succeeded, because $to</td></tr>
<tr><td class="h">204</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# is on a remote NFS file system, and NFS lost the server&#39;s ack?</td></tr>
<tr><td class="h">205</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L205">0</a></div></td><td><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L205">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1 if defined($fromsz) &amp;&amp; !-e $from &amp;&amp;           # $from disappeared</td></tr>
<tr><td class="h">206</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(($tosz2,$tomt2) = (stat($to))[7,9]) &amp;&amp;    # $to&#39;s there</td></tr>
<tr><td class="h">207</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($tosz1 != $tosz2 or $tomt1 != $tomt2) &amp;&amp;  #   and changed</td></tr>
<tr><td class="h">208</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tosz2 == $fromsz;                         # it&#39;s all there</td></tr>
<tr><td class="h">209</td><td colspan="6"></td></tr><tr><td class="h">210</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;($tosz1,$tomt1) = (stat($to))[7,9];  # just in case rename did something</td></tr>
<tr><td class="h">211</td><td colspan="6"></td></tr><tr><td class="h">212</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">213</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $@;</td></tr>
<tr><td class="h">214</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eval {</td></tr>
<tr><td class="h">215</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $SIG{__DIE__};</td></tr>
<tr><td class="h">216</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L216">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;copy($from,$to) or die;</td></tr>
<tr><td class="h">217</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my($atime, $mtime) = (stat($from))[8,9];</td></tr>
<tr><td class="h">218</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;utime($atime, $mtime, $to);</td></tr>
<tr><td class="h">219</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L219">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unlink($from)   or die;</td></tr>
<tr><td class="h">220</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">221</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L221">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1 unless $@;</td></tr>
<tr><td class="h">222</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">223</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;($sts,$ossts) = ($! + 0, $^E + 0);</td></tr>
<tr><td class="h">224</td><td colspan="6"></td></tr><tr><td class="h">225</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L225">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;($tosz2,$tomt2) = ((stat($to))[7,9],0,0) if defined $tomt1;</td></tr>
<tr><td class="h">226</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl-5-8-8-File-Copy-pm--branch.html#L226">0</a></div></td><td><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--condition.html#L226">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unlink($to) if !defined($tomt1) or $tomt1 != $tomt2 or $tosz1 != $tosz2;</td></tr>
<tr><td class="h">227</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;($!,$^E) = ($sts,$ossts);</td></tr>
<tr><td class="h">228</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">229</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">230</td><td colspan="6"></td></tr><tr><td class="h">231</td><td></td><td></td><td></td><td></td><td></td><td class="s">*cp = \&amp;copy;</td></tr>
<tr><td class="h">232</td><td></td><td></td><td></td><td></td><td></td><td class="s">*mv = \&amp;move;</td></tr>
<tr><td class="h">233</td><td colspan="6"></td></tr><tr><td class="h">234</td><td colspan="6"></td></tr><tr><td class="h">235</td><td></td><td></td><td></td><td></td><td></td><td class="s">if ($^O eq &#39;MacOS&#39;) {</td></tr>
<tr><td class="h">236</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*_protect = sub { MacPerl::MakeFSSpec($_[0]) };</td></tr>
<tr><td class="h">237</td><td></td><td></td><td></td><td></td><td></td><td class="s">} else {</td></tr>
<tr><td class="h">238</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl-5-8-8-File-Copy-pm--subroutine.html#L238">0</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*_protect = sub { &quot;./$_[0]&quot; };</td></tr>
<tr><td class="h">239</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">240</td><td colspan="6"></td></tr><tr><td class="h">241</td><td></td><td></td><td></td><td></td><td></td><td class="s"># &amp;syscopy is an XSUB under OS/2</td></tr>
<tr><td class="h">242</td><td></td><td></td><td></td><td></td><td></td><td class="s">unless (defined &amp;syscopy) {</td></tr>
<tr><td class="h">243</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($^O eq &#39;VMS&#39;) {</td></tr>
<tr><td class="h">244</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*syscopy = \&amp;rmscopy;</td></tr>
<tr><td class="h">245</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif ($^O eq &#39;mpeix&#39;) {</td></tr>
<tr><td class="h">246</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*syscopy = sub {</td></tr>
<tr><td class="h">247</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0 unless @_ == 2;</td></tr>
<tr><td class="h">248</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Use the MPE cp program in order to</td></tr>
<tr><td class="h">249</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# preserve MPE file attributes.</td></tr>
<tr><td class="h">250</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return system(&#39;/bin/cp&#39;, &#39;-f&#39;, $_[0], $_[1]) == 0;</td></tr>
<tr><td class="h">251</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">252</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif ($^O eq &#39;MSWin32&#39;) {</td></tr>
<tr><td class="h">253</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*syscopy = sub {</td></tr>
<tr><td class="h">254</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0 unless @_ == 2;</td></tr>
<tr><td class="h">255</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return Win32::CopyFile(@_, 1);</td></tr>
<tr><td class="h">256</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">257</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif ($macfiles) {</td></tr>
<tr><td class="h">258</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*syscopy = sub {</td></tr>
<tr><td class="h">259</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my($from, $to) = @_;</td></tr>
<tr><td class="h">260</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my($dir, $toname);</td></tr>
<tr><td class="h">261</td><td colspan="6"></td></tr><tr><td class="h">262</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0 unless -e $from;</td></tr>
<tr><td class="h">263</td><td colspan="6"></td></tr><tr><td class="h">264</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($to =~ /(.*:)([^:]+):?$/) {</td></tr>
<tr><td class="h">265</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($dir, $toname) = ($1, $2);</td></tr>
<tr><td class="h">266</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">267</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($dir, $toname) = (&quot;:&quot;, $to);</td></tr>
<tr><td class="h">268</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">269</td><td colspan="6"></td></tr><tr><td class="h">270</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unlink($to);</td></tr>
<tr><td class="h">271</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mac::MoreFiles::FSpFileCopy($from, $dir, $toname, 1);</td></tr>
<tr><td class="h">272</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">273</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">274</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$Syscopy_is_copy = 1;</td></tr>
<tr><td class="h">275</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*syscopy = \&amp;copy;</td></tr>
<tr><td class="h">276</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">277</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">278</td><td colspan="6"></td></tr><tr><td class="h">279</td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
<tr><td class="h">280</td><td colspan="6"></td></tr></table>
</body>
</html>
