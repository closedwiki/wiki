<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 0.61
Devel::Cover is copyright 2001-2006, Paul Johnson (pjcj@cpan.org)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: /usr/share/perl5/TWiki/Plugins/ChartPlugin/Chart.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">/usr/share/perl5/TWiki/Plugins/ChartPlugin/Chart.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c0">69.0%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>time</th><th>code</th></tr>
<tr><td class="h">1</td><td></td><td></td><td></td><td></td><td></td><td class="s"># ChartPlugin for TWiki Enterprise Collaboration Platform, http://TWiki.org/</td></tr>
<tr><td class="h">2</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">3</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Copyright (C) 2004-2006 Peter Thoeny, Peter@Thoeny.org</td></tr>
<tr><td class="h">4</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Plugin written by http://TWiki.org/cgi-bin/view/Main/TaitCyrus</td></tr>
<tr><td class="h">5</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">6</td><td></td><td></td><td></td><td></td><td></td><td class="s"># For licensing info read LICENSE file in the TWiki root.</td></tr>
<tr><td class="h">7</td><td></td><td></td><td></td><td></td><td></td><td class="s"># This program is free software; you can redistribute it and/or</td></tr>
<tr><td class="h">8</td><td></td><td></td><td></td><td></td><td></td><td class="s"># modify it under the terms of the GNU General Public License</td></tr>
<tr><td class="h">9</td><td></td><td></td><td></td><td></td><td></td><td class="s"># as published by the Free Software Foundation; either version 2</td></tr>
<tr><td class="h">10</td><td></td><td></td><td></td><td></td><td></td><td class="s"># of the License, or (at your option) any later version.</td></tr>
<tr><td class="h">11</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">12</td><td></td><td></td><td></td><td></td><td></td><td class="s"># This program is distributed in the hope that it will be useful,</td></tr>
<tr><td class="h">13</td><td></td><td></td><td></td><td></td><td></td><td class="s"># but WITHOUT ANY WARRANTY; without even the implied warranty of</td></tr>
<tr><td class="h">14</td><td></td><td></td><td></td><td></td><td></td><td class="s"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</td></tr>
<tr><td class="h">15</td><td></td><td></td><td></td><td></td><td></td><td class="s"># GNU General Public License for more details, published at</td></tr>
<tr><td class="h">16</td><td></td><td></td><td></td><td></td><td></td><td class="s"># http://www.gnu.org/copyleft/gpl.html</td></tr>
<tr><td class="h">17</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">18</td><td></td><td></td><td></td><td></td><td></td><td class="s"># As per the GPL, removal of this notice is prohibited.</td></tr>
<tr><td class="h">19</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">20</td><td></td><td></td><td></td><td></td><td></td><td class="s"># =========================</td></tr>
<tr><td class="h">21</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">22</td><td></td><td></td><td></td><td></td><td></td><td class="s"># This file contains routines for creating charts for the ChartPlugin</td></tr>
<tr><td class="h">23</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">24</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Access is via object oriented Perl and is as follows.</td></tr>
<tr><td class="h">25</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">26</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Constructor:</td></tr>
<tr><td class="h">27</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    new()		- Create a &#39;chart&#39; object an initial various default values.</td></tr>
<tr><td class="h">28</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Getters/Setters</td></tr>
<tr><td class="h">29</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setType($type)	- Set the type of chart (line, area, or combo)</td></tr>
<tr><td class="h">30</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getType		- Return the chart type</td></tr>
<tr><td class="h">31</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">32</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setTitle($title)	- Set the chart title (top of chart) - default is none</td></tr>
<tr><td class="h">33</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getTitle		- Get the chart title</td></tr>
<tr><td class="h">34</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">35</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setXlabel(@labels)	- Set the label under the X axis - default is none</td></tr>
<tr><td class="h">36</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getXlabel		- Get the X label</td></tr>
<tr><td class="h">37</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">38</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setYlabel($flag)	- Set the label under the Y axis - default is none</td></tr>
<tr><td class="h">39</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getYlabel		- Get the Y label</td></tr>
<tr><td class="h">40</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">41</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setData(@data)	- Set the the data (array) to chart</td></tr>
<tr><td class="h">42</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getData		- Get the data (array)</td></tr>
<tr><td class="h">43</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getNumDataSets	- Get the number of data sets found in the data.</td></tr>
<tr><td class="h">44</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getNumDataPoints	- Get the number of data points in a data set</td></tr>
<tr><td class="h">45</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">46</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setYmin($min)	- Set the minimum Y value to display on the chart</td></tr>
<tr><td class="h">47</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getYmin		- Get the minimum Y value.  If no user specified</td></tr>
<tr><td class="h">48</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    			  value via setYmin(), then return the minimum</td></tr>
<tr><td class="h">49</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    			  value actually seen in the data sets</td></tr>
<tr><td class="h">50</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">51</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setYmax($max)	- Set the maximum Y value to display on the chart</td></tr>
<tr><td class="h">52</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getYmax		- Get the maximum Y value.  If no user specified</td></tr>
<tr><td class="h">53</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    			  value via setYmax(), then return the maximum</td></tr>
<tr><td class="h">54</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    			  value actually seen in the data sets</td></tr>
<tr><td class="h">55</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">56</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setSubTypes(@types)- Set array describing the subtypes for each data set.</td></tr>
<tr><td class="h">57</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    			  Values can be area or line and corresponds to the</td></tr>
<tr><td class="h">58</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    			  associated data set.</td></tr>
<tr><td class="h">59</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getSubTypes	- Get the array of subtypes</td></tr>
<tr><td class="h">60</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">61</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setXaxis(@xaxis)	- Set the array of X axis values</td></tr>
<tr><td class="h">62</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getXaxis		- Get the array of X axis values</td></tr>
<tr><td class="h">63</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">64</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setXaxisAngle($angle)</td></tr>
<tr><td class="h">65</td><td></td><td></td><td></td><td></td><td></td><td class="s">#                       - Set the angle of the X axis labels</td></tr>
<tr><td class="h">66</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getXaxisAngle 	- Get the angle of the X axis labels</td></tr>
<tr><td class="h">67</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">68</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setYaxis(@yaxis)	- Set Y axis draw flag (&quot;on&quot; or &quot;off&quot;)</td></tr>
<tr><td class="h">69</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getYaxis		- Get the value of the Y axis draw flag</td></tr>
<tr><td class="h">70</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">71</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setNumYGrids($num)	- Set the number of Y axes to draw</td></tr>
<tr><td class="h">72</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getNumYGrids	- Get the number of Y axes to draw</td></tr>
<tr><td class="h">73</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">74</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setNumYTics($num)	- Set the number of tic marks to draw between Y grids</td></tr>
<tr><td class="h">75</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getNumYTics	- Get the number of tic marks to draw between Y grids</td></tr>
<tr><td class="h">76</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">77</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setNumXGrids($num) - Set the number of X axis to draw</td></tr>
<tr><td class="h">78</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getNumXGrids	- Get the number of X axis to draw</td></tr>
<tr><td class="h">79</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">80</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setXgrid($type)	- Set the type of X grid to draw (off, on, or dot)</td></tr>
<tr><td class="h">81</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getXgrid		- Get the type of X grid to draw</td></tr>
<tr><td class="h">82</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">83</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setYgrid($type)	- Set the type of Y grid to draw (off, on, or dot)</td></tr>
<tr><td class="h">84</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getYgrid		- Get the type of Y grid to draw</td></tr>
<tr><td class="h">85</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">86</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setScale($scale)	- Set the type of Y scale to use (linear or log)</td></tr>
<tr><td class="h">87</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getScale		- Get the type of Y scale to use</td></tr>
<tr><td class="h">88</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">89</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setDataLabels(@lbls)- Set array describing whether to draw data labels</td></tr>
<tr><td class="h">90</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    			  for each data point or not.  Each element</td></tr>
<tr><td class="h">91</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    			  corresponds to the associated data set.</td></tr>
<tr><td class="h">92</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getDataLabels	- Get array of data label specifications per data set</td></tr>
<tr><td class="h">93</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">94</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setLegend(@legend)	- Set array of legends (descriptions) for each data set</td></tr>
<tr><td class="h">95</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getLegend		- Get array of data set legends (descriptions)</td></tr>
<tr><td class="h">96</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">97</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setImageWidth($w)	- Set width (in pixels) of the resulting chart image</td></tr>
<tr><td class="h">98</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getImageWidth	- Get width (in pixels) of the chart image</td></tr>
<tr><td class="h">99</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">100</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setImageHeight($h)	- Set height (in pixels) of the resulting chart image</td></tr>
<tr><td class="h">101</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getImageHeight	- Get height (in pixels) of the chart image</td></tr>
<tr><td class="h">102</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">103</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setAreaColors(@c)	- Set array of colors to be used when drawing areas</td></tr>
<tr><td class="h">104</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getAreaColors	- Get array of area colors</td></tr>
<tr><td class="h">105</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getAreaColorByIndex- Get the next area color by indexing into color array</td></tr>
<tr><td class="h">106</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">107</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setLineColors(@c)	- Set array of colors to be used when drawing lines</td></tr>
<tr><td class="h">108</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getLineColors	- Get array of line colors</td></tr>
<tr><td class="h">109</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getLineColorByIndex- Get the next line color by indexing into color array</td></tr>
<tr><td class="h">110</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">111</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setColors(@c)	- Set array of colors to be used by each data set.</td></tr>
<tr><td class="h">112</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getColors		- Get array of colors</td></tr>
<tr><td class="h">113</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">114</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setFileDir($dir)	- Set the directory in which the created chart will be placed.</td></tr>
<tr><td class="h">115</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getFileDir		- Get directory in which the chart is to be placed.</td></tr>
<tr><td class="h">116</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">117</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setFileName($name)	- Set the name of the chart file</td></tr>
<tr><td class="h">118</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getFileName	- Get the name oft he chart file</td></tr>
<tr><td class="h">119</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">120</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setMargin($margin)	- Set the margin (in pixels) allocated around the</td></tr>
<tr><td class="h">121</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    			  entire chart.</td></tr>
<tr><td class="h">122</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getMargin		- Get the margin size</td></tr>
<tr><td class="h">123</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">124</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setImage($im)	- Set the GD image info</td></tr>
<tr><td class="h">125</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getImage		- Get the GD image info</td></tr>
<tr><td class="h">126</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">127</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setFont($type,$font)- Set the font for &#39;type&#39; types of data</td></tr>
<tr><td class="h">128</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getFont($type)	- Get the font for &#39;type&#39; of data</td></tr>
<tr><td class="h">129</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getFontWidth($type)- Get the font width for &#39;type&#39; of data</td></tr>
<tr><td class="h">130</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getFontHeight($type)- Get the font height for &#39;type&#39; of data</td></tr>
<tr><td class="h">131</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setBGcolor(@color)	- Set the background color of the chart</td></tr>
<tr><td class="h">132</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getBGcolor()	- Get the background color of the chart</td></tr>
<tr><td class="h">133</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setGridColor($color)- Set the color of the grid</td></tr>
<tr><td class="h">134</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getGridColor()	- Get the color of the grid</td></tr>
<tr><td class="h">135</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">136</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    computeFinalColors	- Computes the final colors to be used by each data</td></tr>
<tr><td class="h">137</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    			  set taking colors from either the user specified</td></tr>
<tr><td class="h">138</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    			  colors or from the &#39;area&#39; and &#39;line&#39; color</td></tr>
<tr><td class="h">139</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    			  defaults based on the type of each data set</td></tr>
<tr><td class="h">140</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    computeSubTypes	- Compute the subtype for each data set based on</td></tr>
<tr><td class="h">141</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    			  &#39;type&#39; and &#39;subType&#39; specified.</td></tr>
<tr><td class="h">142</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setDefaultDataValue($value)</td></tr>
<tr><td class="h">143</td><td></td><td></td><td></td><td></td><td></td><td class="s">#                       - Set a default value if there is no data seen in</td></tr>
<tr><td class="h">144</td><td></td><td></td><td></td><td></td><td></td><td class="s">#                         the table.</td></tr>
<tr><td class="h">145</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getDefaultDataValue()</td></tr>
<tr><td class="h">146</td><td></td><td></td><td></td><td></td><td></td><td class="s">#                       - Get the default value to use if there is no data</td></tr>
<tr><td class="h">147</td><td></td><td></td><td></td><td></td><td></td><td class="s">#                         seen in the table</td></tr>
<tr><td class="h">148</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setPointSize($size)- Set the size in pixels of a drawn data point</td></tr>
<tr><td class="h">149</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getPointSize()	- Get the size in pixels of drawn data points</td></tr>
<tr><td class="h">150</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setLineWidth($width)- Set the width, in pixels, lines are drawn with</td></tr>
<tr><td class="h">151</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getLineWidth()	- Get the width of drawn lines</td></tr>
<tr><td class="h">152</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">153</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setBarLeadingSpace($pixels)</td></tr>
<tr><td class="h">154</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    			- Set the leading space (in pixels) before the first drawn bar graph</td></tr>
<tr><td class="h">155</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getBarLeadingSpace()</td></tr>
<tr><td class="h">156</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    			- Get the space before the first drawn bar graph</td></tr>
<tr><td class="h">157</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setBarTrailingSpace($pixels)</td></tr>
<tr><td class="h">158</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    			- Set the trailing space (in pixels) after the last drawn bar graph</td></tr>
<tr><td class="h">159</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getBarTrailingSpace()</td></tr>
<tr><td class="h">160</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    			- Get the space before the last drawn bar graph</td></tr>
<tr><td class="h">161</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    setBarSpace($pixels)</td></tr>
<tr><td class="h">162</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    			- Set the space (in pixels) between bar graphs</td></tr>
<tr><td class="h">163</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    getBarSpace()</td></tr>
<tr><td class="h">164</td><td></td><td></td><td></td><td></td><td></td><td class="s">#    			- Get the space between bar graphs</td></tr>
<tr><td class="h">165</td><td colspan="6"></td></tr><tr><td class="h">166</td><td></td><td></td><td></td><td></td><td></td><td class="s"># =========================</td></tr>
<tr><td class="h">167</td><td></td><td></td><td></td><td></td><td></td><td class="s">package TWiki::Plugins::ChartPlugin::Chart;</td></tr>
<tr><td class="h">168</td><td colspan="6"></td></tr><tr><td class="h">169</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L169">1</a></div></td><td><div>7</div><div>3</div><div>6</div></td><td class="s">use Exporter;</td></tr>
<tr><td class="h">170</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L170">1</a></div></td><td><div>7</div><div>3</div><div>6</div></td><td class="s">use GD;</td></tr>
<tr><td class="h">171</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L171">1</a></div></td><td><div>8</div><div>6</div><div>9</div></td><td class="s">use POSIX;</td></tr>
<tr><td class="h">172</td><td></td><td></td><td></td><td></td><td></td><td class="s">@ISA = ();</td></tr>
<tr><td class="h">173</td><td></td><td></td><td></td><td></td><td></td><td class="s">@EXPORT = qw(</td></tr>
<tr><td class="h">174</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setType getType</td></tr>
<tr><td class="h">175</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setTitle getTitle</td></tr>
<tr><td class="h">176</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setXlabel getXlabel </td></tr>
<tr><td class="h">177</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setYlabel getYlabel </td></tr>
<tr><td class="h">178</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setData getData getNumDataSets</td></tr>
<tr><td class="h">179</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setYmin getYmin</td></tr>
<tr><td class="h">180</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setYmax getYmax</td></tr>
<tr><td class="h">181</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setSubTypes getSubTypes</td></tr>
<tr><td class="h">182</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setXaxis getXaxis</td></tr>
<tr><td class="h">183</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setXaxisAngle getXaxisAngle</td></tr>
<tr><td class="h">184</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setNumXGrids getNumXGrids</td></tr>
<tr><td class="h">185</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setYaxis getYaxis</td></tr>
<tr><td class="h">186</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setNumYGrids getNumYGrids</td></tr>
<tr><td class="h">187</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setNumYTics getNumYTics</td></tr>
<tr><td class="h">188</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setXgrid getXgrid</td></tr>
<tr><td class="h">189</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setYgrid getYgrid</td></tr>
<tr><td class="h">190</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setScale getScale</td></tr>
<tr><td class="h">191</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setDataLabels getDataLabels</td></tr>
<tr><td class="h">192</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setLegend getLegend</td></tr>
<tr><td class="h">193</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setImageWidth getImageWidth</td></tr>
<tr><td class="h">194</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setImageHeight getImageHeight</td></tr>
<tr><td class="h">195</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setAreaColors getAreaColors</td></tr>
<tr><td class="h">196</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setLineColors getLineColors</td></tr>
<tr><td class="h">197</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setColors getColors</td></tr>
<tr><td class="h">198</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setGridColor getGridColor</td></tr>
<tr><td class="h">199</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setFileDir getFileDir</td></tr>
<tr><td class="h">200</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setFileName getFileName</td></tr>
<tr><td class="h">201</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setMargin getMargin</td></tr>
<tr><td class="h">202</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setPointSize getPointSize</td></tr>
<tr><td class="h">203</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setLineWidth getLineWidth</td></tr>
<tr><td class="h">204</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setBarLeadingSpace getBarLeadingSpace</td></tr>
<tr><td class="h">205</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setBarTrailingSpace getBarTrailingSpace</td></tr>
<tr><td class="h">206</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setBarSpace getBarSpace</td></tr>
<tr><td class="h">207</td><td></td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">208</td><td colspan="6"></td></tr><tr><td class="h">209</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L209">1</a></div></td><td><div>9</div><div>2</div><div>8</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">210</td><td colspan="6"></td></tr><tr><td class="h">211</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub new</td></tr>
<tr><td class="h">212</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">213</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L213">10</a></div></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($class) = @_;</td></tr>
<tr><td class="h">214</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = {};</td></tr>
<tr><td class="h">215</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>58</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;bless $this, $class;</td></tr>
<tr><td class="h">216</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setMargin(10);</td></tr>
<tr><td class="h">217</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setColors();</td></tr>
<tr><td class="h">218</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setGridColor(&quot;#FFFFFF&quot;);</td></tr>
<tr><td class="h">219</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setLegend();</td></tr>
<tr><td class="h">220</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setYaxis(&quot;off&quot;);</td></tr>
<tr><td class="h">221</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setXaxis();</td></tr>
<tr><td class="h">222</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setXaxisAngle(0);</td></tr>
<tr><td class="h">223</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setNumXGrids(10);</td></tr>
<tr><td class="h">224</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setSubTypes();</td></tr>
<tr><td class="h">225</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>63</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setFont(&quot;title&quot;, GD::gdGiantFont());	# Set title font</td></tr>
<tr><td class="h">226</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setFont(&quot;xaxis&quot;, GD::gdSmallFont());	# Set X axis font</td></tr>
<tr><td class="h">227</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setFont(&quot;yaxis&quot;, GD::gdSmallFont());	# Set Y axis font</td></tr>
<tr><td class="h">228</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setFont(&quot;xlabel&quot;, GD::gdSmallFont());# Set X label font</td></tr>
<tr><td class="h">229</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setFont(&quot;ylabel&quot;, GD::gdSmallFont());# Set Y label font</td></tr>
<tr><td class="h">230</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setFont(&quot;legend&quot;, GD::gdSmallFont());# Set legend font</td></tr>
<tr><td class="h">231</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setFont(&quot;data&quot;, GD::gdSmallFont());	# Set data values font</td></tr>
<tr><td class="h">232</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setNumYGrids(10);</td></tr>
<tr><td class="h">233</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setNumYTics(-1);</td></tr>
<tr><td class="h">234</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setScale(&quot;linear&quot;);</td></tr>
<tr><td class="h">235</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setNumYDigits(0);</td></tr>
<tr><td class="h">236</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setNumXDigits(0);</td></tr>
<tr><td class="h">237</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $this;</td></tr>
<tr><td class="h">238</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">239</td><td colspan="6"></td></tr><tr><td class="h">240</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L240">10</a></div></td><td><div>39</div><div>45</div></td><td class="s">sub setType { my ($this, $type) = @_; $$this{TYPE} = $type; }</td></tr>
<tr><td class="h">241</td><td><div class="c3">20</div><div class="c3">20</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L241">20</a></div></td><td><div>69</div><div>81</div></td><td class="s">sub getType { my ($this) = @_; return $$this{TYPE}; }</td></tr>
<tr><td class="h">242</td><td colspan="6"></td></tr><tr><td class="h">243</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L243">10</a></div></td><td><div>39</div><div>48</div></td><td class="s">sub setTitle { my ($this, $title) = @_; $$this{TITLE} = $title; }</td></tr>
<tr><td class="h">244</td><td><div class="c3">20</div><div class="c3">20</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L244">20</a></div></td><td><div>73</div><div>118</div></td><td class="s">sub getTitle { my ($this) = @_; return $$this{TITLE}; }</td></tr>
<tr><td class="h">245</td><td colspan="6"></td></tr><tr><td class="h">246</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L246">10</a></div></td><td><div>39</div><div>47</div></td><td class="s">sub setXlabel { my ($this, $Xlabel) = @_; $$this{X_LABEL} = $Xlabel; }</td></tr>
<tr><td class="h">247</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L247">10</a></div></td><td><div>37</div><div>41</div></td><td class="s">sub getXlabel { my ($this) = @_; return $$this{X_LABEL}; }</td></tr>
<tr><td class="h">248</td><td colspan="6"></td></tr><tr><td class="h">249</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L249">10</a></div></td><td><div>46</div><div>45</div></td><td class="s">sub setYlabel { my ($this, $Ylabel) = @_; $$this{Y_LABEL} = $Ylabel; }</td></tr>
<tr><td class="h">250</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L250">10</a></div></td><td><div>33</div><div>44</div></td><td class="s">sub getYlabel { my ($this) = @_; return $$this{Y_LABEL}; }</td></tr>
<tr><td class="h">251</td><td colspan="6"></td></tr><tr><td class="h">252</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L252">10</a></div></td><td><div>37</div><div>53</div></td><td class="s">sub setDefaultDataValue { my ($this, $defaultValue) = @_; $$this{DEFAULT_VALUE} = $defaultValue; }</td></tr>
<tr><td class="h">253</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L253">10</a></div></td><td><div>37</div><div>43</div></td><td class="s">sub getDefaultDataValue { my ($this) = @_; return $$this{DEFAULT_VALUE}; }</td></tr>
<tr><td class="h">254</td><td colspan="6"></td></tr><tr><td class="h">255</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Return the minimum data value seen so the caller can decide if special</td></tr>
<tr><td class="h">256</td><td></td><td></td><td></td><td></td><td></td><td class="s"># action is needed (as would be the case if scale=semilog and yMin &lt;= 0</td></tr>
<tr><td class="h">257</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub setData</td></tr>
<tr><td class="h">258</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">259</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L259">10</a></div></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($this, @data) = @_;</td></tr>
<tr><td class="h">260</td><td colspan="6"></td></tr><tr><td class="h">261</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Create clean data values and calculate the min/max values to be charted.</td></tr>
<tr><td class="h">262</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $yMin =  9e+40;	# Initialize with some very large value.</td></tr>
<tr><td class="h">263</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $yMax = -9e+40;	# Initialize with some very small value.</td></tr>
<tr><td class="h">264</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $value = 0;</td></tr>
<tr><td class="h">265</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $maxRow = @data - 1;</td></tr>
<tr><td class="h">266</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $maxCol = 0;</td></tr>
<tr><td class="h">267</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $defaultDataValue = $this-&gt;getDefaultDataValue();</td></tr>
<tr><td class="h">268</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for my $r ( 0..$maxRow ) {</td></tr>
<tr><td class="h">269</td><td><div class="c3">42</div><div class="c3">42</div></td><td></td><td></td><td></td><td><div>103</div><div>233</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$maxCol = @{$data[$r]} - 1;</td></tr>
<tr><td class="h">270</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>155</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $c (0..$maxCol) {</td></tr>
<tr><td class="h">271</td><td><div class="c3">190</div></td><td></td><td></td><td></td><td><div>815</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value = $data[$r][$c];</td></tr>
<tr><td class="h">272</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Check to see if the value is non-empty.</td></tr>
<tr><td class="h">273</td><td><div class="c3">190</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L273">50</a></div></td><td></td><td></td><td><div>913</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($value !~ /^\s*$/) {</td></tr>
<tr><td class="h">274</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If there is a non-empty value, then look for the number part</td></tr>
<tr><td class="h">275</td><td><div class="c3">190</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L275">50</a></div></td><td></td><td></td><td><div>853</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($value =~ m/([\-]?[0-9.]+[eE]?[+-]?\d*)/) {</td></tr>
<tr><td class="h">276</td><td><div class="c3">190</div></td><td></td><td></td><td></td><td><div>663</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value = $1;</td></tr>
<tr><td class="h">277</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">278</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If a non-number value in a column (like text for a</td></tr>
<tr><td class="h">279</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# column header) assume the user defined default data</td></tr>
<tr><td class="h">280</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# value</td></tr>
<tr><td class="h">281</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value = $defaultDataValue;</td></tr>
<tr><td class="h">282</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">283</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">284</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Value is empty to use the user defined default value</td></tr>
<tr><td class="h">285</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value = $defaultDataValue;</td></tr>
<tr><td class="h">286</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">287</td><td><div class="c3">190</div></td><td></td><td></td><td></td><td><div>736</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[$r][$c] = $value;</td></tr>
<tr><td class="h">288</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Since we allow a default value which can be empty, we only</td></tr>
<tr><td class="h">289</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# want to calculate min/max if the current value is a number.</td></tr>
<tr><td class="h">290</td><td><div class="c3">190</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L290">50</a></div></td><td></td><td></td><td><div>975</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($value =~ m/([\-]?[0-9.]+[eE]?[+-]?\d*)/) {</td></tr>
<tr><td class="h">291</td><td><div class="c3">190</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L291">100</a></div></td><td></td><td></td><td><div>939</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yMin = $1 if( $1 &lt; $yMin );</td></tr>
<tr><td class="h">292</td><td><div class="c3">190</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L292">100</a></div></td><td></td><td></td><td><div>1094</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yMax = $1 if( $1 &gt; $yMax );</td></tr>
<tr><td class="h">293</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">294</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">295</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">296</td><td colspan="6"></td></tr><tr><td class="h">297</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Save the min/max data set values.</td></tr>
<tr><td class="h">298</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setYminOfData($yMin);</td></tr>
<tr><td class="h">299</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setYmaxOfData($yMax);</td></tr>
<tr><td class="h">300</td><td colspan="6"></td></tr><tr><td class="h">301</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$$this{DATA} = \@data;</td></tr>
<tr><td class="h">302</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$$this{NUM_DATA_SETS} = @data;</td></tr>
<tr><td class="h">303</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td></td><td><div>31</div><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$$this{NUM_DATA_POINTS} = @{$data[0]};</td></tr>
<tr><td class="h">304</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $yMin;</td></tr>
<tr><td class="h">305</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">306</td><td><div class="c3">10</div><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L306">10</a></div></td><td><div>38</div><div>32</div><div>54</div></td><td class="s">sub getData { my ($this) = @_; return @{$$this{DATA}}; }</td></tr>
<tr><td class="h">307</td><td><div class="c3">30</div><div class="c3">30</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L307">30</a></div></td><td><div>101</div><div>115</div></td><td class="s">sub getNumDataSets { my ($this) = @_; return $$this{NUM_DATA_SETS}; }</td></tr>
<tr><td class="h">308</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L308">10</a></div></td><td><div>30</div><div>40</div></td><td class="s">sub getNumDataPoints { my ($this) = @_; return $$this{NUM_DATA_POINTS}; }</td></tr>
<tr><td class="h">309</td><td colspan="6"></td></tr><tr><td class="h">310</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L310">0</a></div></td><td><div>0</div><div>0</div></td><td class="s">sub getXminOfData { my ($this) = @_; return $$this{X_DATA_MIN}; }</td></tr>
<tr><td class="h">311</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L311">10</a></div></td><td><div>35</div><div>41</div></td><td class="s">sub setXminOfData { my ($this, $xmin) = @_; $$this{X_DATA_MIN} = $xmin; }</td></tr>
<tr><td class="h">312</td><td colspan="6"></td></tr><tr><td class="h">313</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L313">10</a></div></td><td><div>41</div><div>40</div></td><td class="s">sub setXmaxOfData { my ($this, $xmax) = @_; $$this{X_DATA_MAX} = $xmax; }</td></tr>
<tr><td class="h">314</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L314">0</a></div></td><td><div>0</div><div>0</div></td><td class="s">sub getXmaxOfData { my ($this) = @_; return $$this{X_DATA_MAX}; }</td></tr>
<tr><td class="h">315</td><td colspan="6"></td></tr><tr><td class="h">316</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L316">10</a></div></td><td><div>47</div><div>50</div></td><td class="s">sub setYmin { my( $this, $yMin ) = @_; $$this{Y_MIN} = $yMin; }</td></tr>
<tr><td class="h">317</td><td><div class="c3">20</div><div class="c3">20</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L317">20</a></div></td><td><div>150</div><div>84</div></td><td class="s">sub getYmin { my ($this) = @_; return $$this{Y_MIN}; }</td></tr>
<tr><td class="h">318</td><td colspan="6"></td></tr><tr><td class="h">319</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L319">0</a></div></td><td><div>0</div><div>0</div></td><td class="s">sub getYminOfData { my ($this) = @_; return $$this{Y_DATA_MIN}; }</td></tr>
<tr><td class="h">320</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L320">10</a></div></td><td><div>41</div><div>48</div></td><td class="s">sub setYminOfData { my ($this, $ymin) = @_; $$this{Y_DATA_MIN} = $ymin; }</td></tr>
<tr><td class="h">321</td><td colspan="6"></td></tr><tr><td class="h">322</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L322">10</a></div></td><td><div>45</div><div>48</div></td><td class="s">sub setYmax { my( $this, $yMax ) = @_; $$this{Y_MAX} = $yMax; }</td></tr>
<tr><td class="h">323</td><td><div class="c3">20</div><div class="c3">20</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L323">20</a></div></td><td><div>66</div><div>74</div></td><td class="s">sub getYmax { my ($this) = @_; return $$this{Y_MAX}; }</td></tr>
<tr><td class="h">324</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L324">10</a></div></td><td><div>40</div><div>40</div></td><td class="s">sub setYmaxOfData { my ($this, $ymax) = @_; $$this{Y_DATA_MAX} = $ymax; }</td></tr>
<tr><td class="h">325</td><td><div class="c3">20</div><div class="c3">20</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L325">20</a></div></td><td><div>68</div><div>90</div></td><td class="s">sub getYmaxOfData { my ($this) = @_; return $$this{Y_DATA_MAX}; }</td></tr>
<tr><td class="h">326</td><td colspan="6"></td></tr><tr><td class="h">327</td><td><div class="c3">30</div><div class="c3">30</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L327">30</a></div></td><td><div>131</div><div>131</div></td><td class="s">sub setSubTypes { my ($this, @subTypes) = @_; $$this{SUB_TYPES} = \@subTypes; }</td></tr>
<tr><td class="h">328</td><td><div class="c3">10</div><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L328">10</a></div></td><td><div>38</div><div>28</div><div>59</div></td><td class="s">sub getSubTypes { my ($this) = @_; return @{$$this{SUB_TYPES}}; }</td></tr>
<tr><td class="h">329</td><td colspan="6"></td></tr><tr><td class="h">330</td><td><div class="c3">20</div><div class="c3">20</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L330">20</a></div></td><td><div>128</div><div>147</div></td><td class="s">sub setXaxis { my ($this, @xAxis) = @_; $$this{X_AXIS} = \@xAxis; }</td></tr>
<tr><td class="h">331</td><td><div class="c3">10</div><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L331">10</a></div></td><td><div>34</div><div>30</div><div>106</div></td><td class="s">sub getXaxis { my ($this) = @_; return @{$$this{X_AXIS}}; }</td></tr>
<tr><td class="h">332</td><td colspan="6"></td></tr><tr><td class="h">333</td><td><div class="c3">20</div><div class="c3">20</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L333">20</a></div></td><td><div>88</div><div>87</div></td><td class="s">sub setXaxisAngle { my ($this, $angle) = @_; $$this{X_AXIS_ANGLE} = $angle; }</td></tr>
<tr><td class="h">334</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L334">10</a></div></td><td><div>39</div><div>46</div></td><td class="s">sub getXaxisAngle { my ($this) = @_; return $$this{X_AXIS_ANGLE}; }</td></tr>
<tr><td class="h">335</td><td colspan="6"></td></tr><tr><td class="h">336</td><td><div class="c3">20</div><div class="c3">20</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L336">20</a></div></td><td><div>80</div><div>87</div></td><td class="s">sub setYaxis { my ($this, $yAxis) = @_; $$this{Y_AXIS} = $yAxis; }</td></tr>
<tr><td class="h">337</td><td><div class="c3">20</div><div class="c3">20</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L337">20</a></div></td><td><div>69</div><div>112</div></td><td class="s">sub getYaxis { my ($this) = @_; return $$this{Y_AXIS}; }</td></tr>
<tr><td class="h">338</td><td colspan="6"></td></tr><tr><td class="h">339</td><td><div class="c3">20</div><div class="c3">20</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L339">20</a></div></td><td><div>87</div><div>84</div></td><td class="s">sub setNumYGrids { my ($this, $numYGrids) = @_; $$this{NUM_Y_GRIDS} = $numYGrids; }</td></tr>
<tr><td class="h">340</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L340">10</a></div></td><td><div>32</div><div>44</div></td><td class="s">sub getNumYGrids { my ($this) = @_; return $$this{NUM_Y_GRIDS}; }</td></tr>
<tr><td class="h">341</td><td colspan="6"></td></tr><tr><td class="h">342</td><td><div class="c3">20</div><div class="c3">20</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L342">20</a></div></td><td><div>79</div><div>97</div></td><td class="s">sub setNumYTics { my ($this, $numYTics) = @_; $$this{NUM_Y_TICS} = $numYTics; }</td></tr>
<tr><td class="h">343</td><td><div class="c3">110</div><div class="c3">110</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L343">110</a></div></td><td><div>372</div><div>476</div></td><td class="s">sub getNumYTics { my ($this) = @_; return $$this{NUM_Y_TICS}; }</td></tr>
<tr><td class="h">344</td><td colspan="6"></td></tr><tr><td class="h">345</td><td><div class="c3">28</div><div class="c3">28</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L345">28</a></div></td><td><div>112</div><div>131</div></td><td class="s">sub setNumXGrids { my ($this, $numXGrids) = @_; $$this{NUM_X_GRIDS} = $numXGrids; }</td></tr>
<tr><td class="h">346</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L346">10</a></div></td><td><div>36</div><div>43</div></td><td class="s">sub getNumXGrids { my ($this) = @_; return $$this{NUM_X_GRIDS}; }</td></tr>
<tr><td class="h">347</td><td colspan="6"></td></tr><tr><td class="h">348</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L348">10</a></div></td><td><div>46</div><div>46</div></td><td class="s">sub setXgrid { my ($this, $xGrid) = @_; $$this{X_GRID} = $xGrid; }</td></tr>
<tr><td class="h">349</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L349">10</a></div></td><td><div>36</div><div>39</div></td><td class="s">sub getXgrid { my ($this) = @_; return $$this{X_GRID}; }</td></tr>
<tr><td class="h">350</td><td colspan="6"></td></tr><tr><td class="h">351</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L351">10</a></div></td><td><div>40</div><div>43</div></td><td class="s">sub setYgrid { my ($this, $yGrid) = @_; $$this{Y_GRID} = $yGrid; }</td></tr>
<tr><td class="h">352</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L352">10</a></div></td><td><div>37</div><div>41</div></td><td class="s">sub getYgrid { my ($this) = @_; return $$this{Y_GRID}; }</td></tr>
<tr><td class="h">353</td><td colspan="6"></td></tr><tr><td class="h">354</td><td><div class="c3">20</div><div class="c3">20</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L354">20</a></div></td><td><div>75</div><div>83</div></td><td class="s">sub setScale { my ($this, $scale) = @_; $$this{SCALE} = $scale; }</td></tr>
<tr><td class="h">355</td><td><div class="c3">516</div><div class="c3">516</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L355">516</a></div></td><td><div>1567</div><div>2047</div></td><td class="s">sub getScale { my ($this) = @_; return $$this{SCALE}; }</td></tr>
<tr><td class="h">356</td><td colspan="6"></td></tr><tr><td class="h">357</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L357">10</a></div></td><td><div>42</div><div>53</div></td><td class="s">sub setDataLabels { my ($this, @dataLabels) = @_; $$this{DATA_LABELS} = \@dataLabels; }</td></tr>
<tr><td class="h">358</td><td><div class="c3">10</div><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L358">10</a></div></td><td><div>38</div><div>30</div><div>63</div></td><td class="s">sub getDataLabels { my ($this) = @_; return @{$$this{DATA_LABELS}}; }</td></tr>
<tr><td class="h">359</td><td colspan="6"></td></tr><tr><td class="h">360</td><td><div class="c3">20</div><div class="c3">20</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L360">20</a></div></td><td><div>95</div><div>110</div></td><td class="s">sub setLegend { my ($this, @legend) = @_; $$this{LEGEND} = \@legend; }</td></tr>
<tr><td class="h">361</td><td><div class="c3">10</div><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L361">10</a></div></td><td><div>37</div><div>31</div><div>93</div></td><td class="s">sub getLegend { my ($this) = @_; return @{$$this{LEGEND}}; }</td></tr>
<tr><td class="h">362</td><td colspan="6"></td></tr><tr><td class="h">363</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L363">10</a></div></td><td><div>40</div><div>47</div></td><td class="s">sub setImageWidth { my ($this, $imageWidth) = @_; $$this{IMAGE_WIDTH} = $imageWidth; }</td></tr>
<tr><td class="h">364</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L364">10</a></div></td><td><div>33</div><div>45</div></td><td class="s">sub getImageWidth { my ($this) = @_; return $$this{IMAGE_WIDTH}; }</td></tr>
<tr><td class="h">365</td><td colspan="6"></td></tr><tr><td class="h">366</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L366">10</a></div></td><td><div>42</div><div>47</div></td><td class="s">sub setImageHeight { my ($this, $imageHeight) = @_; $$this{IMAGE_HEIGHT} = $imageHeight; }</td></tr>
<tr><td class="h">367</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L367">10</a></div></td><td><div>36</div><div>38</div></td><td class="s">sub getImageHeight { my ($this) = @_; return $$this{IMAGE_HEIGHT}; }</td></tr>
<tr><td class="h">368</td><td colspan="6"></td></tr><tr><td class="h">369</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub setAreaColors</td></tr>
<tr><td class="h">370</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">371</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L371">10</a></div></td><td><div>61</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($this, @AreaColors) = @_;</td></tr>
<tr><td class="h">372</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$$this{AREA_COLORS} = \@AreaColors;</td></tr>
<tr><td class="h">373</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$$this{NEXT_AREA_COLOR} = 0;</td></tr>
<tr><td class="h">374</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">375</td><td><div class="c3">52</div><div class="c3">52</div><div class="c3">52</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L375">52</a></div></td><td><div>168</div><div>140</div><div>389</div></td><td class="s">sub getAreaColors { my ($this) = @_; return @{$$this{AREA_COLORS}}; }</td></tr>
<tr><td class="h">376</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub getAreaColorByIndex {</td></tr>
<tr><td class="h">377</td><td><div class="c3">42</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L377">42</a></div></td><td><div>163</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($this, $index) = @_;</td></tr>
<tr><td class="h">378</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>195</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @colors = $this-&gt;getAreaColors();</td></tr>
<tr><td class="h">379</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>186</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $nextColor = $colors[$index % @colors];</td></tr>
<tr><td class="h">380</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>176</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $nextColor;</td></tr>
<tr><td class="h">381</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">382</td><td colspan="6"></td></tr><tr><td class="h">383</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub setLineColors</td></tr>
<tr><td class="h">384</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">385</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L385">10</a></div></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($this, @LineColors) = @_;</td></tr>
<tr><td class="h">386</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$$this{LINE_COLORS} = \@LineColors;</td></tr>
<tr><td class="h">387</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>59</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$$this{NEXT_LINE_COLOR} = 0;</td></tr>
<tr><td class="h">388</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">389</td><td><div class="c3">10</div><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L389">10</a></div></td><td><div>34</div><div>30</div><div>82</div></td><td class="s">sub getLineColors { my ($this) = @_; return @{$$this{LINE_COLORS}}; }</td></tr>
<tr><td class="h">390</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub getLineColorByIndex {</td></tr>
<tr><td class="h">391</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L391">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($this, $index) = @_;</td></tr>
<tr><td class="h">392</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @colors = $this-&gt;getLineColors();</td></tr>
<tr><td class="h">393</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $nextColor = $colors[$index % @colors];</td></tr>
<tr><td class="h">394</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $nextColor;</td></tr>
<tr><td class="h">395</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">396</td><td colspan="6"></td></tr><tr><td class="h">397</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L397">10</a></div></td><td><div>40</div><div>52</div></td><td class="s">sub setColors { my ($this, @Colors) = @_; $$this{COLORS} = \@Colors; }</td></tr>
<tr><td class="h">398</td><td><div class="c3">10</div><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L398">10</a></div></td><td><div>33</div><div>34</div><div>44</div></td><td class="s">sub getColors { my ($this) = @_; return @{$$this{COLORS}}; }</td></tr>
<tr><td class="h">399</td><td colspan="6"></td></tr><tr><td class="h">400</td><td><div class="c3">20</div><div class="c3">20</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L400">20</a></div></td><td><div>101</div><div>138</div></td><td class="s">sub setGridColor { my ($this, @gridColor) = @_; $$this{GRID_COLOR} = \@gridColor; }</td></tr>
<tr><td class="h">401</td><td><div class="c3">20</div><div class="c3">20</div><div class="c3">20</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L401">20</a></div></td><td><div>68</div><div>53</div><div>128</div></td><td class="s">sub getGridColor { my ($this) = @_; return @{$$this{GRID_COLOR}}; }</td></tr>
<tr><td class="h">402</td><td colspan="6"></td></tr><tr><td class="h">403</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L403">10</a></div></td><td><div>41</div><div>45</div></td><td class="s">sub setFileDir { my ($this, $dir) = @_; $$this{FILE_DIR} = $dir; }</td></tr>
<tr><td class="h">404</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L404">10</a></div></td><td><div>39</div><div>67</div></td><td class="s">sub getFileDir { my ($this) = @_; return $$this{FILE_DIR}; }</td></tr>
<tr><td class="h">405</td><td colspan="6"></td></tr><tr><td class="h">406</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L406">10</a></div></td><td><div>39</div><div>47</div></td><td class="s">sub setFileName { my ($this, $name) = @_; $$this{FILE_NAME} = $name; }</td></tr>
<tr><td class="h">407</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L407">10</a></div></td><td><div>36</div><div>40</div></td><td class="s">sub getFileName { my ($this) = @_; return $$this{FILE_NAME}; }</td></tr>
<tr><td class="h">408</td><td colspan="6"></td></tr><tr><td class="h">409</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L409">10</a></div></td><td><div>40</div><div>42</div></td><td class="s">sub setMargin { my ($this, $margin) = @_; $$this{MARGIN} = $margin; }</td></tr>
<tr><td class="h">410</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L410">10</a></div></td><td><div>44</div><div>41</div></td><td class="s">sub getMargin { my ($this) = @_; return $$this{MARGIN}; }</td></tr>
<tr><td class="h">411</td><td colspan="6"></td></tr><tr><td class="h">412</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L412">10</a></div></td><td><div>39</div><div>44</div></td><td class="s">sub setImage { my ($this, $image) = @_; $$this{IMAGE} = $image; }</td></tr>
<tr><td class="h">413</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L413">10</a></div></td><td><div>37</div><div>39</div></td><td class="s">sub getImage { my ($this) = @_; return $$this{IMAGE}; }</td></tr>
<tr><td class="h">414</td><td colspan="6"></td></tr><tr><td class="h">415</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub setFont</td></tr>
<tr><td class="h">416</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">417</td><td><div class="c3">70</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L417">70</a></div></td><td><div>264</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($this, $type, $font) = @_;</td></tr>
<tr><td class="h">418</td><td><div class="c3">70</div></td><td></td><td></td><td></td><td><div>293</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$$this{&quot;FONT_$type&quot;} = $font;</td></tr>
<tr><td class="h">419</td><td><div class="c3">70</div></td><td></td><td></td><td></td><td><div>433</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$$this{&quot;FONT_WIDTH_$type&quot;} = $font-&gt;width;</td></tr>
<tr><td class="h">420</td><td><div class="c3">70</div></td><td></td><td></td><td></td><td><div>439</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$$this{&quot;FONT_HEIGHT_$type&quot;} = $font-&gt;height;</td></tr>
<tr><td class="h">421</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">422</td><td><div class="c3">212</div><div class="c3">212</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L422">212</a></div></td><td><div>698</div><div>1583</div></td><td class="s">sub getFont { my ($this, $type) = @_; return $$this{&quot;FONT_$type&quot;}; }</td></tr>
<tr><td class="h">423</td><td><div class="c3">180</div><div class="c3">180</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L423">180</a></div></td><td><div>643</div><div>1213</div></td><td class="s">sub getFontWidth { my ($this, $type) = @_; return $$this{&quot;FONT_WIDTH_$type&quot;}; }</td></tr>
<tr><td class="h">424</td><td><div class="c3">180</div><div class="c3">180</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L424">180</a></div></td><td><div>593</div><div>1378</div></td><td class="s">sub getFontHeight { my ($this, $type) = @_; return $$this{&quot;FONT_HEIGHT_$type&quot;}; }</td></tr>
<tr><td class="h">425</td><td colspan="6"></td></tr><tr><td class="h">426</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L426">10</a></div></td><td><div>46</div><div>54</div></td><td class="s">sub setBGcolor { my ($this, @bgcolor) = @_; $$this{BGCOLOR} = \@bgcolor; }</td></tr>
<tr><td class="h">427</td><td><div class="c3">10</div><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L427">10</a></div></td><td><div>40</div><div>28</div><div>59</div></td><td class="s">sub getBGcolor { my ($this) = @_; return @{$$this{BGCOLOR}}; }</td></tr>
<tr><td class="h">428</td><td colspan="6"></td></tr><tr><td class="h">429</td><td><div class="c3">20</div><div class="c3">20</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L429">20</a></div></td><td><div>83</div><div>85</div></td><td class="s">sub setNumYDigits { my ($this, $numDigits) = @_; $$this{NUM_Y_DIGITS} = $numDigits; }</td></tr>
<tr><td class="h">430</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L430">10</a></div></td><td><div>38</div><div>37</div></td><td class="s">sub getNumYDigits { my ($this) = @_; return $$this{NUM_Y_DIGITS}; }</td></tr>
<tr><td class="h">431</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L431">10</a></div></td><td><div>37</div><div>38</div></td><td class="s">sub setNumXDigits { my ($this, $numDigits) = @_; $$this{NUM_X_DIGITS} = $numDigits; }</td></tr>
<tr><td class="h">432</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L432">10</a></div></td><td><div>42</div><div>37</div></td><td class="s">sub getNumXDigits { my ($this) = @_; return $$this{NUM_X_DIGITS}; }</td></tr>
<tr><td class="h">433</td><td colspan="6"></td></tr><tr><td class="h">434</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L434">10</a></div></td><td><div>38</div><div>49</div></td><td class="s">sub setPointSize { my ($this, $pixels) = @_; $$this{POINT_SIZE} = $pixels; }</td></tr>
<tr><td class="h">435</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L435">10</a></div></td><td><div>33</div><div>48</div></td><td class="s">sub getPointSize { my ($this) = @_; return $$this{POINT_SIZE}; }</td></tr>
<tr><td class="h">436</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L436">10</a></div></td><td><div>38</div><div>47</div></td><td class="s">sub setLineWidth { my ($this, $pixels) = @_; $$this{LINE_WIDTH} = $pixels; }</td></tr>
<tr><td class="h">437</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L437">10</a></div></td><td><div>34</div><div>43</div></td><td class="s">sub getLineWidth { my ($this) = @_; return $$this{LINE_WIDTH}; }</td></tr>
<tr><td class="h">438</td><td colspan="6"></td></tr><tr><td class="h">439</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L439">10</a></div></td><td><div>43</div><div>48</div></td><td class="s">sub setBarLeadingSpace { my ($this, $pixels) = @_; $$this{BAR_LEADING_SPACE} = $pixels; }</td></tr>
<tr><td class="h">440</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L440">10</a></div></td><td><div>45</div><div>45</div></td><td class="s">sub getBarLeadingSpace { my ($this) = @_; return $$this{BAR_LEADING_SPACE}; }</td></tr>
<tr><td class="h">441</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L441">10</a></div></td><td><div>38</div><div>50</div></td><td class="s">sub setBarTrailingSpace { my ($this, $pixels) = @_; $$this{BAR_TRAILING_SPACE} = $pixels; }</td></tr>
<tr><td class="h">442</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L442">10</a></div></td><td><div>33</div><div>47</div></td><td class="s">sub getBarTrailingSpace { my ($this) = @_; return $$this{BAR_TRAILING_SPACE}; }</td></tr>
<tr><td class="h">443</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L443">10</a></div></td><td><div>39</div><div>909</div></td><td class="s">sub setBarSpace { my ($this, $pixels) = @_; $$this{BAR_SPACE} = $pixels; }</td></tr>
<tr><td class="h">444</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L444">10</a></div></td><td><div>34</div><div>42</div></td><td class="s">sub getBarSpace { my ($this) = @_; return $$this{BAR_SPACE}; }</td></tr>
<tr><td class="h">445</td><td colspan="6"></td></tr><tr><td class="h">446</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub computeFinalColors</td></tr>
<tr><td class="h">447</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">448</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L448">10</a></div></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($this) = @_;</td></tr>
<tr><td class="h">449</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $numDataSets = $this-&gt;getNumDataSets();</td></tr>
<tr><td class="h">450</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @subTypes = $this-&gt;getSubTypes();</td></tr>
<tr><td class="h">451</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $im = $this-&gt;getImage();</td></tr>
<tr><td class="h">452</td><td colspan="6"></td></tr><tr><td class="h">453</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Calculate the colors that will be needed.</td></tr>
<tr><td class="h">454</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If &#39;type&#39; = line or area then call getColors().  If no colors</td></tr>
<tr><td class="h">455</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# defined, then default to getLineColors() for lines and</td></tr>
<tr><td class="h">456</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# getAreaColors() for areas.</td></tr>
<tr><td class="h">457</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If &#39;type&#39; = combo, then get colors via getColors().  If no colors</td></tr>
<tr><td class="h">458</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# defined, then call getDataType() to determine if the data sets are</td></tr>
<tr><td class="h">459</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# specified as lines or areas and get the next available color from</td></tr>
<tr><td class="h">460</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# getLineColors() and/or getAreaColors().</td></tr>
<tr><td class="h">461</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @colors = $this-&gt;getColors();</td></tr>
<tr><td class="h">462</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @lineColors = $this-&gt;getLineColors();</td></tr>
<tr><td class="h">463</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @areaColors = $this-&gt;getAreaColors();</td></tr>
<tr><td class="h">464</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @chartColors = ();	# Actual colors used for each line/area</td></tr>
<tr><td class="h">465</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L465">50</a></div></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (@colors) {</td></tr>
<tr><td class="h">466</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# User defined colors.  Reuse colors if there are more data sets</td></tr>
<tr><td class="h">467</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# than colors.</td></tr>
<tr><td class="h">468</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $numColors = @colors;</td></tr>
<tr><td class="h">469</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (1..POSIX::ceil($numDataSets / $numColors)) {</td></tr>
<tr><td class="h">470</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push (@chartColors, @colors);</td></tr>
<tr><td class="h">471</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">472</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">473</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# No user defined colors so use the defaults.  This can be a bit</td></tr>
<tr><td class="h">474</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# tricky since depending on what &#39;type&#39; the data is will determine</td></tr>
<tr><td class="h">475</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# where we get the next color.</td></tr>
<tr><td class="h">476</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $index = 0;</td></tr>
<tr><td class="h">477</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $subType (@subTypes) {</td></tr>
<tr><td class="h">478</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>112</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $color;</td></tr>
<tr><td class="h">479</td><td><div class="c3">42</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L479">50</a></div></td><td></td><td></td><td><div>198</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($subType =~ /(area|bar)/ ) {</td></tr>
<tr><td class="h">480</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>157</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$color = $this-&gt;getAreaColorByIndex($index);</td></tr>
<tr><td class="h">481</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">482</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$color = $this-&gt;getLineColorByIndex($index);</td></tr>
<tr><td class="h">483</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">484</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>131</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push (@chartColors, $color);</td></tr>
<tr><td class="h">485</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>151</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$index++;</td></tr>
<tr><td class="h">486</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">487</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">488</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Walk through each color and allocate it in the GD.</td></tr>
<tr><td class="h">489</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @allocatedColors;</td></tr>
<tr><td class="h">490</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for my $color (@chartColors) {</td></tr>
<tr><td class="h">491</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>165</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push (@allocatedColors, $im-&gt;colorAllocate(_convert_color($color)));</td></tr>
<tr><td class="h">492</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">493</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @allocatedColors;</td></tr>
<tr><td class="h">494</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">495</td><td colspan="6"></td></tr><tr><td class="h">496</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Calculate the &#39;types&#39; for each of the data sets.  If getType() is &#39;area&#39;,</td></tr>
<tr><td class="h">497</td><td></td><td></td><td></td><td></td><td></td><td class="s"># then artificially fill in subTypes for each data set to match that type.</td></tr>
<tr><td class="h">498</td><td></td><td></td><td></td><td></td><td></td><td class="s"># If type is &#39;combo&#39;, then subTypes should have been specified by the user.</td></tr>
<tr><td class="h">499</td><td></td><td></td><td></td><td></td><td></td><td class="s"># If not, then assume that all but the last data set are &#39;area&#39; and the</td></tr>
<tr><td class="h">500</td><td></td><td></td><td></td><td></td><td></td><td class="s"># last is &#39;line&#39;.</td></tr>
<tr><td class="h">501</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub computeSubTypes {</td></tr>
<tr><td class="h">502</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L502">10</a></div></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($this) = @_;</td></tr>
<tr><td class="h">503</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $numDataSets = $this-&gt;getNumDataSets();</td></tr>
<tr><td class="h">504</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $type = $this-&gt;getType();</td></tr>
<tr><td class="h">505</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @subTypes = ();</td></tr>
<tr><td class="h">506</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Deal with types that don&#39;t allow subtypes.  In this case force all</td></tr>
<tr><td class="h">507</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# subtypes to be the same as the type.</td></tr>
<tr><td class="h">508</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L508">50</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--condition.html#L508">33</a></div></td><td></td><td><div>106</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (($type eq &quot;area&quot;) || ($type eq &quot;bar&quot;) ) {</td></tr>
<tr><td class="h">509</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (1..$numDataSets) {</td></tr>
<tr><td class="h">510</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>164</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push (@subTypes, $type);</td></tr>
<tr><td class="h">511</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">512</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>58</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setSubTypes(@subTypes);</td></tr>
<tr><td class="h">513</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">514</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If a user specified subtype, then reuse user&#39;s info over and</td></tr>
<tr><td class="h">515</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# over again if there are more data sets than subtypes specified.</td></tr>
<tr><td class="h">516</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If no subtype, then assume all but the last data set are &#39;area&#39;</td></tr>
<tr><td class="h">517</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# and the last &#39;line&#39;.</td></tr>
<tr><td class="h">518</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @userSubTypes = $this-&gt;getSubTypes();</td></tr>
<tr><td class="h">519</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L519">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (@userSubTypes) {</td></tr>
<tr><td class="h">520</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $numUserSubTypes = @userSubTypes;</td></tr>
<tr><td class="h">521</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (1..POSIX::ceil($numDataSets / $numUserSubTypes)) {</td></tr>
<tr><td class="h">522</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push (@subTypes, @userSubTypes);</td></tr>
<tr><td class="h">523</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">524</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">525</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If no &#39;subtype&#39; specified and type is &#39;combo&#39; or &#39;scatter&#39;,</td></tr>
<tr><td class="h">526</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# assume all &#39;area&#39; except the last which is &#39;line&#39;, otherwise</td></tr>
<tr><td class="h">527</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# assume a subtype of &#39;line&#39; for type &#39;line&#39;.</td></tr>
<tr><td class="h">528</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L528">0</a></div><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L528">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($type eq &quot;line&quot;) {</td></tr>
<tr><td class="h">529</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $y (1..$numDataSets) {</td></tr>
<tr><td class="h">530</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push (@subTypes, &quot;line&quot;);</td></tr>
<tr><td class="h">531</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">532</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif ($type eq &quot;scatter&quot;) {</td></tr>
<tr><td class="h">533</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $y (1..$numDataSets) {</td></tr>
<tr><td class="h">534</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push (@subTypes, &quot;point&quot;);</td></tr>
<tr><td class="h">535</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">536</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">537</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $y (1..$numDataSets-1) {</td></tr>
<tr><td class="h">538</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push (@subTypes, &quot;area&quot;);</td></tr>
<tr><td class="h">539</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">540</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push (@subTypes, &quot;line&quot;);</td></tr>
<tr><td class="h">541</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">542</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">543</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">544</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Set the subTypes since they will have changed and other calculations</td></tr>
<tr><td class="h">545</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# need this information.</td></tr>
<tr><td class="h">546</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setSubTypes(@subTypes);</td></tr>
<tr><td class="h">547</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @subTypes;</td></tr>
<tr><td class="h">548</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">549</td><td colspan="6"></td></tr><tr><td class="h">550</td><td></td><td></td><td></td><td></td><td></td><td class="s"># The main guts of this file.  This routine takes all the information</td></tr>
<tr><td class="h">551</td><td></td><td></td><td></td><td></td><td></td><td class="s"># specified in the Chart object and constructs a chart based on all of the</td></tr>
<tr><td class="h">552</td><td></td><td></td><td></td><td></td><td></td><td class="s"># information contained in the object.</td></tr>
<tr><td class="h">553</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub makeChart {</td></tr>
<tr><td class="h">554</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L554">10</a></div></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($this) = @_;</td></tr>
<tr><td class="h">555</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $imageWidth = $this-&gt;getImageWidth();</td></tr>
<tr><td class="h">556</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $imageHeight = $this-&gt;getImageHeight();</td></tr>
<tr><td class="h">557</td><td colspan="6"></td></tr><tr><td class="h">558</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Create empty image to get filled in later.</td></tr>
<tr><td class="h">559</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>76</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $im = new GD::Image($imageWidth, $imageHeight);</td></tr>
<tr><td class="h">560</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setImage($im);</td></tr>
<tr><td class="h">561</td><td colspan="6"></td></tr><tr><td class="h">562</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Define some commonly used colors</td></tr>
<tr><td class="h">563</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $defaultBGcolorText = &quot;ffffff&quot;;</td></tr>
<tr><td class="h">564</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $defaultBGcolor = $im-&gt;colorAllocate(_convert_color($defaultBGcolorText));</td></tr>
<tr><td class="h">565</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $black = $im-&gt;colorAllocate(0,0,0);		# black</td></tr>
<tr><td class="h">566</td><td colspan="6"></td></tr><tr><td class="h">567</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Create the background color.  If not defined, default to white, else</td></tr>
<tr><td class="h">568</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# use the user specified value.</td></tr>
<tr><td class="h">569</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @bgcolor = $this-&gt;getBGcolor();</td></tr>
<tr><td class="h">570</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Start with a totally white background</td></tr>
<tr><td class="h">571</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>9301</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;filledRectangle(0, 0, $imageWidth - 1, $imageHeight - 1, $defaultBGcolor);</td></tr>
<tr><td class="h">572</td><td colspan="6"></td></tr><tr><td class="h">573</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Calculate the &#39;types&#39; for each of the data sets.</td></tr>
<tr><td class="h">574</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @subTypes = $this-&gt;computeSubTypes();</td></tr>
<tr><td class="h">575</td><td colspan="6"></td></tr><tr><td class="h">576</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Count how many of the data sets are &#39;bar&#39;</td></tr>
<tr><td class="h">577</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>88</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $numBarDataSets = grep(/bar/, @subTypes);</td></tr>
<tr><td class="h">578</td><td colspan="6"></td></tr><tr><td class="h">579</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $type = $this-&gt;getType;</td></tr>
<tr><td class="h">580</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If a scatter chart, then set the following flag</td></tr>
<tr><td class="h">581</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $scatterChart;</td></tr>
<tr><td class="h">582</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L582">50</a></div></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$scatterChart = 1 if ($type eq &quot;scatter&quot;);</td></tr>
<tr><td class="h">583</td><td colspan="6"></td></tr><tr><td class="h">584</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get the number of pixels width/height of drawn data points.</td></tr>
<tr><td class="h">585</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $pointSize = $this-&gt;getPointSize;</td></tr>
<tr><td class="h">586</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $pointSizeHalf = $pointSize / 2;</td></tr>
<tr><td class="h">587</td><td colspan="6"></td></tr><tr><td class="h">588</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get the number of pixels width lines are to be drawn with</td></tr>
<tr><td class="h">589</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $lineWidth = $this-&gt;getLineWidth;</td></tr>
<tr><td class="h">590</td><td colspan="6"></td></tr><tr><td class="h">591</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get the Y axis scale to use</td></tr>
<tr><td class="h">592</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $scale = $this-&gt;getScale();</td></tr>
<tr><td class="h">593</td><td colspan="6"></td></tr><tr><td class="h">594</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get the data and info about the data.</td></tr>
<tr><td class="h">595</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @data = $this-&gt;getData();</td></tr>
<tr><td class="h">596</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $numDataSets = $this-&gt;getNumDataSets();</td></tr>
<tr><td class="h">597</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $numDataPoints = $this-&gt;getNumDataPoints();</td></tr>
<tr><td class="h">598</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L598">50</a></div></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &quot;Error: Number of data points needs to be &gt; 1&quot; if ($numDataPoints &lt;= 1);</td></tr>
<tr><td class="h">599</td><td colspan="6"></td></tr><tr><td class="h">600</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Calculate the colors that will be needed for the various lines and</td></tr>
<tr><td class="h">601</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# areas figuring out which color is needed when and also dealing with</td></tr>
<tr><td class="h">602</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# color reuse (more data sets than colors specified).</td></tr>
<tr><td class="h">603</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @allocatedColors = $this-&gt;computeFinalColors();</td></tr>
<tr><td class="h">604</td><td colspan="6"></td></tr><tr><td class="h">605</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Allocate the grid color(s) and define a line style for the grid for</td></tr>
<tr><td class="h">606</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# grids defined as &#39;dot&#39;.  For grids defined as &#39;on&#39;, then just use the</td></tr>
<tr><td class="h">607</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# first color defined</td></tr>
<tr><td class="h">608</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $firstColor = undef;</td></tr>
<tr><td class="h">609</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %gridColors;</td></tr>
<tr><td class="h">610</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get unique list of colors.</td></tr>
<tr><td class="h">611</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $color ($this-&gt;getGridColor()) {</td></tr>
<tr><td class="h">612</td><td><div class="c3">60</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L612">100</a></div></td><td></td><td></td><td><div>265</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$firstColor = $color if (! defined $firstColor);</td></tr>
<tr><td class="h">613</td><td><div class="c3">60</div></td><td></td><td></td><td></td><td><div>227</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$gridColors{$color} = 1;</td></tr>
<tr><td class="h">614</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">615</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Allocate color for each unique grid color</td></tr>
<tr><td class="h">616</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>67</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for my $color (keys %gridColors) {</td></tr>
<tr><td class="h">617</td><td><div class="c3">20</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L617">100</a></div></td><td></td><td></td><td><div>104</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if ($color eq &quot;transparent&quot;);</td></tr>
<tr><td class="h">618</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$gridColors{$color} = $im-&gt;colorAllocate(_convert_color($color));</td></tr>
<tr><td class="h">619</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">620</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @gridColors;</td></tr>
<tr><td class="h">621</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Now define array of colors for grid</td></tr>
<tr><td class="h">622</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $color ($this-&gt;getGridColor()) {</td></tr>
<tr><td class="h">623</td><td><div class="c3">60</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L623">100</a></div></td><td></td><td></td><td><div>233</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($color eq &quot;transparent&quot;) {</td></tr>
<tr><td class="h">624</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td><div>121</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push(@gridColors, gdTransparent)</td></tr>
<tr><td class="h">625</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">626</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td><div>124</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push(@gridColors, $gridColors{$color})</td></tr>
<tr><td class="h">627</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">628</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">629</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>85</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;setStyle(@gridColors);</td></tr>
<tr><td class="h">630</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get the first color for solid grid lines</td></tr>
<tr><td class="h">631</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $gridColor = $gridColors{$firstColor};</td></tr>
<tr><td class="h">632</td><td colspan="6"></td></tr><tr><td class="h">633</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Calculate the initial pixel locations of lower left side (xLL/yLL)</td></tr>
<tr><td class="h">634</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# and upper right side (xUR/yUR) of the chart with respect to the</td></tr>
<tr><td class="h">635</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# graphic image.  Depending on X/Y labels, titles, legends, etc. this</td></tr>
<tr><td class="h">636</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# will change in the code below.</td></tr>
<tr><td class="h">637</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $margin = $this-&gt;getMargin();</td></tr>
<tr><td class="h">638</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xLL = $margin;</td></tr>
<tr><td class="h">639</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $yLL = $imageHeight - 1 - $margin;</td></tr>
<tr><td class="h">640</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xUR = $imageWidth - 1 - $margin;</td></tr>
<tr><td class="h">641</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $yUR = $margin;</td></tr>
<tr><td class="h">642</td><td colspan="6"></td></tr><tr><td class="h">643</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Calculate how much space will be needed for the Y label (if specified).</td></tr>
<tr><td class="h">644</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $yLabel = $this-&gt;getYlabel();</td></tr>
<tr><td class="h">645</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L645">50</a></div></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (defined $yLabel) {</td></tr>
<tr><td class="h">646</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Add space for the label as well as some space between the label</td></tr>
<tr><td class="h">647</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# and the Y Axis labels or the left side of the chart.</td></tr>
<tr><td class="h">648</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xLL += $this-&gt;getFontHeight(&quot;ylabel&quot;) + 10;</td></tr>
<tr><td class="h">649</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">650</td><td colspan="6"></td></tr><tr><td class="h">651</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get various bits of info concerning the chart.</td></tr>
<tr><td class="h">652</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $yAxisMin = $this-&gt;getYmin();</td></tr>
<tr><td class="h">653</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $yAxisMax = $this-&gt;getYmax();</td></tr>
<tr><td class="h">654</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $yAxisDecimalDigits = 0;</td></tr>
<tr><td class="h">655</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If the user has not specified either of ymin or ymax, then compute</td></tr>
<tr><td class="h">656</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# some reasonable values based on the min/max of the actual data</td></tr>
<tr><td class="h">657</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# itself.  Also compute the number of significant digits in the numbers</td></tr>
<tr><td class="h">658</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# to aid in knowing how to format the numbers when printing as well as</td></tr>
<tr><td class="h">659</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# the new number of Y grids.</td></tr>
<tr><td class="h">660</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $numYGrids = $this-&gt;getNumYGrids();</td></tr>
<tr><td class="h">661</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L661">50</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--condition.html#L661">33</a></div></td><td></td><td><div>68</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (! defined($yAxisMin) &amp;&amp; ! defined($yAxisMax)) {</td></tr>
<tr><td class="h">662</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L662">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($scale eq &quot;semilog&quot;) {</td></tr>
<tr><td class="h">663</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;computeYMinMaxLog();</td></tr>
<tr><td class="h">664</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">665</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ($newYmin, $newYmax, $newNumYGrids, $newNumYDecimalDigits) = $this-&gt;computeLinearMinMax($this-&gt;getYminOfData(), $this-&gt;getYmaxOfData(), $numYGrids);</td></tr>
<tr><td class="h">666</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setYminOfData($newYmin);</td></tr>
<tr><td class="h">667</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setYmaxOfData($newYmax);</td></tr>
<tr><td class="h">668</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setNumYGrids($numYGrids = $newNumYGrids);</td></tr>
<tr><td class="h">669</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setNumYDigits($newNumYDecimalDigits);</td></tr>
<tr><td class="h">670</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">671</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">672</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# At least one of ymin or ymax specified by the user.</td></tr>
<tr><td class="h">673</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If scale=semilog, we still auto compute min/max while if</td></tr>
<tr><td class="h">674</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# scale=linear we use the users set values.</td></tr>
<tr><td class="h">675</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L675">50</a></div></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($scale eq &quot;semilog&quot;) {</td></tr>
<tr><td class="h">676</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L676">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setYminOfData($yAxisMin) if (defined $yAxisMin);</td></tr>
<tr><td class="h">677</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L677">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setYmaxOfData($yAxisMax) if (defined $yAxisMax);</td></tr>
<tr><td class="h">678</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;computeYMinMaxLog();</td></tr>
<tr><td class="h">679</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;undef $yAxisMin;	# Force re-read below</td></tr>
<tr><td class="h">680</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;undef $yAxisMax;</td></tr>
<tr><td class="h">681</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">682</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Compute the number of digits to use when displaying the Y axis</td></tr>
<tr><td class="h">683</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# labels.</td></tr>
<tr><td class="h">684</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ymin = $this-&gt;getYmin();</td></tr>
<tr><td class="h">685</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ymax = $this-&gt;getYmax();</td></tr>
<tr><td class="h">686</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L686">50</a></div></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ymin = $this-&gt;getYminOfData() if (! defined($ymin));</td></tr>
<tr><td class="h">687</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L687">50</a></div></td><td></td><td></td><td><div>75</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ymax = $this-&gt;getYmaxOfData() if (! defined($ymax));</td></tr>
<tr><td class="h">688</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $maxDigits = $this-&gt;computeNumDigits($ymin, $ymax, $numYGrids);</td></tr>
<tr><td class="h">689</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setNumYDigits($maxDigits);</td></tr>
<tr><td class="h">690</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">691</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">692</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L692">50</a></div></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$yAxisMin = $this-&gt;getYminOfData() if (! defined($yAxisMin));</td></tr>
<tr><td class="h">693</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L693">50</a></div></td><td></td><td></td><td><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$yAxisMax = $this-&gt;getYmaxOfData() if (! defined($yAxisMax));</td></tr>
<tr><td class="h">694</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $scaledYAxisMin = $this-&gt;_scale($yAxisMin);</td></tr>
<tr><td class="h">695</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $scaledYAxisMax = $this-&gt;_scale($yAxisMax);</td></tr>
<tr><td class="h">696</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$yAxisDecimalDigits = $this-&gt;getNumYDigits();</td></tr>
<tr><td class="h">697</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $chartHeight = $scaledYAxisMax - $scaledYAxisMin;</td></tr>
<tr><td class="h">698</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Check to see if either the user specified ymin/ymax values, or the</td></tr>
<tr><td class="h">699</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# data itself was such that they are both the same such that there is</td></tr>
<tr><td class="h">700</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# no height.</td></tr>
<tr><td class="h">701</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L701">50</a></div></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &quot;Chart height = 0 (ymin($yAxisMin) == ymax($yAxisMax))&quot; if ($chartHeight == 0);</td></tr>
<tr><td class="h">702</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Check to see if either the user specified ymin/ymax values, or the</td></tr>
<tr><td class="h">703</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# data itself was such that ymin &gt; ymax.</td></tr>
<tr><td class="h">704</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L704">50</a></div></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &quot;Y max ($yAxisMax) &lt; Y Min ($yAxisMin)&quot; if ($chartHeight &lt; 0);</td></tr>
<tr><td class="h">705</td><td colspan="6"></td></tr><tr><td class="h">706</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# To support scatter graphs (where the X data is probably not sorted)</td></tr>
<tr><td class="h">707</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# we get the X axis labels and sort them (numerically) producing an</td></tr>
<tr><td class="h">708</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# array of indexes which will then be used when plotting the actual</td></tr>
<tr><td class="h">709</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# data.  For example, if @xAxis is (1 3 5 2 4), then the indexes of the</td></tr>
<tr><td class="h">710</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# values to plot would be 0 3 1 4 2</td></tr>
<tr><td class="h">711</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @xAxis = $this-&gt;getXaxis();</td></tr>
<tr><td class="h">712</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xGrid = $this-&gt;getXgrid();</td></tr>
<tr><td class="h">713</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xAxisNumeric = 1;	# Flag whether the X axis values are numeric or not.</td></tr>
<tr><td class="h">714</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %xAxisIndex;</td></tr>
<tr><td class="h">715</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Check to see if the X axis values are numeric or not.  If not, then</td></tr>
<tr><td class="h">716</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# we fake X axis data to be the indexes in the array.</td></tr>
<tr><td class="h">717</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L717">50</a></div></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (@xAxis) {</td></tr>
<tr><td class="h">718</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $index (0..$#xAxis) {</td></tr>
<tr><td class="h">719</td><td><div class="c3">62</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L719">100</a></div></td><td></td><td></td><td><div>362</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($xAxis[$index] =~ m/([\-]?[0-9.]+[eE]?[+-]?\d*)/) {</td></tr>
<tr><td class="h">720</td><td><div class="c3">52</div></td><td></td><td></td><td></td><td><div>268</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xAxisIndex{$index} = $1;</td></tr>
<tr><td class="h">721</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">722</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xAxisIndex{$index} = $index;</td></tr>
<tr><td class="h">723</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xAxisNumeric = 0;</td></tr>
<tr><td class="h">724</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">725</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">726</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">727</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L727">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($scatterChart) {	# No xaxis specified and scatter graph</td></tr>
<tr><td class="h">728</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &quot;xaxis needs to be specified for a scatter graph&quot;;</td></tr>
<tr><td class="h">729</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">730</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $index (0..$numDataPoints) {</td></tr>
<tr><td class="h">731</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xAxisIndex{$index} = $index;</td></tr>
<tr><td class="h">732</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">733</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">734</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">735</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L735">50</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--condition.html#L735">33</a></div></td><td></td><td><div>71</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &quot;non-numeric X axis values not allowed for a scatter graph&quot; if ($scatterChart &amp;&amp; ! $xAxisNumeric);</td></tr>
<tr><td class="h">736</td><td colspan="6"></td></tr><tr><td class="h">737</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Get the number of user specified X axis lines/labels to draw.</td></tr>
<tr><td class="h">738</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $numXGrids = $this-&gt;getNumXGrids();</td></tr>
<tr><td class="h">739</td><td colspan="6"></td></tr><tr><td class="h">740</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Create an array that will represent the drawn X axis grid lines.  If</td></tr>
<tr><td class="h">741</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# a chart type is &#39;scatter&#39;, then assume the X axis data is real</td></tr>
<tr><td class="h">742</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# numbers (not simple text).</td></tr>
<tr><td class="h">743</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @xAxisLabels;</td></tr>
<tr><td class="h">744</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xAxisMin;</td></tr>
<tr><td class="h">745</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xAxisMax;</td></tr>
<tr><td class="h">746</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L746">50</a></div></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($scatterChart) {</td></tr>
<tr><td class="h">747</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xAxisMin =  9e+40;	# Initialize with some very large value.</td></tr>
<tr><td class="h">748</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xAxisMax = -9e+40;	# Initialize with some very small value.</td></tr>
<tr><td class="h">749</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $i (0..$#xAxis) {</td></tr>
<tr><td class="h">750</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $value = $xAxisIndex{$i};</td></tr>
<tr><td class="h">751</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L751">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($value =~ m/([\-]?[0-9.]+[eE]?[+-]?\d*)/) {</td></tr>
<tr><td class="h">752</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L752">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xAxisMin = $1 if( $1 &lt; $xAxisMin );</td></tr>
<tr><td class="h">753</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L753">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xAxisMax = $1 if( $1 &gt; $xAxisMax );</td></tr>
<tr><td class="h">754</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">755</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">756</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ($newXmin, $newXmax, $newNumXGrids, $newNumXDecimalDigits);</td></tr>
<tr><td class="h">757</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Since we are &#39;scatter&#39; and there are &#39;bar&#39; subtypes, we need to</td></tr>
<tr><td class="h">758</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# artificially ask for 1 more X grid than normal.</td></tr>
<tr><td class="h">759</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L759">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($numBarDataSets) {</td></tr>
<tr><td class="h">760</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($newXmin, $newXmax, $newNumXGrids, $newNumXDecimalDigits) = $this-&gt;computeLinearMinMax($xAxisMin, $xAxisMax + 1, $numDataPoints);</td></tr>
<tr><td class="h">761</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">762</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($newXmin, $newXmax, $newNumXGrids, $newNumXDecimalDigits) = $this-&gt;computeLinearMinMax($xAxisMin, $xAxisMax, $numXGrids + 1);</td></tr>
<tr><td class="h">763</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">764</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setXminOfData($xAxisMin = $newXmin);</td></tr>
<tr><td class="h">765</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setXmaxOfData($xAxisMax = $newXmax);</td></tr>
<tr><td class="h">766</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setNumXGrids($numXGrids = $newNumXGrids);</td></tr>
<tr><td class="h">767</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setNumXDigits($newNumXDecimalDigits);</td></tr>
<tr><td class="h">768</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">769</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setXminOfData($xAxisMin = 0);</td></tr>
<tr><td class="h">770</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Since not a scatter graph, then assume that the X axis labels are</td></tr>
<tr><td class="h">771</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# simple text and are drawn in the exact order that they occur in</td></tr>
<tr><td class="h">772</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# the table.  As an exception, if no X axis is specified, then</td></tr>
<tr><td class="h">773</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# there are no X labels to draw so just compute the number of grid</td></tr>
<tr><td class="h">774</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# lines.</td></tr>
<tr><td class="h">775</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L775">50</a></div></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (@xAxis) {</td></tr>
<tr><td class="h">776</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>59</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@xAxisLabels = @xAxis;</td></tr>
<tr><td class="h">777</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>63</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setXmaxOfData($xAxisMax = $#xAxis);</td></tr>
<tr><td class="h">778</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Set the number of X grids be the smaller of: number of data</td></tr>
<tr><td class="h">779</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# points to draw or the number of X grids the user specifies</td></tr>
<tr><td class="h">780</td><td><div class="c3">10</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L780">100</a></div></td><td></td><td></td><td><div>71</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setNumXGrids($numXGrids = ($numDataPoints-2)) if (($numDataPoints-2) &lt; $numXGrids);</td></tr>
<tr><td class="h">781</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">782</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@xAxisLabels = @xAxis;</td></tr>
<tr><td class="h">783</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setXmaxOfData($xAxisMax = $numDataPoints);</td></tr>
<tr><td class="h">784</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">785</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">786</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Compute the number of digits to use when displaying the Y axis</td></tr>
<tr><td class="h">787</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# labels.</td></tr>
<tr><td class="h">788</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L788">50</a></div></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($scatterChart) {</td></tr>
<tr><td class="h">789</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Check for error situation where there is no chart height as the</td></tr>
<tr><td class="h">790</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# xmin == xmax</td></tr>
<tr><td class="h">791</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L791">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &quot;Chart width = 0 (xmin($xAxisMin) == xmax($xAxisMax))&quot; if ($xAxisMin == $xAxisMax);</td></tr>
<tr><td class="h">792</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $maxDigits = $this-&gt;computeNumDigits($xAxisMin, $xAxisMax, $numXGrids);</td></tr>
<tr><td class="h">793</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setNumXDigits($maxDigits);</td></tr>
<tr><td class="h">794</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">795</td><td colspan="6"></td></tr><tr><td class="h">796</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Calculate how much space will be needed for the Y axis labels.</td></tr>
<tr><td class="h">797</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Although tedious, we need to walk through each number that will be</td></tr>
<tr><td class="h">798</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# drawn and calculate it&#39;s width since the widths can vary from number</td></tr>
<tr><td class="h">799</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# to number.</td></tr>
<tr><td class="h">800</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @yLabels;</td></tr>
<tr><td class="h">801</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L801">50</a></div></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($this-&gt;getYaxis() eq &quot;on&quot;) {</td></tr>
<tr><td class="h">802</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Calculate the string width of both the min/max Y axis labels so</td></tr>
<tr><td class="h">803</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# we know how much room to allocate for them.  Save the values for</td></tr>
<tr><td class="h">804</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# later use.</td></tr>
<tr><td class="h">805</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $labelInc = ($yAxisMax - $yAxisMin) / ($numYGrids + 1);</td></tr>
<tr><td class="h">806</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $yaxis = $yAxisMin;</td></tr>
<tr><td class="h">807</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $maxLength = 0;</td></tr>
<tr><td class="h">808</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $len;</td></tr>
<tr><td class="h">809</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $yAxisIndex (0..($numYGrids+1)) {</td></tr>
<tr><td class="h">810</td><td><div class="c3">110</div></td><td></td><td></td><td></td><td><div>389</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $text = _printNumber($yaxis, $yAxisDecimalDigits);</td></tr>
<tr><td class="h">811</td><td><div class="c3">110</div></td><td></td><td></td><td></td><td><div>365</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yLabels[$yAxisIndex] = $text;</td></tr>
<tr><td class="h">812</td><td><div class="c3">110</div></td><td></td><td></td><td></td><td><div>288</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$len = length ($text);</td></tr>
<tr><td class="h">813</td><td><div class="c3">110</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L813">100</a></div></td><td></td><td></td><td><div>501</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$maxLength = $len if ($len &gt; $maxLength);</td></tr>
<tr><td class="h">814</td><td><div class="c3">110</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L814">50</a></div></td><td></td><td></td><td><div>420</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($scale eq &quot;semilog&quot;) {</td></tr>
<tr><td class="h">815</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yaxis *= 10.0;</td></tr>
<tr><td class="h">816</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">817</td><td><div class="c3">110</div></td><td></td><td></td><td></td><td><div>400</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yaxis += $labelInc;</td></tr>
<tr><td class="h">818</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">819</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">820</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xLL += $this-&gt;getFontWidth(&quot;yaxis&quot;) * $maxLength;</td></tr>
<tr><td class="h">821</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">822</td><td colspan="6"></td></tr><tr><td class="h">823</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Calculate how much space will be needed for the X label (if specified).</td></tr>
<tr><td class="h">824</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xLabel = $this-&gt;getXlabel();</td></tr>
<tr><td class="h">825</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L825">50</a></div></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (defined $xLabel) {</td></tr>
<tr><td class="h">826</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yLL -= $this-&gt;getFontHeight(&quot;xlabel&quot;);</td></tr>
<tr><td class="h">827</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">828</td><td colspan="6"></td></tr><tr><td class="h">829</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Calculate how much space will be needed for the X axis labels (if</td></tr>
<tr><td class="h">830</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# specified).  Check the X axis angle to see what the orientation</td></tr>
<tr><td class="h">831</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# of the labels needs to be.</td></tr>
<tr><td class="h">832</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# A special case is scatter chart.</td></tr>
<tr><td class="h">833</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xAxisAngle = $this-&gt;getXaxisAngle();</td></tr>
<tr><td class="h">834</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xAxisMaxLen = 0;</td></tr>
<tr><td class="h">835</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @xLabels;</td></tr>
<tr><td class="h">836</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L836">50</a></div></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (@xAxis) {</td></tr>
<tr><td class="h">837</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L837">50</a></div></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($scatterChart) {</td></tr>
<tr><td class="h">838</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $xaxis = $xAxisMin;</td></tr>
<tr><td class="h">839</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $labelInc = ($xAxisMax - $xAxisMin) / ($numXGrids + 1);</td></tr>
<tr><td class="h">840</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $xAxisDecimalDigits = $this-&gt;getNumXDigits;</td></tr>
<tr><td class="h">841</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $xAxisIndex (0..($numXGrids + 1)) {</td></tr>
<tr><td class="h">842</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $text = _printNumber($xaxis, $xAxisDecimalDigits);</td></tr>
<tr><td class="h">843</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xLabels[$xAxisIndex] = $text;</td></tr>
<tr><td class="h">844</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xaxis += $labelInc;</td></tr>
<tr><td class="h">845</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">846</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">847</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L847">50</a></div></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($xAxisAngle == 0) {</td></tr>
<tr><td class="h">848</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Horizontal labels so just add the height of the font</td></tr>
<tr><td class="h">849</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yLL -= $this-&gt;getFontHeight(&quot;xaxis&quot;);</td></tr>
<tr><td class="h">850</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">851</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Note: if the angle is != 0, then assume 90 degrees (for now)</td></tr>
<tr><td class="h">852</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# so the labels are vertical so use the max length.</td></tr>
<tr><td class="h">853</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $maxLen = 0;</td></tr>
<tr><td class="h">854</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $len = 0;</td></tr>
<tr><td class="h">855</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L855">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($scatterChart) {</td></tr>
<tr><td class="h">856</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $xaxis = $xAxisMin;</td></tr>
<tr><td class="h">857</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $labelInc = ($xAxisMax - $xAxisMin) / ($numXGrids + 1);</td></tr>
<tr><td class="h">858</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $xAxisDecimalDigits = $this-&gt;getNumXDigits;</td></tr>
<tr><td class="h">859</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $xAxisIndex (0..($numXGrids+1)) {</td></tr>
<tr><td class="h">860</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $text = _printNumber($xaxis, $xAxisDecimalDigits);</td></tr>
<tr><td class="h">861</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$len = length($text);</td></tr>
<tr><td class="h">862</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L862">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$maxLen = $len if ($len &gt; $maxLen);</td></tr>
<tr><td class="h">863</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xaxis += $labelInc;</td></tr>
<tr><td class="h">864</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">865</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">866</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $x (values %xAxisIndex) {</td></tr>
<tr><td class="h">867</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$len = length($x);</td></tr>
<tr><td class="h">868</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L868">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$maxLen = $len if ($len &gt; $maxLen);</td></tr>
<tr><td class="h">869</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">870</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">871</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yLL -= $this-&gt;getFontWidth(&quot;xaxis&quot;) * $maxLen;</td></tr>
<tr><td class="h">872</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xAxisMaxLen = $maxLen</td></tr>
<tr><td class="h">873</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">874</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">875</td><td colspan="6"></td></tr><tr><td class="h">876</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Calculate how much space will be needed for the legend.</td></tr>
<tr><td class="h">877</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @legends = $this-&gt;getLegend();</td></tr>
<tr><td class="h">878</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L878">50</a></div></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (@legends) {</td></tr>
<tr><td class="h">879</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $legendWidth;</td></tr>
<tr><td class="h">880</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $maxLegendWidth = 0;</td></tr>
<tr><td class="h">881</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $legend (@legends) {</td></tr>
<tr><td class="h">882</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>128</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$legendWidth = length ($legend);</td></tr>
<tr><td class="h">883</td><td><div class="c3">42</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L883">100</a></div></td><td></td><td></td><td><div>246</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$maxLegendWidth = $legendWidth if ($legendWidth &gt; $maxLegendWidth);</td></tr>
<tr><td class="h">884</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">885</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xUR -= $this-&gt;getFontWidth(&quot;legend&quot;) * $maxLegendWidth;</td></tr>
<tr><td class="h">886</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">887</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Calculate how much space will be needed for the chart title</td></tr>
<tr><td class="h">888</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L888">50</a></div></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (defined $this-&gt;getTitle()) {</td></tr>
<tr><td class="h">889</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yUR += $this-&gt;getFontHeight(&quot;title&quot;);</td></tr>
<tr><td class="h">890</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">891</td><td colspan="6"></td></tr><tr><td class="h">892</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# OK, now that we&#39;ve calculated the bounding box for the chart, we</td></tr>
<tr><td class="h">893</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# calculate other various values.</td></tr>
<tr><td class="h">894</td><td colspan="6"></td></tr><tr><td class="h">895</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Calculate the width/height of the chart portion.</td></tr>
<tr><td class="h">896</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $chartWidthInPixels = $xUR - $xLL;</td></tr>
<tr><td class="h">897</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $chartHeightInPixels = $yLL - $yUR;</td></tr>
<tr><td class="h">898</td><td colspan="6"></td></tr><tr><td class="h">899</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If any of the subTypes are &#39;bar&#39;, then compute how wide the bars need</td></tr>
<tr><td class="h">900</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# to be given how many bars are to be drawn and how much space is</td></tr>
<tr><td class="h">901</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# available for them to be drawn in.</td></tr>
<tr><td class="h">902</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xBarWidth = 0;</td></tr>
<tr><td class="h">903</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $barHalfWidth = 0;</td></tr>
<tr><td class="h">904</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xBarLeadingSpace = 0;	# Define the leading space (in pixels) before the first bar</td></tr>
<tr><td class="h">905</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xBarTrailingSpace = 0;	# Define the trailing space (in pixels) after the last bar (in addition to space between bars)</td></tr>
<tr><td class="h">906</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xBarSpace = 0;		# Define the space (in pixels) between bars</td></tr>
<tr><td class="h">907</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L907">50</a></div></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($numBarDataSets) {</td></tr>
<tr><td class="h">908</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Check to see if any of the types is &#39;area&#39; as it doesn&#39;t make</td></tr>
<tr><td class="h">909</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# sense to mix &#39;area&#39; and &#39;bar&#39; on the same chart.</td></tr>
<tr><td class="h">910</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L910">50</a></div></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &quot;Error: Can&#39;t mix &#39;area&#39; and &#39;bar&#39; subtypes on the same chart&quot; if (grep(/area/, @subTypes));</td></tr>
<tr><td class="h">911</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xBarSpace = $this-&gt;getBarSpace;</td></tr>
<tr><td class="h">912</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xBarLeadingSpace = $this-&gt;getBarLeadingSpace;</td></tr>
<tr><td class="h">913</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xBarTrailingSpace = $this-&gt;getBarTrailingSpace - $xBarSpace;</td></tr>
<tr><td class="h">914</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xBarWidth = ((($chartWidthInPixels / $numDataPoints) - $xBarLeadingSpace - $xBarTrailingSpace) / $numBarDataSets) - ($xBarSpace + 1);</td></tr>
<tr><td class="h">915</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$barHalfWidth = $xBarWidth / 2;</td></tr>
<tr><td class="h">916</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">917</td><td colspan="6"></td></tr><tr><td class="h">918</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Calculate the width of the chart (in terms of graphed data) and the</td></tr>
<tr><td class="h">919</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# number of pixels per X value (used for scatter graphs).</td></tr>
<tr><td class="h">920</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $chartWidth = $xAxisMax - $xAxisMin;</td></tr>
<tr><td class="h">921</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L921">50</a></div></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$chartWidth = 1 if (! $scatterChart);</td></tr>
<tr><td class="h">922</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xPixelsPerValue = $chartWidthInPixels / $chartWidth;</td></tr>
<tr><td class="h">923</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Calculate the number of pixels per X element (non-scatter)</td></tr>
<tr><td class="h">924</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xDrawInc;</td></tr>
<tr><td class="h">925</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L925">50</a></div></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($scatterChart) {</td></tr>
<tr><td class="h">926</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xDrawInc = $chartWidthInPixels / ($numXGrids + 1);</td></tr>
<tr><td class="h">927</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">928</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L928">50</a></div></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($numBarDataSets) {</td></tr>
<tr><td class="h">929</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If bars are drawn, then we need to artificially make more room</td></tr>
<tr><td class="h">930</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# for the bars by assuming 1 extra (undrawn) data set.</td></tr>
<tr><td class="h">931</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xDrawInc = $chartWidthInPixels / $numDataPoints;</td></tr>
<tr><td class="h">932</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">933</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xDrawInc = $chartWidthInPixels / ($numDataPoints - 1);</td></tr>
<tr><td class="h">934</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">935</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">936</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $yPixelsPerValue = $chartHeightInPixels / $chartHeight;</td></tr>
<tr><td class="h">937</td><td colspan="6"></td></tr><tr><td class="h">938</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Draw box around entire chart so area filling won&#39;t get outside of the</td></tr>
<tr><td class="h">939</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# box</td></tr>
<tr><td class="h">940</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>210</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;rectangle($xLL, $yLL, $xUR, $yUR, $black);</td></tr>
<tr><td class="h">941</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If a user specified bgcolor (and it isn&#39;t the same as the default</td></tr>
<tr><td class="h">942</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# background color), then set this color to surround the chart.</td></tr>
<tr><td class="h">943</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L943">50</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--condition.html#L943">33</a></div></td><td></td><td><div>157</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (defined $bgcolor[0] &amp;&amp; $bgcolor[0] !~ /$defaultBGcolorText/i) {</td></tr>
<tr><td class="h">944</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $bgcolorOutside = $im-&gt;colorAllocate(_convert_color($bgcolor[0]));</td></tr>
<tr><td class="h">945</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;fill(1, 1, $bgcolorOutside);</td></tr>
<tr><td class="h">946</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">947</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If a user also specified bgcolor with a 2nd value (and it isn&#39;t the</td></tr>
<tr><td class="h">948</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# same as the default background color), then set this color to fill</td></tr>
<tr><td class="h">949</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# the inside of the chart.</td></tr>
<tr><td class="h">950</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L950">50</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--condition.html#L950">33</a></div></td><td></td><td><div>115</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (defined $bgcolor[1] &amp;&amp; $bgcolor[1] !~ /$defaultBGcolorText/i) {</td></tr>
<tr><td class="h">951</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $bgcolorInside = $im-&gt;colorAllocate(_convert_color($bgcolor[1]));</td></tr>
<tr><td class="h">952</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;fill($xLL + 1, $yUR + 1, $bgcolorInside);</td></tr>
<tr><td class="h">953</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">954</td><td colspan="6"></td></tr><tr><td class="h">955</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;########################################################################</td></tr>
<tr><td class="h">956</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# OK, we are about to actually start drawing things.  The order we draw</td></tr>
<tr><td class="h">957</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# things is:</td></tr>
<tr><td class="h">958</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#     1) draw areas</td></tr>
<tr><td class="h">959</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#     2) draw grid lines and X/Y axis labels</td></tr>
<tr><td class="h">960</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#     3) draw bars</td></tr>
<tr><td class="h">961</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#     4) draw lines, points, plines</td></tr>
<tr><td class="h">962</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#     5) draw rectangle around chart</td></tr>
<tr><td class="h">963</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#     6) draw data point labels</td></tr>
<tr><td class="h">964</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#     7) draw chart title, X and Y label</td></tr>
<tr><td class="h">965</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#     8) draw legends</td></tr>
<tr><td class="h">966</td><td colspan="6"></td></tr><tr><td class="h">967</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# 1111111111111111111111111111111111111111111111111111111111111111111111</td></tr>
<tr><td class="h">968</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @dataSetlastValue;</td></tr>
<tr><td class="h">969</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Start drawing each data set.  The only exception is if there is no</td></tr>
<tr><td class="h">970</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# data, then don&#39;t draw anything.</td></tr>
<tr><td class="h">971</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Note: the data sets are drawn back to front so that areas are drawn</td></tr>
<tr><td class="h">972</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# correctly.</td></tr>
<tr><td class="h">973</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Note: all areas are drawn first so they appear behind the lines and</td></tr>
<tr><td class="h">974</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# won&#39;t hide other data sets.</td></tr>
<tr><td class="h">975</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach (my $dataSet = $numDataSets-1; $dataSet &gt;= 0; $dataSet--) {</td></tr>
<tr><td class="h">976</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>131</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $row = $data[$dataSet];</td></tr>
<tr><td class="h">977</td><td><div class="c3">42</div><div class="c3">42</div></td><td></td><td></td><td></td><td><div>110</div><div>213</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @row = @{$data[$dataSet]};</td></tr>
<tr><td class="h">978</td><td colspan="6"></td></tr><tr><td class="h">979</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>140</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $color = $allocatedColors[$dataSet];</td></tr>
<tr><td class="h">980</td><td><div class="c3">42</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L980">50</a></div></td><td></td><td></td><td><div>329</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($subTypes[$dataSet] eq &quot;area&quot;) {</td></tr>
<tr><td class="h">981</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Data set is an area.  Create a polygon representing the area</td></tr>
<tr><td class="h">982</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# and then fill in that polygon.  Note: As a special case, if</td></tr>
<tr><td class="h">983</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# the area to be drawn is lower on the chart than a previously</td></tr>
<tr><td class="h">984</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# drawn area then just draw a line.</td></tr>
<tr><td class="h">985</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $poly = new GD::Polygon;</td></tr>
<tr><td class="h">986</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $xIndex;</td></tr>
<tr><td class="h">987</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $x;</td></tr>
<tr><td class="h">988</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Create the top of the polygon</td></tr>
<tr><td class="h">989</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for $xIndex (0..($numDataPoints - 1)) {</td></tr>
<tr><td class="h">990</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $topYValue = $row[$xIndex];</td></tr>
<tr><td class="h">991</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If there is no current value, then there is no default</td></tr>
<tr><td class="h">992</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# value so assume a value the same as the minimum of the</td></tr>
<tr><td class="h">993</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# chart.</td></tr>
<tr><td class="h">994</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L994">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($topYValue eq &quot;&quot;) {</td></tr>
<tr><td class="h">995</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$topYValue = $scaledYAxisMin;</td></tr>
<tr><td class="h">996</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">997</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $y = $yLL - ($topYValue - $scaledYAxisMin) * $yPixelsPerValue;</td></tr>
<tr><td class="h">998</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L998">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($scatterChart) {</td></tr>
<tr><td class="h">999</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x = $xLL + (($xAxisIndex{$xIndex} - $xAxisMin) * $xPixelsPerValue);</td></tr>
<tr><td class="h">1000</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1001</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x = $xLL + ($xDrawInc * $xIndex);</td></tr>
<tr><td class="h">1002</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1003</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$poly-&gt;addPt($x, $y);</td></tr>
<tr><td class="h">1004</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dataSetlastValue[$dataSet] = $topYValue;</td></tr>
<tr><td class="h">1005</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1006</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Complete the polygon by adding a point at the bottom right of</td></tr>
<tr><td class="h">1007</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# the graph and then one at the bottom left of the graph.</td></tr>
<tr><td class="h">1008</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$poly-&gt;addPt($x, $yLL);</td></tr>
<tr><td class="h">1009</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$poly-&gt;addPt($xLL, $yLL);</td></tr>
<tr><td class="h">1010</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;filledPolygon($poly, $color);</td></tr>
<tr><td class="h">1011</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1012</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1013</td><td colspan="6"></td></tr><tr><td class="h">1014</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# 2222222222222222222222222222222222222222222222222222222222222222222222</td></tr>
<tr><td class="h">1015</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Draw the Y axis labels grid lines (if asked for) so the grid lines</td></tr>
<tr><td class="h">1016</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# fall behind the areas/lines.</td></tr>
<tr><td class="h">1017</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $yAxis = $this-&gt;getYaxis();</td></tr>
<tr><td class="h">1018</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $yGrid = $this-&gt;getYgrid();</td></tr>
<tr><td class="h">1019</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1019">50</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--condition.html#L1019">33</a></div></td><td></td><td><div>68</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (($yAxis eq &quot;on&quot;) || ($yGrid ne &quot;off&quot;) ) {</td></tr>
<tr><td class="h">1020</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $yDrawInc = $chartHeightInPixels / ($numYGrids + 1);</td></tr>
<tr><td class="h">1021</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $yAxisIndex (0..($numYGrids+1)) {</td></tr>
<tr><td class="h">1022</td><td><div class="c3">110</div></td><td></td><td></td><td></td><td><div>339</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $text = $yLabels[$yAxisIndex];</td></tr>
<tr><td class="h">1023</td><td><div class="c3">110</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1023">50</a></div></td><td></td><td></td><td><div>481</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($yAxis eq &quot;on&quot;) {</td></tr>
<tr><td class="h">1024</td><td><div class="c3">110</div></td><td></td><td></td><td></td><td><div>428</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;string($this-&gt;getFont(&quot;yaxis&quot;),</td></tr>
<tr><td class="h">1025</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xLL - (length($text) + 1) * $this-&gt;getFontWidth(&quot;yaxis&quot;),</td></tr>
<tr><td class="h">1026</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yLL - ($yDrawInc * $yAxisIndex) - ($this-&gt;getFontHeight(&quot;yaxis&quot;) / 2),</td></tr>
<tr><td class="h">1027</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$text,</td></tr>
<tr><td class="h">1028</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$black);</td></tr>
<tr><td class="h">1029</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1030</td><td><div class="c3">110</div></td><td></td><td></td><td></td><td><div>392</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $Y = $yLL - ($yDrawInc * $yAxisIndex);</td></tr>
<tr><td class="h">1031</td><td><div class="c3">110</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1031">50</a></div></td><td><div class="c1"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--condition.html#L1031">75</a></div></td><td></td><td><div>1510</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (($yAxisIndex != 0) &amp;&amp; ($yAxisIndex &lt;= $numYGrids) &amp;&amp; $yGrid eq &quot;on&quot;) {</td></tr>
<tr><td class="h">1032</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;line(</td></tr>
<tr><td class="h">1033</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xLL - 2,</td></tr>
<tr><td class="h">1034</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$Y,</td></tr>
<tr><td class="h">1035</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xUR + 2,</td></tr>
<tr><td class="h">1036</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$Y,</td></tr>
<tr><td class="h">1037</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$gridColor);</td></tr>
<tr><td class="h">1038</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1039</td><td><div class="c3">110</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1039">100</a></div></td><td><div class="c1"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--condition.html#L1039">75</a></div></td><td></td><td><div>1424</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (($yAxisIndex != 0) &amp;&amp; ($yAxisIndex &lt;= $numYGrids) &amp;&amp; $yGrid eq &quot;dot&quot;) {</td></tr>
<tr><td class="h">1040</td><td><div class="c3">90</div></td><td></td><td></td><td></td><td><div>503</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;line(</td></tr>
<tr><td class="h">1041</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xLL - 2,</td></tr>
<tr><td class="h">1042</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$Y,</td></tr>
<tr><td class="h">1043</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xUR + 2,</td></tr>
<tr><td class="h">1044</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$Y,</td></tr>
<tr><td class="h">1045</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gdStyled);</td></tr>
<tr><td class="h">1046</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1047</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Draw tic marks between Y grid lines (if requested -- might be</td></tr>
<tr><td class="h">1048</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# the case if the style of graph is &#39;semilog&#39;)</td></tr>
<tr><td class="h">1049</td><td><div class="c3">110</div></td><td></td><td></td><td></td><td><div>422</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $numYTics = $this-&gt;getNumYTics() + 1;</td></tr>
<tr><td class="h">1050</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Draw tics skipping the tics above last value</td></tr>
<tr><td class="h">1051</td><td><div class="c3">110</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1051">100</a></div></td><td></td><td></td><td><div>553</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($yAxisIndex &lt; ($numYGrids + 1)) {</td></tr>
<tr><td class="h">1052</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (my $tic = 1; $tic &lt;= $numYTics; $tic++) {</td></tr>
<tr><td class="h">1053</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ticY;</td></tr>
<tr><td class="h">1054</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1054">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($scale eq &quot;semilog&quot;) {</td></tr>
<tr><td class="h">1055</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ticY = $Y - $this-&gt;_scale($tic) * $yDrawInc;</td></tr>
<tr><td class="h">1056</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1057</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ticY = $Y - $tic * $yDrawInc / $numYTics;</td></tr>
<tr><td class="h">1058</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1059</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;line($xLL - 2, $ticY, $xLL + 2, $ticY, $gridColor);</td></tr>
<tr><td class="h">1060</td><td><div class="c3">100</div></td><td></td><td></td><td></td><td><div>269</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1061</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1062</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1063</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1064</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Draw the X axis labels and grid lines (if asked for).  To do this we</td></tr>
<tr><td class="h">1065</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# calculate the interval between X axis values to draw based on the</td></tr>
<tr><td class="h">1066</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# user specified number of X axis values to draw.</td></tr>
<tr><td class="h">1067</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $barNum = 0;</td></tr>
<tr><td class="h">1068</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1068">50</a></div></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (@xAxis) {</td></tr>
<tr><td class="h">1069</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $xIndexInc;</td></tr>
<tr><td class="h">1070</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $xIndexMax;</td></tr>
<tr><td class="h">1071</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1071">50</a></div></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($scatterChart) {</td></tr>
<tr><td class="h">1072</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xIndexInc = 1;</td></tr>
<tr><td class="h">1073</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If bars are drawn, then there is 1 fewer X axis label to draw</td></tr>
<tr><td class="h">1074</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# than normal.</td></tr>
<tr><td class="h">1075</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1075">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($numBarDataSets) {</td></tr>
<tr><td class="h">1076</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xIndexMax = $numXGrids;</td></tr>
<tr><td class="h">1077</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1078</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xIndexMax = $numXGrids + 1;</td></tr>
<tr><td class="h">1079</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1080</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1081</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1081">50</a></div></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($numXGrids == 0) {</td></tr>
<tr><td class="h">1082</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xIndexInc = 1;</td></tr>
<tr><td class="h">1083</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1084</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xIndexInc = int($numDataPoints / ($numXGrids + 1));</td></tr>
<tr><td class="h">1085</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1086</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xIndexMax = $numDataPoints - 1;</td></tr>
<tr><td class="h">1087</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1088</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $xAxisFontWidth = $this-&gt;getFontWidth(&quot;xaxis&quot;);</td></tr>
<tr><td class="h">1089</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $xaxis = $xAxisMin;</td></tr>
<tr><td class="h">1090</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $xAxisDecimalDigits = $this-&gt;getNumXDigits;</td></tr>
<tr><td class="h">1091</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (my $xAxisIndex=0; $xAxisIndex &lt;= $xIndexMax; $xAxisIndex += $xIndexInc) {</td></tr>
<tr><td class="h">1092</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Calculate what the X axis label will be.  If scatter then</td></tr>
<tr><td class="h">1093</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# compute the value, if not scatter then use the user specified</td></tr>
<tr><td class="h">1094</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# value.</td></tr>
<tr><td class="h">1095</td><td><div class="c3">62</div></td><td></td><td></td><td></td><td><div>171</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $label;</td></tr>
<tr><td class="h">1096</td><td><div class="c3">62</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1096">50</a></div></td><td></td><td></td><td><div>223</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($scatterChart) {</td></tr>
<tr><td class="h">1097</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$label = $xLabels[$xAxisIndex];</td></tr>
<tr><td class="h">1098</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1099</td><td><div class="c3">62</div></td><td></td><td></td><td></td><td><div>267</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$label = $xAxis[$xAxisIndex];</td></tr>
<tr><td class="h">1100</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1101</td><td><div class="c3">62</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1101">50</a></div></td><td></td><td></td><td><div>359</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$label = &quot;&quot; if (! defined $label);</td></tr>
<tr><td class="h">1102</td><td><div class="c3">62</div></td><td></td><td></td><td></td><td><div>251</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $xLoc = $xLL + ($xDrawInc * $xAxisIndex);</td></tr>
<tr><td class="h">1103</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If a horizontal xaxis, then attempt to center the label</td></tr>
<tr><td class="h">1104</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# around the X axis.  A special case is when there are &#39;bar&#39;s</td></tr>
<tr><td class="h">1105</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# being drawn so the label then needs to be centered under the</td></tr>
<tr><td class="h">1106</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# are the bars are drawn in.</td></tr>
<tr><td class="h">1107</td><td><div class="c3">62</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1107">50</a></div></td><td></td><td></td><td><div>250</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($xAxisAngle == 0) {</td></tr>
<tr><td class="h">1108</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Calculate the centered X position of the axis label.</td></tr>
<tr><td class="h">1109</td><td><div class="c3">62</div></td><td></td><td></td><td></td><td><div>216</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $len = length ($label);</td></tr>
<tr><td class="h">1110</td><td><div class="c3">62</div></td><td></td><td></td><td></td><td><div>250</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $halfLabelWidth = $len / 2 * $xAxisFontWidth;</td></tr>
<tr><td class="h">1111</td><td><div class="c3">62</div></td><td></td><td></td><td></td><td><div>218</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $xLabelLoc = $xLoc - $halfLabelWidth;</td></tr>
<tr><td class="h">1112</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Compute the X position of each X axis label.  In general we want</td></tr>
<tr><td class="h">1113</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# each label centered on the X axis line, but the first and last</td></tr>
<tr><td class="h">1114</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# labels need some extra care.  The first label might not have</td></tr>
<tr><td class="h">1115</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# enough room to be centered about the (0,0) point so needs to</td></tr>
<tr><td class="h">1116</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# positioned so the left part of the label lines up with (0,0).</td></tr>
<tr><td class="h">1117</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# The last label has a similar problem in that there might not be</td></tr>
<tr><td class="h">1118</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# enough room on the right side of the chart to center the label so</td></tr>
<tr><td class="h">1119</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# the right side of the label may need to be aligned with the right</td></tr>
<tr><td class="h">1120</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# side of the chart.</td></tr>
<tr><td class="h">1121</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Note: if a bar data set, then just center under the bar</td></tr>
<tr><td class="h">1122</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# area</td></tr>
<tr><td class="h">1123</td><td><div class="c3">62</div></td><td></td><td></td><td></td><td><div>151</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $xPos;</td></tr>
<tr><td class="h">1124</td><td><div class="c3">62</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1124">50</a></div><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1124">0</a></div></td><td></td><td></td><td><div>228</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($numBarDataSets) {</td></tr>
<tr><td class="h">1125</td><td><div class="c3">62</div></td><td></td><td></td><td></td><td><div>236</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xPos = $xLabelLoc + $chartWidthInPixels / $numDataPoints / 2;</td></tr>
<tr><td class="h">1126</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif ($xLabelLoc &gt; 0) {</td></tr>
<tr><td class="h">1127</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1127">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( ($xLabelLoc + $halfLabelWidth * 2) &gt;= $imageWidth) {</td></tr>
<tr><td class="h">1128</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xPos = $xUR - $len * $xAxisFontWidth;</td></tr>
<tr><td class="h">1129</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1130</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xPos = $xLabelLoc;</td></tr>
<tr><td class="h">1131</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1132</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1133</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xPos = $xLL;</td></tr>
<tr><td class="h">1134</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1135</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If any bars are drawn, then center the X axis label under</td></tr>
<tr><td class="h">1136</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# the bar area.</td></tr>
<tr><td class="h">1137</td><td><div class="c3">62</div></td><td></td><td></td><td></td><td><div>246</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;string(</td></tr>
<tr><td class="h">1138</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;getFont(&quot;xaxis&quot;),</td></tr>
<tr><td class="h">1139</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xPos,</td></tr>
<tr><td class="h">1140</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yLL + 3,</td></tr>
<tr><td class="h">1141</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$label,</td></tr>
<tr><td class="h">1142</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$black);</td></tr>
<tr><td class="h">1143</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1144</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Assuming a vertical label</td></tr>
<tr><td class="h">1145</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $len = length ($label);</td></tr>
<tr><td class="h">1146</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $halfLabelHeight = $this-&gt;getFontHeight(&quot;xaxis&quot;) / 2;</td></tr>
<tr><td class="h">1147</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $yLabelLoc = $yLL + $len * $xAxisFontWidth;</td></tr>
<tr><td class="h">1148</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;stringUp(</td></tr>
<tr><td class="h">1149</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;getFont(&quot;xaxis&quot;),</td></tr>
<tr><td class="h">1150</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xLoc - $halfLabelHeight,</td></tr>
<tr><td class="h">1151</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yLabelLoc + 3,</td></tr>
<tr><td class="h">1152</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$label,</td></tr>
<tr><td class="h">1153</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$black);</td></tr>
<tr><td class="h">1154</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1155</td><td><div class="c3">62</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1155">50</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--condition.html#L1155">50</a></div></td><td></td><td><div>861</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (($xAxisIndex != 0) &amp;&amp; ($xAxisIndex &lt;= $xIndexMax) &amp;&amp; $xGrid eq &quot;on&quot;) {</td></tr>
<tr><td class="h">1156</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;line(</td></tr>
<tr><td class="h">1157</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xLoc,</td></tr>
<tr><td class="h">1158</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yLL + 2,</td></tr>
<tr><td class="h">1159</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xLoc,</td></tr>
<tr><td class="h">1160</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yUR - 2,</td></tr>
<tr><td class="h">1161</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$gridColor);</td></tr>
<tr><td class="h">1162</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1163</td><td><div class="c3">62</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1163">100</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--condition.html#L1163">50</a></div></td><td></td><td><div>807</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (($xAxisIndex != 0) &amp;&amp; ($xAxisIndex &lt;= $xIndexMax) &amp;&amp; $xGrid eq &quot;dot&quot;) {</td></tr>
<tr><td class="h">1164</td><td><div class="c3">52</div></td><td></td><td></td><td></td><td><div>253</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;line(</td></tr>
<tr><td class="h">1165</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xLoc,</td></tr>
<tr><td class="h">1166</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yLL + 2,</td></tr>
<tr><td class="h">1167</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xLoc,</td></tr>
<tr><td class="h">1168</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yUR - 2,</td></tr>
<tr><td class="h">1169</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gdStyled);</td></tr>
<tr><td class="h">1170</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1171</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1172</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1173</td><td colspan="6"></td></tr><tr><td class="h">1174</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# 3333333333333333333333333333333333333333333333333333333333333333333333</td></tr>
<tr><td class="h">1175</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Now draw any bars.</td></tr>
<tr><td class="h">1176</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$barNum = 0;</td></tr>
<tr><td class="h">1177</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for my $dataSet (0..$numDataSets-1) {</td></tr>
<tr><td class="h">1178</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>129</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $row = $data[$dataSet];</td></tr>
<tr><td class="h">1179</td><td><div class="c3">42</div><div class="c3">42</div></td><td></td><td></td><td></td><td><div>109</div><div>216</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @row = @{$data[$dataSet]};</td></tr>
<tr><td class="h">1180</td><td colspan="6"></td></tr><tr><td class="h">1181</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>139</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $color = $allocatedColors[$dataSet];</td></tr>
<tr><td class="h">1182</td><td><div class="c3">42</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1182">50</a></div></td><td></td><td></td><td><div>204</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($subTypes[$dataSet] eq &quot;bar&quot;) {</td></tr>
<tr><td class="h">1183</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>167</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $xIndex (0..($numDataPoints - 1)) {</td></tr>
<tr><td class="h">1184</td><td><div class="c3">190</div></td><td></td><td></td><td></td><td><div>584</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $currentYValue = $row[$xIndex];</td></tr>
<tr><td class="h">1185</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If there is no current value, then there is no default</td></tr>
<tr><td class="h">1186</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# value so assume a value the same as the minimum of the</td></tr>
<tr><td class="h">1187</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# chart.</td></tr>
<tr><td class="h">1188</td><td><div class="c3">190</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1188">50</a></div></td><td></td><td></td><td><div>793</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($currentYValue eq &quot;&quot;) {</td></tr>
<tr><td class="h">1189</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$currentYValue = $scaledYAxisMin;</td></tr>
<tr><td class="h">1190</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1191</td><td><div class="c3">190</div></td><td></td><td></td><td></td><td><div>716</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $y = $yLL - ($currentYValue - $scaledYAxisMin) * $yPixelsPerValue;</td></tr>
<tr><td class="h">1192</td><td><div class="c3">190</div></td><td></td><td></td><td></td><td><div>442</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $x;</td></tr>
<tr><td class="h">1193</td><td><div class="c3">190</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1193">50</a></div></td><td></td><td></td><td><div>674</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($scatterChart) {</td></tr>
<tr><td class="h">1194</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x = $xLL + (($xAxisIndex{$xIndex} - $xAxisMin) * $xPixelsPerValue);</td></tr>
<tr><td class="h">1195</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1196</td><td><div class="c3">190</div></td><td></td><td></td><td></td><td><div>661</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x = $xLL + ($xDrawInc * $xIndex);</td></tr>
<tr><td class="h">1197</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1198</td><td><div class="c3">190</div></td><td></td><td></td><td></td><td><div>870</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x += $xBarLeadingSpace + (($xBarWidth + ($xBarSpace+1)) * $barNum) + $barHalfWidth;</td></tr>
<tr><td class="h">1199</td><td><div class="c3">190</div></td><td></td><td></td><td></td><td><div>2353</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;filledRectangle($x - $barHalfWidth, $y, $x + $barHalfWidth, $yLL, $color);</td></tr>
<tr><td class="h">1200</td><td><div class="c3">190</div></td><td></td><td></td><td></td><td><div>1573</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;rectangle($x - $barHalfWidth, $y, $x + $barHalfWidth, $yLL, $black);</td></tr>
<tr><td class="h">1201</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1202</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>181</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$barNum++;</td></tr>
<tr><td class="h">1203</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1204</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1205</td><td colspan="6"></td></tr><tr><td class="h">1206</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# 4444444444444444444444444444444444444444444444444444444444444444444444</td></tr>
<tr><td class="h">1207</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Now that the areas and bars are drawn, draw the lines and even redraw</td></tr>
<tr><td class="h">1208</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# lines outlining the already drawn areas (since some areas might have</td></tr>
<tr><td class="h">1209</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# been overwritten).</td></tr>
<tr><td class="h">1210</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for my $dataSet (0..$numDataSets-1) {</td></tr>
<tr><td class="h">1211</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>128</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $row = $data[$dataSet];</td></tr>
<tr><td class="h">1212</td><td><div class="c3">42</div><div class="c3">42</div></td><td></td><td></td><td></td><td><div>112</div><div>214</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @row = @{$data[$dataSet]};</td></tr>
<tr><td class="h">1213</td><td colspan="6"></td></tr><tr><td class="h">1214</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>138</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $color = $allocatedColors[$dataSet];</td></tr>
<tr><td class="h">1215</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>113</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ($x1, $x2);</td></tr>
<tr><td class="h">1216</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Draw the data set (if an area, it gets filled in by code below).</td></tr>
<tr><td class="h">1217</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>165</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $xIndex (0..($numDataPoints - 2)) {</td></tr>
<tr><td class="h">1218</td><td><div class="c3">148</div></td><td></td><td></td><td></td><td><div>428</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $currentYValue = $row[$xIndex];</td></tr>
<tr><td class="h">1219</td><td><div class="c3">148</div></td><td></td><td></td><td></td><td><div>481</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $nextYValue = $row[$xIndex + 1];</td></tr>
<tr><td class="h">1220</td><td><div class="c3">148</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1220">50</a></div></td><td></td><td></td><td><div>807</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$currentYValue = $this-&gt;_scale($currentYValue) if ($currentYValue ne &quot;&quot;);</td></tr>
<tr><td class="h">1221</td><td><div class="c3">148</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1221">50</a></div></td><td></td><td></td><td><div>785</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$nextYValue = $this-&gt;_scale($nextYValue) if ($nextYValue ne &quot;&quot;);</td></tr>
<tr><td class="h">1222</td><td colspan="6"></td></tr><tr><td class="h">1223</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Deal with sparse data.  If there is:</td></tr>
<tr><td class="h">1224</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#    - current but no next value, draw a point at current</td></tr>
<tr><td class="h">1225</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#    - no current but a next value, draw a point at next</td></tr>
<tr><td class="h">1226</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#    - if both, draw a line between them if asked to</td></tr>
<tr><td class="h">1227</td><td><div class="c3">148</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1227">50</a></div><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1227">50</a></div><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1227">50</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--condition.html#L1227">33</a></div><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--condition.html#L1227">33</a></div><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--condition.html#L1227">33</a></div></td><td></td><td><div>2820</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($currentYValue ne &quot;&quot; &amp;&amp; $nextYValue eq &quot;&quot;) {</td></tr>
<tr><td class="h">1228</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1228">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($scatterChart) {</td></tr>
<tr><td class="h">1229</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x1 = $xLL + (($xAxisIndex{$xIndex} - $xAxisMin) * $xPixelsPerValue);</td></tr>
<tr><td class="h">1230</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1231</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x1 = $xLL + ($xDrawInc * $xIndex);</td></tr>
<tr><td class="h">1232</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1233</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If any bars were drawn, then place all lines, plines,</td></tr>
<tr><td class="h">1234</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# points in the middle of the area in which the bars were</td></tr>
<tr><td class="h">1235</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# drawn.</td></tr>
<tr><td class="h">1236</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1236">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($numBarDataSets) {</td></tr>
<tr><td class="h">1237</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x1 += $xDrawInc / 2;</td></tr>
<tr><td class="h">1238</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1239</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $y1 = $yLL - ($currentYValue - $scaledYAxisMin) * $yPixelsPerValue;</td></tr>
<tr><td class="h">1240</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1240">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($subTypes[$dataSet] ne &quot;bar&quot;) {</td></tr>
<tr><td class="h">1241</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;filledRectangle($x1-$pointSizeHalf, $y1-$pointSizeHalf, $x1 + $pointSizeHalf, $y1 + $pointSizeHalf, $color);</td></tr>
<tr><td class="h">1242</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1243</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dataSetlastValue[$dataSet] = $currentYValue;</td></tr>
<tr><td class="h">1244</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif ($currentYValue eq &quot;&quot; &amp;&amp; $nextYValue ne &quot;&quot;) {</td></tr>
<tr><td class="h">1245</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1245">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($scatterChart) {</td></tr>
<tr><td class="h">1246</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x2 = $xLL + (($xAxisIndex{($xIndex + 1)} - $xAxisMin) * $xPixelsPerValue);</td></tr>
<tr><td class="h">1247</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1248</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x2 = $xLL + ($xDrawInc * ($xIndex + 1));</td></tr>
<tr><td class="h">1249</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1250</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If any bars were drawn, then place all lines, plines,</td></tr>
<tr><td class="h">1251</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# points in the middle of the area in which the bars were</td></tr>
<tr><td class="h">1252</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# drawn.</td></tr>
<tr><td class="h">1253</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1253">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($numBarDataSets) {</td></tr>
<tr><td class="h">1254</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x2 += $xDrawInc / 2;</td></tr>
<tr><td class="h">1255</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1256</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $y2 = $yLL - ($nextYValue - $scaledYAxisMin) * $yPixelsPerValue;</td></tr>
<tr><td class="h">1257</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1257">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($subTypes[$dataSet] ne &quot;bar&quot;) {</td></tr>
<tr><td class="h">1258</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;filledRectangle($x2-$pointSizeHalf, $y2-$pointSizeHalf, $x2 + $pointSizeHalf, $y2 + $pointSizeHalf, $color);</td></tr>
<tr><td class="h">1259</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1260</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif ($currentYValue ne &quot;&quot; &amp;&amp; $nextYValue ne &quot;&quot;) {</td></tr>
<tr><td class="h">1261</td><td><div class="c3">148</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1261">50</a></div></td><td></td><td></td><td><div>520</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($scatterChart) {</td></tr>
<tr><td class="h">1262</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x1 = $xLL + (($xAxisIndex{$xIndex} - $xAxisMin) * $xPixelsPerValue);</td></tr>
<tr><td class="h">1263</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x2 = $xLL + (($xAxisIndex{($xIndex + 1)} - $xAxisMin) * $xPixelsPerValue);</td></tr>
<tr><td class="h">1264</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1265</td><td><div class="c3">148</div></td><td></td><td></td><td></td><td><div>534</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x1 = $xLL + ($xDrawInc * $xIndex);</td></tr>
<tr><td class="h">1266</td><td><div class="c3">148</div></td><td></td><td></td><td></td><td><div>539</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x2 = $xLL + ($xDrawInc * ($xIndex + 1));</td></tr>
<tr><td class="h">1267</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1268</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If any bars were drawn, then place all lines, plines,</td></tr>
<tr><td class="h">1269</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# points in the middle of the area in which the bars were</td></tr>
<tr><td class="h">1270</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# drawn.</td></tr>
<tr><td class="h">1271</td><td><div class="c3">148</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1271">50</a></div></td><td></td><td></td><td><div>632</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($numBarDataSets) {</td></tr>
<tr><td class="h">1272</td><td><div class="c3">148</div></td><td></td><td></td><td></td><td><div>491</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x1 += $xDrawInc / 2;</td></tr>
<tr><td class="h">1273</td><td><div class="c3">148</div></td><td></td><td></td><td></td><td><div>502</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x2 += $xDrawInc / 2;</td></tr>
<tr><td class="h">1274</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1275</td><td><div class="c3">148</div></td><td></td><td></td><td></td><td><div>557</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $y1 = $yLL - ($currentYValue - $scaledYAxisMin) * $yPixelsPerValue;</td></tr>
<tr><td class="h">1276</td><td><div class="c3">148</div></td><td></td><td></td><td></td><td><div>514</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $y2 = $yLL - ($nextYValue - $scaledYAxisMin) * $yPixelsPerValue;</td></tr>
<tr><td class="h">1277</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If just a line, then draw a second and 3rd line slightly</td></tr>
<tr><td class="h">1278</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# below the line to make it appear thicker.</td></tr>
<tr><td class="h">1279</td><td><div class="c3">148</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1279">50</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--condition.html#L1279">25</a></div></td><td></td><td><div>2226</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($subTypes[$dataSet] eq &quot;line&quot; || $subTypes[$dataSet] eq &quot;pline&quot; || $subTypes[$dataSet] eq &quot;area&quot;) {</td></tr>
<tr><td class="h">1280</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1280">0</a></div><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1280">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $GD::VERSION &gt;= 2.15 ) {</td></tr>
<tr><td class="h">1281</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;setThickness($lineWidth);</td></tr>
<tr><td class="h">1282</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im -&gt;line( $x1, $y1, $x2, $y2, $color );</td></tr>
<tr><td class="h">1283</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;setThickness(1);</td></tr>
<tr><td class="h">1284</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif( $lineWidth &gt; 1 ) {</td></tr>
<tr><td class="h">1285</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im -&gt;line( $x1, $y1, $x2, $y2, $color );</td></tr>
<tr><td class="h">1286</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $yDiff (1..(($lineWidth - 1)/2)) {</td></tr>
<tr><td class="h">1287</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im -&gt;line( $x1, $y1 + $yDiff, $x2, $y2 + $yDiff, $color );</td></tr>
<tr><td class="h">1288</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1289</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $yDiff (1..(($lineWidth)/2)) {</td></tr>
<tr><td class="h">1290</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im -&gt;line( $x1, $y1 - $yDiff, $x2, $y2 - $yDiff, $color );</td></tr>
<tr><td class="h">1291</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1292</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1293</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im -&gt;line( $x1, $y1, $x2, $y2, $color );</td></tr>
<tr><td class="h">1294</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1295</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </td></tr>
<tr><td class="h">1296</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Draw points.</td></tr>
<tr><td class="h">1297</td><td><div class="c3">148</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1297">50</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--condition.html#L1297">33</a></div></td><td></td><td><div>1397</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($subTypes[$dataSet] eq &quot;point&quot; || $subTypes[$dataSet] eq &quot;pline&quot;) {</td></tr>
<tr><td class="h">1298</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;filledRectangle($x1-$pointSizeHalf, $y1-$pointSizeHalf, $x1 + $pointSizeHalf, $y1 + $pointSizeHalf, $color);</td></tr>
<tr><td class="h">1299</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;filledRectangle($x2-$pointSizeHalf, $y2-$pointSizeHalf, $x2 + $pointSizeHalf, $y2 + $pointSizeHalf, $color);</td></tr>
<tr><td class="h">1300</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1301</td><td><div class="c3">148</div></td><td></td><td></td><td></td><td><div>673</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dataSetlastValue[$dataSet] = $nextYValue;</td></tr>
<tr><td class="h">1302</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1303</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1304</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1305</td><td colspan="6"></td></tr><tr><td class="h">1306</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# 5555555555555555555555555555555555555555555555555555555555555555555555</td></tr>
<tr><td class="h">1307</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Redraw box around entire chart in case it got overwritten by</td></tr>
<tr><td class="h">1308</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# anything.</td></tr>
<tr><td class="h">1309</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>171</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;rectangle($xLL, $yLL, $xUR, $yUR, $black);</td></tr>
<tr><td class="h">1310</td><td colspan="6"></td></tr><tr><td class="h">1311</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# 6666666666666666666666666666666666666666666666666666666666666666666666</td></tr>
<tr><td class="h">1312</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If requested, draw in labels for the charted values.  This is done</td></tr>
<tr><td class="h">1313</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# last so the labels appear on top of everything else that has been</td></tr>
<tr><td class="h">1314</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# placed on the chart.</td></tr>
<tr><td class="h">1315</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $numDataLabels = my @dataLabels = $this-&gt;getDataLabels();</td></tr>
<tr><td class="h">1316</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If fewer dataLabel values specified than data sets, then repeat the</td></tr>
<tr><td class="h">1317</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# user specified values.</td></tr>
<tr><td class="h">1318</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1318">50</a></div></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (@dataLabels) {</td></tr>
<tr><td class="h">1319</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $font = $this-&gt;getFont(&quot;data&quot;);</td></tr>
<tr><td class="h">1320</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fontWidth = $this-&gt;getFontWidth(&quot;data&quot;);</td></tr>
<tr><td class="h">1321</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fontHeight = $this-&gt;getFontHeight(&quot;data&quot;);</td></tr>
<tr><td class="h">1322</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$barNum = 0;</td></tr>
<tr><td class="h">1323</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $dataSet (0..$numDataSets-1) {</td></tr>
<tr><td class="h">1324</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>145</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $dataLabel = $dataLabels[$dataSet % $numDataLabels];</td></tr>
<tr><td class="h">1325</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>126</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $row = $data[$dataSet];</td></tr>
<tr><td class="h">1326</td><td><div class="c3">42</div><div class="c3">42</div></td><td></td><td></td><td></td><td><div>110</div><div>215</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @row = @{$data[$dataSet]};</td></tr>
<tr><td class="h">1327</td><td colspan="6"></td></tr><tr><td class="h">1328</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>134</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $color = $allocatedColors[$dataSet];</td></tr>
<tr><td class="h">1329</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>160</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $xIndex (0..($numDataPoints - 1)) {</td></tr>
<tr><td class="h">1330</td><td><div class="c3">190</div></td><td></td><td></td><td></td><td><div>563</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $currentYValue = $row[$xIndex];</td></tr>
<tr><td class="h">1331</td><td><div class="c3">190</div></td><td></td><td></td><td></td><td><div>513</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $drawText = $currentYValue;</td></tr>
<tr><td class="h">1332</td><td><div class="c3">190</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1332">50</a></div></td><td></td><td></td><td><div>778</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($scatterChart) {</td></tr>
<tr><td class="h">1333</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$drawText = $xAxisIndex{$xIndex} . &quot;/&quot; . $currentYValue;</td></tr>
<tr><td class="h">1334</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1335</td><td><div class="c3">190</div></td><td></td><td></td><td></td><td><div>534</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $len = length $drawText;</td></tr>
<tr><td class="h">1336</td><td colspan="6"></td></tr><tr><td class="h">1337</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If the drawText is non empty, place string/box such</td></tr>
<tr><td class="h">1338</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# that the lower right corner is located at the data value.</td></tr>
<tr><td class="h">1339</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# The only exception is if the box would fall off of the</td></tr>
<tr><td class="h">1340</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# chart either to the left or at the top.</td></tr>
<tr><td class="h">1341</td><td><div class="c3">190</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1341">50</a></div></td><td></td><td></td><td><div>828</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($currentYValue ne &quot;&quot;) {</td></tr>
<tr><td class="h">1342</td><td><div class="c3">190</div></td><td></td><td></td><td></td><td><div>685</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $currentValueY = $this-&gt;_scale($currentYValue);</td></tr>
<tr><td class="h">1343</td><td><div class="c3">190</div></td><td></td><td></td><td></td><td><div>461</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $x1;</td></tr>
<tr><td class="h">1344</td><td><div class="c3">190</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1344">50</a></div></td><td></td><td></td><td><div>681</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($scatterChart) {</td></tr>
<tr><td class="h">1345</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x1 = $xLL + (($xAxisIndex{$xIndex} - $xAxisMin) * $xPixelsPerValue) - ($len * $fontWidth) - 4;</td></tr>
<tr><td class="h">1346</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1347</td><td><div class="c3">190</div></td><td></td><td></td><td></td><td><div>907</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x1 = $xLL + ($xDrawInc * $xIndex) - ($len * $fontWidth) - 4;</td></tr>
<tr><td class="h">1348</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1349</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If any bars were drawn, then all lines, plines,</td></tr>
<tr><td class="h">1350</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# points were drawn in the middle of the area in which</td></tr>
<tr><td class="h">1351</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# the bars were drawn so we need to adjust the data</td></tr>
<tr><td class="h">1352</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# labels accordingly.  If the data label is for a bar</td></tr>
<tr><td class="h">1353</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# itself, then perform a slightly different adjustment.</td></tr>
<tr><td class="h">1354</td><td><div class="c3">190</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1354">50</a></div></td><td></td><td></td><td><div>790</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($numBarDataSets) {</td></tr>
<tr><td class="h">1355</td><td><div class="c3">190</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1355">50</a></div></td><td></td><td></td><td><div>784</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($subTypes[$dataSet] eq &quot;bar&quot;) {</td></tr>
<tr><td class="h">1356</td><td><div class="c3">190</div></td><td></td><td></td><td></td><td><div>918</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x1 += $xBarLeadingSpace + (($xBarWidth + ($xBarSpace+1)) * $barNum) + $barHalfWidth;</td></tr>
<tr><td class="h">1357</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1358</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x1 += $xDrawInc / 2;</td></tr>
<tr><td class="h">1359</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1360</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1361</td><td><div class="c3">190</div></td><td></td><td></td><td></td><td><div>793</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $y1 = $yLL - ($currentValueY - $scaledYAxisMin) * $yPixelsPerValue - $fontHeight - 4;</td></tr>
<tr><td class="h">1362</td><td><div class="c3">190</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1362">50</a></div></td><td></td><td></td><td><div>838</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x1 += $len * $fontWidth + 4 if ($x1 &lt; 0);	# Push back onto left side</td></tr>
<tr><td class="h">1363</td><td><div class="c3">190</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1363">100</a></div></td><td></td><td></td><td><div>821</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$y1 += $fontHeight if ($y1 &lt; 0);	# Push down into chart</td></tr>
<tr><td class="h">1364</td><td><div class="c3">190</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1364">50</a></div></td><td></td><td></td><td><div>793</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($dataLabel eq &quot;box&quot;) {</td></tr>
<tr><td class="h">1365</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# In order to put the value into a box, we draw a box,</td></tr>
<tr><td class="h">1366</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# fill it with white, then draw a black line around the</td></tr>
<tr><td class="h">1367</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# white box and then draw the value inside the box.</td></tr>
<tr><td class="h">1368</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;filledRectangle($x1, $y1, $x1 + $len * $fontWidth + 4, $y1 + $fontHeight + 4, $defaultBGcolor);</td></tr>
<tr><td class="h">1369</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;rectangle($x1, $y1, $x1 + $len * $fontWidth + 4, $y1 + $fontHeight + 4, $black);</td></tr>
<tr><td class="h">1370</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1371</td><td><div class="c3">190</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1371">50</a></div></td><td></td><td></td><td><div>1044</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($dataLabel ne &quot;off&quot;) {</td></tr>
<tr><td class="h">1372</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;string( $font, $x1 + 3, $y1 + 2, $drawText, $color );</td></tr>
<tr><td class="h">1373</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1374</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1375</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1376</td><td><div class="c3">42</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1376">50</a></div></td><td></td><td></td><td><div>263</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$barNum++ if ($subTypes[$dataSet] eq &quot;bar&quot;);</td></tr>
<tr><td class="h">1377</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1378</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1379</td><td colspan="6"></td></tr><tr><td class="h">1380</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# 7777777777777777777777777777777777777777777777777777777777777777777777</td></tr>
<tr><td class="h">1381</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Draw the title (if requested)</td></tr>
<tr><td class="h">1382</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1382">50</a></div></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (defined $this-&gt;getTitle()) {</td></tr>
<tr><td class="h">1383</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $title = $this-&gt;getTitle();</td></tr>
<tr><td class="h">1384</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $x = $xLL + $chartWidthInPixels / 2 - (length($title) / 2 * $this-&gt;getFontWidth(&quot;title&quot;));</td></tr>
<tr><td class="h">1385</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $y = 0;</td></tr>
<tr><td class="h">1386</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;string($this-&gt;getFont(&quot;title&quot;), $x, $y, $this-&gt;getTitle(), $black);</td></tr>
<tr><td class="h">1387</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1388</td><td colspan="6"></td></tr><tr><td class="h">1389</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Draw the Y label (if specified)</td></tr>
<tr><td class="h">1390</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1390">50</a></div></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (defined $yLabel) {</td></tr>
<tr><td class="h">1391</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;stringUp(</td></tr>
<tr><td class="h">1392</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;getFont(&quot;ylabel&quot;),</td></tr>
<tr><td class="h">1393</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$margin,</td></tr>
<tr><td class="h">1394</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yUR + ($chartHeightInPixels / 2) + (length ($yLabel) * $this-&gt;getFontWidth(&quot;ylabel&quot;) / 2),</td></tr>
<tr><td class="h">1395</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yLabel,</td></tr>
<tr><td class="h">1396</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$black);</td></tr>
<tr><td class="h">1397</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1398</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Draw the X label (if specified)</td></tr>
<tr><td class="h">1399</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1399">50</a></div></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (defined $xLabel) {</td></tr>
<tr><td class="h">1400</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $yPos = $yLL + 5;</td></tr>
<tr><td class="h">1401</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Adjust depending on if X axis labels are drawn or not and the</td></tr>
<tr><td class="h">1402</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# orientation of the X axis labels.</td></tr>
<tr><td class="h">1403</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1403">50</a></div></td><td></td><td></td><td><div>60</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (@xAxis) {</td></tr>
<tr><td class="h">1404</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1404">50</a></div></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($xAxisAngle == 0) {</td></tr>
<tr><td class="h">1405</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yPos += $this-&gt;getFontHeight(&quot;xaxis&quot;);</td></tr>
<tr><td class="h">1406</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1407</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yPos += $xAxisMaxLen * $this-&gt;getFontWidth(&quot;xaxis&quot;);</td></tr>
<tr><td class="h">1408</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1409</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1410</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;string(</td></tr>
<tr><td class="h">1411</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;getFont(&quot;xlabel&quot;),</td></tr>
<tr><td class="h">1412</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xLL + ($chartWidthInPixels / 2) - (length ($xLabel) * $this-&gt;getFontWidth(&quot;xlabel&quot;) / 2),</td></tr>
<tr><td class="h">1413</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yPos,</td></tr>
<tr><td class="h">1414</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xLabel,</td></tr>
<tr><td class="h">1415</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$black);</td></tr>
<tr><td class="h">1416</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1417</td><td colspan="6"></td></tr><tr><td class="h">1418</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# 8888888888888888888888888888888888888888888888888888888888888888888888</td></tr>
<tr><td class="h">1419</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Draw the legends (if requested).  This requires some extra work since</td></tr>
<tr><td class="h">1420</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# we may need to &#39;bubble&#39; up/down the legends if they would overlap</td></tr>
<tr><td class="h">1421</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# each other.</td></tr>
<tr><td class="h">1422</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1422">50</a></div></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (@legends) {</td></tr>
<tr><td class="h">1423</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $legendFont = $this-&gt;getFont(&quot;legend&quot;);</td></tr>
<tr><td class="h">1424</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fontHeight = $this-&gt;getFontHeight(&quot;legend&quot;);</td></tr>
<tr><td class="h">1425</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $halfFontHeight = $fontHeight / 2;</td></tr>
<tr><td class="h">1426</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fontWidth = $this-&gt;getFontWidth(&quot;legend&quot;);</td></tr>
<tr><td class="h">1427</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $x1 = $xUR + 5;</td></tr>
<tr><td class="h">1428</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 1. determine the ideal Y location of each label</td></tr>
<tr><td class="h">1429</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @lastValues;</td></tr>
<tr><td class="h">1430</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $dataSet (0..$numDataSets - 1) {</td></tr>
<tr><td class="h">1431</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Use the last point drawn for each line so we know where to</td></tr>
<tr><td class="h">1432</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# draw the legend at the end of the lines.</td></tr>
<tr><td class="h">1433</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>129</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $lastValue = $dataSetlastValue[$dataSet];</td></tr>
<tr><td class="h">1434</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>156</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $y = $yLL - (($lastValue - $scaledYAxisMin) * $yPixelsPerValue) - $halfFontHeight;</td></tr>
<tr><td class="h">1435</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If the y location falls off of the bottom of the chart, then</td></tr>
<tr><td class="h">1436</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# pull up to the bottom of the chart.</td></tr>
<tr><td class="h">1437</td><td><div class="c3">42</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1437">50</a></div></td><td></td><td></td><td><div>185</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$y = $yLL - $halfFontHeight if ($y &gt; $yLL);</td></tr>
<tr><td class="h">1438</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>155</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$lastValues[$dataSet] = $y;</td></tr>
<tr><td class="h">1439</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1440</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 2. Now adjust the Y locations so no labels overlap.  If any two</td></tr>
<tr><td class="h">1441</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# labels have the same Y location, then the first data set gets that</td></tr>
<tr><td class="h">1442</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# location and all subsequent data sets labels get moved.</td></tr>
<tr><td class="h">1443</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>75</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@lastValues = $this-&gt;adjustLegendYLocations($yUR, @lastValues);</td></tr>
<tr><td class="h">1444</td><td colspan="6"></td></tr><tr><td class="h">1445</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 3. Now draw the legends at the (possibly) newly computed Y</td></tr>
<tr><td class="h">1446</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# locations.</td></tr>
<tr><td class="h">1447</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $dataSet (0..$numDataSets - 1) {</td></tr>
<tr><td class="h">1448</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>129</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $y1 = $lastValues[$dataSet];</td></tr>
<tr><td class="h">1449</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>422</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;string( $legendFont, $x1, $y1, $legends[$dataSet], $black );</td></tr>
<tr><td class="h">1450</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>352</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;line( $x1, $y1 + $fontHeight, $x1 + length($legends[$dataSet]) * $fontWidth, $y1 + $fontHeight, $allocatedColors[$dataSet]);</td></tr>
<tr><td class="h">1451</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>443</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$im-&gt;line( $x1, $y1 + $fontHeight - 1, $x1 + length($legends[$dataSet]) * $fontWidth, $y1 + $fontHeight - 1, $allocatedColors[$dataSet]);</td></tr>
<tr><td class="h">1452</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1453</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1454</td><td colspan="6"></td></tr><tr><td class="h">1455</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;########################################################################</td></tr>
<tr><td class="h">1456</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# OK, the chart is all drawn so all we need to do is write it out to</td></tr>
<tr><td class="h">1457</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# the specified file.</td></tr>
<tr><td class="h">1458</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dir = $this-&gt;getFileDir();</td></tr>
<tr><td class="h">1459</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $filename = $this-&gt;getFileName();</td></tr>
<tr><td class="h">1460</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;umask( 002 );</td></tr>
<tr><td class="h">1461</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1461">50</a></div></td><td></td><td></td><td><div>1085</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;open(IMAGE, &quot;&gt;$dir/$filename&quot;) or return &quot;Can&#39;t create file &#39;$dir/$filename: $!&quot;;</td></tr>
<tr><td class="h">1462</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;binmode IMAGE;</td></tr>
<tr><td class="h">1463</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1463">50</a></div></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $GD::VERSION &gt; 1.19 ) {</td></tr>
<tr><td class="h">1464</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>13652</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print IMAGE $im-&gt;png;</td></tr>
<tr><td class="h">1465</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1466</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print IMAGE $im-&gt;gif;</td></tr>
<tr><td class="h">1467</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1468</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>128794</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;close IMAGE;</td></tr>
<tr><td class="h">1469</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>389</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return undef;</td></tr>
<tr><td class="h">1470</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1471</td><td colspan="6"></td></tr><tr><td class="h">1472</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Given an array of Y locations for legends, walk through the array and</td></tr>
<tr><td class="h">1473</td><td></td><td></td><td></td><td></td><td></td><td class="s"># adjust the values such that no legends will overlap.  This is done in two</td></tr>
<tr><td class="h">1474</td><td></td><td></td><td></td><td></td><td></td><td class="s"># passes.  The first pass is to shift locations up if they overlap with</td></tr>
<tr><td class="h">1475</td><td></td><td></td><td></td><td></td><td></td><td class="s"># other labels.  The second pass is to shift down the locations if any were</td></tr>
<tr><td class="h">1476</td><td></td><td></td><td></td><td></td><td></td><td class="s"># shifted off the top of the chart.</td></tr>
<tr><td class="h">1477</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub adjustLegendYLocations</td></tr>
<tr><td class="h">1478</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">1479</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L1479">10</a></div></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($this, $yUR, @yValues) = @_;</td></tr>
<tr><td class="h">1480</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $fontHeight = $this-&gt;getFontHeight(&quot;legend&quot;);</td></tr>
<tr><td class="h">1481</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $halfFontHeight = $fontHeight / 2;</td></tr>
<tr><td class="h">1482</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $overLap;</td></tr>
<tr><td class="h">1483</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $overLappedWith;</td></tr>
<tr><td class="h">1484</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $yValue;</td></tr>
<tr><td class="h">1485</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dataSet;</td></tr>
<tr><td class="h">1486</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @retYvalues;</td></tr>
<tr><td class="h">1487</td><td colspan="6"></td></tr><tr><td class="h">1488</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %newYvalues1;</td></tr>
<tr><td class="h">1489</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %yValues;</td></tr>
<tr><td class="h">1490</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $needToShiftBackDown = 0;</td></tr>
<tr><td class="h">1491</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Put the Y values into a hash since it is easier to deal with a hash.</td></tr>
<tr><td class="h">1492</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for $dataSet (0..@yValues - 1) {</td></tr>
<tr><td class="h">1493</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>200</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yValues{$dataSet} = $yValues[$dataSet];</td></tr>
<tr><td class="h">1494</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1495</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Now sort the Y values from highest value (lowest point on the chart)</td></tr>
<tr><td class="h">1496</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# to lowest value (highest point on the chart) to make it easier to</td></tr>
<tr><td class="h">1497</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# adjust the Y values such that no two values are on top of each other.</td></tr>
<tr><td class="h">1498</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# The process is to start with the lowest (on the chart) legend and</td></tr>
<tr><td class="h">1499</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# then adjust all subsequent legends up if they happen to overlap</td></tr>
<tr><td class="h">1500</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# previously placed legends.</td></tr>
<tr><td class="h">1501</td><td colspan="6"></td></tr><tr><td class="h">1502</td><td><div class="c3">10</div><div class="c3">59</div></td><td></td><td></td><td></td><td><div>66</div><div>249</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for $dataSet (sort {$yValues{$b} &lt;=&gt; $yValues{$a}} keys %yValues) {</td></tr>
<tr><td class="h">1503</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>141</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yValue = $yValues{$dataSet};</td></tr>
<tr><td class="h">1504</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>116</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$overLap = 0;</td></tr>
<tr><td class="h">1505</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Check to see if the currently looked at Y value overlaps with any</td></tr>
<tr><td class="h">1506</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# (possibly adjusted) previous Y values.  If so, then adjust it up.</td></tr>
<tr><td class="h">1507</td><td><div class="c3">42</div><div class="c3">65</div></td><td></td><td></td><td></td><td><div>177</div><div>246</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $newDataSet (sort {$newYvalues1{$b} &lt;=&gt; $newYvalues1{$a}} keys %newYvalues1) {</td></tr>
<tr><td class="h">1508</td><td><div class="c3">80</div></td><td></td><td></td><td></td><td><div>268</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $new = $newYvalues1{$newDataSet};</td></tr>
<tr><td class="h">1509</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Check to see if the labels actually overlap.</td></tr>
<tr><td class="h">1510</td><td><div class="c3">80</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1510">100</a></div></td><td></td><td></td><td><div>420</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (($yValue + $halfFontHeight) &gt;= ($new - $halfFontHeight)) {</td></tr>
<tr><td class="h">1511</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Remember the value of the already placed legend so when</td></tr>
<tr><td class="h">1512</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# we adjust the current value, we adjust based on what we</td></tr>
<tr><td class="h">1513</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# overlapped with.  We keep a flag instead of just using</td></tr>
<tr><td class="h">1514</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# $overLappedWith since $overLappedWith might equal 0 in an</td></tr>
<tr><td class="h">1515</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# overlap condition which would break the logic.</td></tr>
<tr><td class="h">1516</td><td><div class="c3">21</div></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$overLap = 1;</td></tr>
<tr><td class="h">1517</td><td><div class="c3">21</div></td><td></td><td></td><td></td><td><div>82</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$overLappedWith = $new;</td></tr>
<tr><td class="h">1518</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1519</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1520</td><td><div class="c3">42</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1520">100</a></div></td><td></td><td></td><td><div>203</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($overLap != 0) {</td></tr>
<tr><td class="h">1521</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Adjust the current Y value up on the chart by an amount of</td></tr>
<tr><td class="h">1522</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 1/2 the height of the legend font.  The starting point is the</td></tr>
<tr><td class="h">1523</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# previously placed Y value that the current value overlapped</td></tr>
<tr><td class="h">1524</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# with.</td></tr>
<tr><td class="h">1525</td><td><div class="c3">17</div></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yValue = $overLappedWith - $fontHeight;</td></tr>
<tr><td class="h">1526</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1527</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Save the possibly adjusted value into a new hash;</td></tr>
<tr><td class="h">1528</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td><div>132</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$newYvalues1{$dataSet} = $yValue;</td></tr>
<tr><td class="h">1529</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Check to see if the shifting up of labels moved it above the</td></tr>
<tr><td class="h">1530</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# top of the graph.  If so, we will need to then shift things</td></tr>
<tr><td class="h">1531</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# back down (see below).</td></tr>
<tr><td class="h">1532</td><td><div class="c3">42</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1532">100</a></div></td><td></td><td></td><td><div>212</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$needToShiftBackDown = 1 if ($yValue &lt; $yUR);</td></tr>
<tr><td class="h">1533</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1534</td><td colspan="6"></td></tr><tr><td class="h">1535</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If any values got adjusted off of the top of the chart, then we need</td></tr>
<tr><td class="h">1536</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# to re-adjust the legends back down so they are all on the chart.</td></tr>
<tr><td class="h">1537</td><td><div class="c3">10</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1537">100</a></div></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($needToShiftBackDown == 1) {</td></tr>
<tr><td class="h">1538</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my %newYvalues2;</td></tr>
<tr><td class="h">1539</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $firstValue = 1;</td></tr>
<tr><td class="h">1540</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $adjustedTo;</td></tr>
<tr><td class="h">1541</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Now adjust back down on the graph any legends that got adjusted</td></tr>
<tr><td class="h">1542</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# off the top of the graph.</td></tr>
<tr><td class="h">1543</td><td><div class="c3">7</div><div class="c3">54</div></td><td></td><td></td><td></td><td><div>24</div><div>212</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for $dataSet (sort {$newYvalues1{$a} &lt;=&gt; $newYvalues1{$b}} keys %newYvalues1) {</td></tr>
<tr><td class="h">1544</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td><div>105</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yValue = $newYvalues1{$dataSet};</td></tr>
<tr><td class="h">1545</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td><div>86</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$overLap = 0;</td></tr>
<tr><td class="h">1546</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If the first value, we don&#39;t need to do a lot of work since</td></tr>
<tr><td class="h">1547</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# there are no previous values to compare against.</td></tr>
<tr><td class="h">1548</td><td><div class="c3">31</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1548">100</a></div></td><td></td><td></td><td><div>117</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($firstValue) {</td></tr>
<tr><td class="h">1549</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Check to see if the 1st value falls off of the top of the</td></tr>
<tr><td class="h">1550</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# chart.  If so, force its value to be at the top of the</td></tr>
<tr><td class="h">1551</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# chart.  This will force all other values to be shifted</td></tr>
<tr><td class="h">1552</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# down as well.</td></tr>
<tr><td class="h">1553</td><td><div class="c3">7</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1553">50</a></div></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($yValue &lt; $yUR) {</td></tr>
<tr><td class="h">1554</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$overLap = -1;</td></tr>
<tr><td class="h">1555</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$adjustedTo = $yUR - $halfFontHeight;</td></tr>
<tr><td class="h">1556</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$firstValue = 0;</td></tr>
<tr><td class="h">1557</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1558</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1559</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Check to see if the current value overlaps any of the previously looked at</td></tr>
<tr><td class="h">1560</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# legends.  If so, adjust down.</td></tr>
<tr><td class="h">1561</td><td><div class="c3">24</div><div class="c3">51</div></td><td></td><td></td><td></td><td><div>90</div><div>193</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $newDataSet2 (sort {$newYvalues2{$a} &lt;=&gt; $newYvalues2{$b}} keys %newYvalues2) {</td></tr>
<tr><td class="h">1562</td><td><div class="c3">60</div></td><td></td><td></td><td></td><td><div>211</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $new = $newYvalues2{$newDataSet2};</td></tr>
<tr><td class="h">1563</td><td><div class="c3">60</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1563">100</a></div></td><td></td><td></td><td><div>261</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (($yValue - $halfFontHeight) &lt;= ($new + $halfFontHeight)) {</td></tr>
<tr><td class="h">1564</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$overLap = 1;</td></tr>
<tr><td class="h">1565</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$adjustedTo = $new + $fontHeight;</td></tr>
<tr><td class="h">1566</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1567</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If already in an overlap mode, then take the last legend</td></tr>
<tr><td class="h">1568</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# value we adjusted as the starting point for adjusting the</td></tr>
<tr><td class="h">1569</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# current value</td></tr>
<tr><td class="h">1570</td><td><div class="c3">45</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1570">50</a></div></td><td></td><td></td><td><div>232</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$adjustedTo = $new + $fontHeight if ($overLap);</td></tr>
<tr><td class="h">1571</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1572</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1573</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1574</td><td><div class="c3">31</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1574">100</a></div></td><td></td><td></td><td><div>141</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($overLap == 0) {</td></tr>
<tr><td class="h">1575</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$newYvalues2{$dataSet} = $yValue;</td></tr>
<tr><td class="h">1576</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1577</td><td><div class="c3">20</div></td><td></td><td></td><td></td><td><div>88</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$newYvalues2{$dataSet} = $adjustedTo;</td></tr>
<tr><td class="h">1578</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1579</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1580</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Move the adjusted values into an array that gets returned</td></tr>
<tr><td class="h">1581</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for $dataSet (keys %newYvalues2) {</td></tr>
<tr><td class="h">1582</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td><div>138</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$retYvalues[$dataSet] = $newYvalues2{$dataSet};</td></tr>
<tr><td class="h">1583</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1584</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1585</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Move the adjusted values into an array that gets returned</td></tr>
<tr><td class="h">1586</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for $dataSet (keys %newYvalues1) {</td></tr>
<tr><td class="h">1587</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$retYvalues[$dataSet] = $newYvalues1{$dataSet};</td></tr>
<tr><td class="h">1588</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1589</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1590</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>77</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @retYvalues;</td></tr>
<tr><td class="h">1591</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1592</td><td colspan="6"></td></tr><tr><td class="h">1593</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Assuming a linear (base 10) scale, this routine attempts to compute</td></tr>
<tr><td class="h">1594</td><td></td><td></td><td></td><td></td><td></td><td class="s"># easily read/understood min and max values based on the min and max values</td></tr>
<tr><td class="h">1595</td><td></td><td></td><td></td><td></td><td></td><td class="s"># of the actual data plotted rounding things to 1.0eXX, 2.0eXX, or 5.0eXX.</td></tr>
<tr><td class="h">1596</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub computeLinearMinMax</td></tr>
<tr><td class="h">1597</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">1598</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L1598">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($this, $min, $max, $grids) = @_;</td></tr>
<tr><td class="h">1599</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Compute the difference between the max and min values.</td></tr>
<tr><td class="h">1600</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $diff = $max - $min;</td></tr>
<tr><td class="h">1601</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Deal with the special case where the difference is 0 or the number of</td></tr>
<tr><td class="h">1602</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# grids is 0.  If this is the case, then there is nothing we can do</td></tr>
<tr><td class="h">1603</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# here so we just return.</td></tr>
<tr><td class="h">1604</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1604">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ($min, $max, $grids, 0) if ($diff == 0);</td></tr>
<tr><td class="h">1605</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1605">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ($min, $max, $grids, 0) if ($grids == 0);</td></tr>
<tr><td class="h">1606</td><td colspan="6"></td></tr><tr><td class="h">1607</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Compute the increment between grid lines.</td></tr>
<tr><td class="h">1608</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $inc = 0.9 * $diff / $grids;</td></tr>
<tr><td class="h">1609</td><td colspan="6"></td></tr><tr><td class="h">1610</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Attempt to pick a better increment that is easier for a person to</td></tr>
<tr><td class="h">1611</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# comprehend.</td></tr>
<tr><td class="h">1612</td><td colspan="6"></td></tr><tr><td class="h">1613</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Calculate the power of the increment.</td></tr>
<tr><td class="h">1614</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $power;</td></tr>
<tr><td class="h">1615</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1615">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($inc &gt; 1) {</td></tr>
<tr><td class="h">1616</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$power = pow(10.0,ceil(log10($inc)) - 1);</td></tr>
<tr><td class="h">1617</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1618</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$power = pow(10.0,floor(log10($inc)));</td></tr>
<tr><td class="h">1619</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1620</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $i = 1.0/$power * $inc;</td></tr>
<tr><td class="h">1621</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Now that all of the increments have been normalized to be between</td></tr>
<tr><td class="h">1622</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# 0-10, calculate a better human readable value.</td></tr>
<tr><td class="h">1623</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $newInc;</td></tr>
<tr><td class="h">1624</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1624">0</a></div><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1624">0</a></div><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1624">0</a></div></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($i &lt;= 1.0)	{ $newInc = 1.0;</td></tr>
<tr><td class="h">1625</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif ($i &lt;= 2.0)	{ $newInc = 2.0;</td></tr>
<tr><td class="h">1626</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif ($i &lt;= 5.0)	{ $newInc = 5.0;</td></tr>
<tr><td class="h">1627</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else		{ $newInc = 10.0;</td></tr>
<tr><td class="h">1628</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1629</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Take the normalized value and convert back to the actual range.</td></tr>
<tr><td class="h">1630</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$newInc *= $power;</td></tr>
<tr><td class="h">1631</td><td colspan="6"></td></tr><tr><td class="h">1632</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Now adjust (round down) the min value based on the computed</td></tr>
<tr><td class="h">1633</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# increment.</td></tr>
<tr><td class="h">1634</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $newMin = floor($min / $newInc) * $newInc;</td></tr>
<tr><td class="h">1635</td><td colspan="6"></td></tr><tr><td class="h">1636</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Compute the new difference between the original max and the new min.</td></tr>
<tr><td class="h">1637</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $newDiff = $max - $newMin;</td></tr>
<tr><td class="h">1638</td><td colspan="6"></td></tr><tr><td class="h">1639</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Compute the number of actual grids that will be used</td></tr>
<tr><td class="h">1640</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $numGrids = ceil($newDiff / $newInc);</td></tr>
<tr><td class="h">1641</td><td colspan="6"></td></tr><tr><td class="h">1642</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Now compute the new max based on the new min, the increment, and the</td></tr>
<tr><td class="h">1643</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# new number of grids.</td></tr>
<tr><td class="h">1644</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $newMax = $newMin + $newInc * $numGrids;</td></tr>
<tr><td class="h">1645</td><td colspan="6"></td></tr><tr><td class="h">1646</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Calculate the max number of decimal points needed to display the</td></tr>
<tr><td class="h">1647</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# values so the print routine will use the same formatting when</td></tr>
<tr><td class="h">1648</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# printing out labels.</td></tr>
<tr><td class="h">1649</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $numDecimalDigits;</td></tr>
<tr><td class="h">1650</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1650">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($newInc &gt; 1) {</td></tr>
<tr><td class="h">1651</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$numDecimalDigits = 0;</td></tr>
<tr><td class="h">1652</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1653</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$numDecimalDigits = - floor(log10($newInc));</td></tr>
<tr><td class="h">1654</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1655</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ($newMin, $newMax, $numGrids - 1, $numDecimalDigits);</td></tr>
<tr><td class="h">1656</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1657</td><td colspan="6"></td></tr><tr><td class="h">1658</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Assuming a log10 scale, this routine attempts to compute easily</td></tr>
<tr><td class="h">1659</td><td></td><td></td><td></td><td></td><td></td><td class="s"># read/understood ymin and ymax values based on the real min and max values</td></tr>
<tr><td class="h">1660</td><td></td><td></td><td></td><td></td><td></td><td class="s"># of the actual data plotted rounding things to the nearest log10 line.</td></tr>
<tr><td class="h">1661</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub computeYMinMaxLog</td></tr>
<tr><td class="h">1662</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">1663</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L1663">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($this) = @_;</td></tr>
<tr><td class="h">1664</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ymin = $this-&gt;getYminOfData();</td></tr>
<tr><td class="h">1665</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ymax = $this-&gt;getYmaxOfData();</td></tr>
<tr><td class="h">1666</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $yMinLog10 = log10($ymin);</td></tr>
<tr><td class="h">1667</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $yMaxLog10 = log10($ymax);</td></tr>
<tr><td class="h">1668</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $newYmin = pow(10.0,floor($yMinLog10));</td></tr>
<tr><td class="h">1669</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $newYmax = pow(10.0,ceil($yMaxLog10));</td></tr>
<tr><td class="h">1670</td><td colspan="6"></td></tr><tr><td class="h">1671</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $numYGrids = log10($newYmax) - log10($newYmin);</td></tr>
<tr><td class="h">1672</td><td colspan="6"></td></tr><tr><td class="h">1673</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setYminOfData($newYmin);</td></tr>
<tr><td class="h">1674</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setYmaxOfData($newYmax);</td></tr>
<tr><td class="h">1675</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setNumYGrids($numYGrids);</td></tr>
<tr><td class="h">1676</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setNumYDigits(0);</td></tr>
<tr><td class="h">1677</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If the user hasn&#39;t specified the number of ytics, then set it here.</td></tr>
<tr><td class="h">1678</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tics = $this-&gt;getNumYTics();</td></tr>
<tr><td class="h">1679</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1679">0</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--condition.html#L1679">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;setNumYTics(8) if ($tics == -1 || $tics &gt; 8);</td></tr>
<tr><td class="h">1680</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1681</td><td colspan="6"></td></tr><tr><td class="h">1682</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Attempt to compute the number of significant digits in the numbers</td></tr>
<tr><td class="h">1683</td><td></td><td></td><td></td><td></td><td></td><td class="s"># generated based on the user specified min and/or max.</td></tr>
<tr><td class="h">1684</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub computeNumDigits</td></tr>
<tr><td class="h">1685</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">1686</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L1686">10</a></div></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($this, $min, $max, $numGrids) = @_;</td></tr>
<tr><td class="h">1687</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Compute the difference between the max and min values.</td></tr>
<tr><td class="h">1688</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $diff = $max - $min;</td></tr>
<tr><td class="h">1689</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Compute the increment between grid lines.</td></tr>
<tr><td class="h">1690</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $inc = $diff / ($numGrids + 1);</td></tr>
<tr><td class="h">1691</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $value = $min;</td></tr>
<tr><td class="h">1692</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $maxDigits = 0;</td></tr>
<tr><td class="h">1693</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $maxLen = 0;</td></tr>
<tr><td class="h">1694</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for my $yAxisIndex (0..$numGrids) {</td></tr>
<tr><td class="h">1695</td><td><div class="c3">100</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1695">100</a></div></td><td></td><td></td><td><div>746</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($value =~ /\./) {</td></tr>
<tr><td class="h">1696</td><td><div class="c3">84</div></td><td></td><td></td><td></td><td><div>289</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value =~ m/-?\d+\.(\d+)/;</td></tr>
<tr><td class="h">1697</td><td><div class="c3">84</div></td><td></td><td></td><td></td><td><div>279</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $decimalPart = $1;</td></tr>
<tr><td class="h">1698</td><td><div class="c3">84</div></td><td></td><td></td><td></td><td><div>228</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$maxLen = length($decimalPart);</td></tr>
<tr><td class="h">1699</td><td><div class="c3">84</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1699">100</a></div></td><td></td><td></td><td><div>373</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$maxDigits = $maxLen if ($maxLen &gt; $maxDigits);</td></tr>
<tr><td class="h">1700</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1701</td><td><div class="c3">100</div></td><td></td><td></td><td></td><td><div>341</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value += $inc;</td></tr>
<tr><td class="h">1702</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1703</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Limit the number of digits to 4 decimal digits.</td></tr>
<tr><td class="h">1704</td><td><div class="c3">10</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1704">100</a></div></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$maxDigits = 4 if ($maxDigits &gt;= 4);</td></tr>
<tr><td class="h">1705</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ($maxDigits);</td></tr>
<tr><td class="h">1706</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1707</td><td colspan="6"></td></tr><tr><td class="h">1708</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Convert a color in the form of either #RRGGBB or just RRGGBB (both in hex</td></tr>
<tr><td class="h">1709</td><td></td><td></td><td></td><td></td><td></td><td class="s"># format) to a 3 element array of decimal numbers in the form</td></tr>
<tr><td class="h">1710</td><td></td><td></td><td></td><td></td><td></td><td class="s"># (RED GREEN BLUE).</td></tr>
<tr><td class="h">1711</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _convert_color</td></tr>
<tr><td class="h">1712</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">1713</td><td><div class="c3">62</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L1713">62</a></div></td><td><div>216</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ( $hexcolor ) = @_;</td></tr>
<tr><td class="h">1714</td><td><div class="c3">62</div></td><td></td><td></td><td></td><td><div>171</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ( $red, $green, $blue );</td></tr>
<tr><td class="h">1715</td><td><div class="c3">62</div></td><td></td><td></td><td></td><td><div>247</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$hexcolor =~ /#?(..)(..)(..)/;</td></tr>
<tr><td class="h">1716</td><td><div class="c3">62</div></td><td></td><td></td><td></td><td><div>225</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$red	= hex($1);</td></tr>
<tr><td class="h">1717</td><td><div class="c3">62</div></td><td></td><td></td><td></td><td><div>179</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$green	= hex($2);</td></tr>
<tr><td class="h">1718</td><td><div class="c3">62</div></td><td></td><td></td><td></td><td><div>175</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$blue	= hex($3);</td></tr>
<tr><td class="h">1719</td><td><div class="c3">62</div></td><td></td><td></td><td></td><td><div>445</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ($red, $green, $blue);</td></tr>
<tr><td class="h">1720</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1721</td><td colspan="6"></td></tr><tr><td class="h">1722</td><td></td><td></td><td></td><td></td><td></td><td class="s"># This routine takes a floating point number and returns a string in a</td></tr>
<tr><td class="h">1723</td><td></td><td></td><td></td><td></td><td></td><td class="s"># consistent format suitable for printing out and showing the user.  If the</td></tr>
<tr><td class="h">1724</td><td></td><td></td><td></td><td></td><td></td><td class="s"># number is &gt; 999,999 or less than 0.001, then engineering notation is</td></tr>
<tr><td class="h">1725</td><td></td><td></td><td></td><td></td><td></td><td class="s"># used.</td></tr>
<tr><td class="h">1726</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _printNumber</td></tr>
<tr><td class="h">1727</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">1728</td><td><div class="c3">110</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L1728">110</a></div></td><td><div>381</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($num, $numDigits) = @_;</td></tr>
<tr><td class="h">1729</td><td><div class="c3">110</div></td><td></td><td></td><td></td><td><div>268</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $text;</td></tr>
<tr><td class="h">1730</td><td><div class="c3">110</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1730">50</a></div><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1730">50</a></div><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1730">50</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--condition.html#L1730">67</a></div></td><td></td><td><div>976</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (abs($num) &gt; 999999) {</td></tr>
<tr><td class="h">1731</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$text = sprintf(&quot;%2.1e&quot;, $num);</td></tr>
<tr><td class="h">1732</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif (abs($num) &lt; 0.001 &amp;&amp; $num != 0) {</td></tr>
<tr><td class="h">1733</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$text = sprintf(&quot;%2.1e&quot;, $num);</td></tr>
<tr><td class="h">1734</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif ($numDigits &gt; 0) {</td></tr>
<tr><td class="h">1735</td><td><div class="c3">110</div></td><td></td><td></td><td></td><td><div>674</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$text = sprintf(&quot;%.${numDigits}f&quot;, $num);</td></tr>
<tr><td class="h">1736</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1737</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$text = $num;</td></tr>
<tr><td class="h">1738</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1739</td><td><div class="c3">110</div></td><td></td><td></td><td></td><td><div>401</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $text;</td></tr>
<tr><td class="h">1740</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1741</td><td colspan="6"></td></tr><tr><td class="h">1742</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Given a number, return an adjusted version of that number depending on</td></tr>
<tr><td class="h">1743</td><td></td><td></td><td></td><td></td><td></td><td class="s"># the scale the user has specified.  If scale=semilog, then return the</td></tr>
<tr><td class="h">1744</td><td></td><td></td><td></td><td></td><td></td><td class="s"># log10 of the value else just return the original value (assuming linear).</td></tr>
<tr><td class="h">1745</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _scale</td></tr>
<tr><td class="h">1746</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">1747</td><td><div class="c3">506</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--subroutine.html#L1747">506</a></div></td><td><div>1740</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($this, $value) = @_;</td></tr>
<tr><td class="h">1748</td><td><div class="c3">506</div></td><td></td><td></td><td></td><td><div>1700</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $scale = $this-&gt;getScale();</td></tr>
<tr><td class="h">1749</td><td><div class="c3">506</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-ChartPlugin-Chart-pm--branch.html#L1749">50</a></div></td><td></td><td></td><td><div>2706</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $value if ($scale ne &quot;semilog&quot;);</td></tr>
<tr><td class="h">1750</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Assume semilog</td></tr>
<tr><td class="h">1751</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return log10($value);</td></tr>
<tr><td class="h">1752</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1753</td><td colspan="6"></td></tr><tr><td class="h">1754</td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
</table>
</body>
</html>
