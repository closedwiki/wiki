<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 0.61
Devel::Cover is copyright 2001-2006, Paul Johnson (pjcj@cpan.org)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: /usr/share/perl5/TWiki/Plugins.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">/usr/share/perl5/TWiki/Plugins.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c0">53.5%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>time</th><th>code</th></tr>
<tr><td class="h">1</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Module of TWiki Enterprise Collaboration Platform, http://TWiki.org/</td></tr>
<tr><td class="h">2</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">3</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Copyright (C) 2000-2001 Andrea Sterbini, a.sterbini@flashnet.it</td></tr>
<tr><td class="h">4</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Copyright (C) 1999-2007 Peter Thoeny, peter@thoeny.org</td></tr>
<tr><td class="h">5</td><td></td><td></td><td></td><td></td><td></td><td class="s"># and TWiki Contributors. All Rights Reserved. TWiki Contributors</td></tr>
<tr><td class="h">6</td><td></td><td></td><td></td><td></td><td></td><td class="s"># are listed in the AUTHORS file in the root of this distribution.</td></tr>
<tr><td class="h">7</td><td></td><td></td><td></td><td></td><td></td><td class="s"># NOTE: Please extend that file, not this notice.</td></tr>
<tr><td class="h">8</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">9</td><td></td><td></td><td></td><td></td><td></td><td class="s"># This program is free software; you can redistribute it and/or</td></tr>
<tr><td class="h">10</td><td></td><td></td><td></td><td></td><td></td><td class="s"># modify it under the terms of the GNU General Public License</td></tr>
<tr><td class="h">11</td><td></td><td></td><td></td><td></td><td></td><td class="s"># as published by the Free Software Foundation; either version 2</td></tr>
<tr><td class="h">12</td><td></td><td></td><td></td><td></td><td></td><td class="s"># of the License, or (at your option) any later version. For</td></tr>
<tr><td class="h">13</td><td></td><td></td><td></td><td></td><td></td><td class="s"># more details read LICENSE in the root of this distribution.</td></tr>
<tr><td class="h">14</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">15</td><td></td><td></td><td></td><td></td><td></td><td class="s"># This program is distributed in the hope that it will be useful,</td></tr>
<tr><td class="h">16</td><td></td><td></td><td></td><td></td><td></td><td class="s"># but WITHOUT ANY WARRANTY; without even the implied warranty of</td></tr>
<tr><td class="h">17</td><td></td><td></td><td></td><td></td><td></td><td class="s"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</td></tr>
<tr><td class="h">18</td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">19</td><td></td><td></td><td></td><td></td><td></td><td class="s"># As per the GPL, removal of this notice is prohibited.</td></tr>
<tr><td class="h">20</td><td colspan="6"></td></tr><tr><td class="h">21 - 31</td><td colspan="5"></td><td class="s"><pre>=pod

---+ package TWiki::Plugins

This module defines the singleton object that handles Plugins
loading, initialization and execution.

This class uses Chain of Responsibility (GOF) pattern to dispatch
handler calls to registered plugins.

=cut</pre></td></tr>
<tr><td class="h">32</td><td colspan="6"></td></tr><tr><td class="h">33 - 72</td><td colspan="5"></td><td class="s"><pre>=pod

Note that as of version 1.026 of this module, TWiki internal
methods are _no longer available_ to plugins. Any calls to
TWiki internal methods must be replaced by calls via the
=$SESSION= object in this package, or via the Func package.
For example, the call:

=my $pref = TWiki::getPreferencesValue(&#39;URGH&#39;);=

should be replaced with

=my $pref = TWiki::Func::getPreferencesValue(&#39;URGH&#39;);=

and the call

=my $t = TWiki::writeWarning($message);=

should be replaced with

=my $pref = $TWiki::Plugins::SESSION-&gt;writeWarning($message);=

Methods in other modules such as Store must be accessed through
the relevant TWiki sub-object, for example

=TWiki::Store::saveTopic(...)=

should be replaced with

=$TWiki::Plugins::SESSION-&gt;{store}-&gt;saveTopic(...)=

Note that calling TWiki internal methods is very very bad practice,
and should be avoided wherever practical.

The developers of TWiki reserve the right to change internal
methods without warning, unless those methods are clearly
marked as PUBLIC. PUBLIC methods are part of the core specification
of a module and can be trusted.

=cut</pre></td></tr>
<tr><td class="h">73</td><td colspan="6"></td></tr><tr><td class="h">74</td><td></td><td></td><td></td><td></td><td></td><td class="s">package TWiki::Plugins;</td></tr>
<tr><td class="h">75</td><td colspan="6"></td></tr><tr><td class="h">76</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L76">1</a></div></td><td><div>18</div><div>3</div><div>6</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">77</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L77">1</a></div></td><td><div>7</div><div>2</div><div>7</div></td><td class="s">use Assert;</td></tr>
<tr><td class="h">78</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L78">1</a></div></td><td><div>11</div><div>3</div><div>10</div></td><td class="s">use TWiki::Plugin;</td></tr>
<tr><td class="h">79</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L79">1</a></div></td><td><div>10</div><div>4</div><div>10</div></td><td class="s">use TWiki::Func;</td></tr>
<tr><td class="h">80</td><td colspan="6"></td></tr><tr><td class="h">81</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L81">1</a></div></td><td><div>8</div><div>3</div><div>8</div></td><td class="s">use vars qw ( $VERSION $SESSION $inited );</td></tr>
<tr><td class="h">82</td><td colspan="6"></td></tr><tr><td class="h">83 - 99</td><td colspan="5"></td><td class="s"><pre>=pod

---++ PUBLIC constant $VERSION

This is the version number of the plugins package. Use it for checking
if you have a recent enough version.

---++ PUBLIC $SESSION

This is a reference to the TWiki session object. It can be used in
plugins to get at the methods of the TWiki kernel.

You are _highly_ recommended to only use the methods in the
[[TWikiFuncDotPm][Func]] interface, unless you have no other choice,
as kernel methods may change between TWiki releases.

=cut</pre></td></tr>
<tr><td class="h">100</td><td colspan="6"></td></tr><tr><td class="h">101</td><td></td><td></td><td></td><td></td><td></td><td class="s">$VERSION = &#39;1.11&#39;;</td></tr>
<tr><td class="h">102</td><td colspan="6"></td></tr><tr><td class="h">103</td><td></td><td></td><td></td><td></td><td></td><td class="s">$inited = 0;</td></tr>
<tr><td class="h">104</td><td colspan="6"></td></tr><tr><td class="h">105</td><td></td><td></td><td></td><td></td><td></td><td class="s">my %onlyOnceHandlers =</td></tr>
<tr><td class="h">106</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;(</td></tr>
<tr><td class="h">107</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;registrationHandler            =&gt; 1,</td></tr>
<tr><td class="h">108</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;writeHeaderHandler             =&gt; 1,</td></tr>
<tr><td class="h">109</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;redirectCgiQueryHandler        =&gt; 1,</td></tr>
<tr><td class="h">110</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;renderFormFieldForEditHandler  =&gt; 1,</td></tr>
<tr><td class="h">111</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;renderWikiWordHandler          =&gt; 1,</td></tr>
<tr><td class="h">112</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;);</td></tr>
<tr><td class="h">113</td><td colspan="6"></td></tr><tr><td class="h">114 - 122</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ClassMethod new( $session )

Construct new singleton plugins collection object. The object is a
container for a list of plugins and the handlers registered by the plugins.
The plugins and the handlers are carefully ordered.

=cut</pre></td></tr>
<tr><td class="h">123</td><td colspan="6"></td></tr><tr><td class="h">124</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub new {</td></tr>
<tr><td class="h">125</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L125">1</a></div></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ( $class, $session ) = @_;</td></tr>
<tr><td class="h">126</td><td colspan="6"></td></tr><tr><td class="h">127</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = bless( {}, $class );</td></tr>
<tr><td class="h">128</td><td colspan="6"></td></tr><tr><td class="h">129</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>2</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ASSERT($session-&gt;isa( &#39;TWiki&#39;)) if DEBUG;</td></tr>
<tr><td class="h">130</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;{session} = $session;</td></tr>
<tr><td class="h">131</td><td colspan="6"></td></tr><tr><td class="h">132</td><td><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L132">50</a></div></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( $inited ) {</td></tr>
<tr><td class="h">133</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TWiki::registerTagHandler( &#39;PLUGINDESCRIPTIONS&#39;,</td></tr>
<tr><td class="h">134</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\&amp;_handlePLUGINDESCRIPTIONS );</td></tr>
<tr><td class="h">135</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TWiki::registerTagHandler( &#39;ACTIVATEDPLUGINS&#39;,</td></tr>
<tr><td class="h">136</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\&amp;_handleACTIVATEDPLUGINS );</td></tr>
<tr><td class="h">137</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TWiki::registerTagHandler( &#39;FAILEDPLUGINS&#39;,</td></tr>
<tr><td class="h">138</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\&amp;_handleFAILEDPLUGINS );</td></tr>
<tr><td class="h">139</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$inited = 1;</td></tr>
<tr><td class="h">140</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">141</td><td colspan="6"></td></tr><tr><td class="h">142</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $this;</td></tr>
<tr><td class="h">143</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">144</td><td colspan="6"></td></tr><tr><td class="h">145 - 157</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod load($allDisabled) -&gt; $loginName

Find all active plugins, and invoke the early initialisation.
Has to be done _after_ prefs are read.

Returns the user returned by the last =initializeUserHandler= to be
called.

If allDisabled is set, no plugin handlers will be called.

=cut</pre></td></tr>
<tr><td class="h">158</td><td colspan="6"></td></tr><tr><td class="h">159</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub load {</td></tr>
<tr><td class="h">160</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L160">1</a></div></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ( $this, $allDisabled ) = @_;</td></tr>
<tr><td class="h">161</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ASSERT($this-&gt;isa( &#39;TWiki::Plugins&#39;)) if DEBUG;</td></tr>
<tr><td class="h">162</td><td colspan="6"></td></tr><tr><td class="h">163</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>2</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %lookup;</td></tr>
<tr><td class="h">164</td><td colspan="6"></td></tr><tr><td class="h">165</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $session = $this-&gt;{session};</td></tr>
<tr><td class="h">166</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $query = $session-&gt;{cgiQuery};</td></tr>
<tr><td class="h">167</td><td colspan="6"></td></tr><tr><td class="h">168</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @pluginList = ();</td></tr>
<tr><td class="h">169</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %already;</td></tr>
<tr><td class="h">170</td><td colspan="6"></td></tr><tr><td class="h">171</td><td><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L171">50</a></div></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( $allDisabled ) {</td></tr>
<tr><td class="h">172</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L172">50</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--condition.html#L172">33</a></div></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $query &amp;&amp; defined( $query-&gt;param( &#39;debugenableplugins&#39; ))) {</td></tr>
<tr><td class="h">173</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@pluginList = split( /[,\s]+/,</td></tr>
<tr><td class="h">174</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$query-&gt;param( &#39;debugenableplugins&#39; ));</td></tr>
<tr><td class="h">175</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">176</td><td><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L176">50</a></div></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $TWiki::cfg{PluginsOrder} ) {</td></tr>
<tr><td class="h">177</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $plugin( split( /[,\s]+/,</td></tr>
<tr><td class="h">178</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$TWiki::cfg{PluginsOrder} )) {</td></tr>
<tr><td class="h">179</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Note this allows the same plugin to be listed</td></tr>
<tr><td class="h">180</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# multiple times! Thus their handlers can be called</td></tr>
<tr><td class="h">181</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# more than once. This is *desireable*.</td></tr>
<tr><td class="h">182</td><td><div class="c3">3</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L182">50</a></div></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $TWiki::cfg{Plugins}{$plugin}{Enabled} ) {</td></tr>
<tr><td class="h">183</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @pluginList, $plugin );</td></tr>
<tr><td class="h">184</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$already{$plugin} = 1;</td></tr>
<tr><td class="h">185</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">186</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">187</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">188</td><td><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td></td><td><div>17</div><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $plugin ( sort keys %{$TWiki::cfg{Plugins}} ) {</td></tr>
<tr><td class="h">189</td><td><div class="c3">13</div></td><td><div class="c3" title="T/F"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L189">100</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--condition.html#L189">67</a></div></td><td></td><td><div>138</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $TWiki::cfg{Plugins}{$plugin}{Enabled} &amp;&amp;</td></tr>
<tr><td class="h">190</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!$already{$plugin} ) {</td></tr>
<tr><td class="h">191</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @pluginList, $plugin );</td></tr>
<tr><td class="h">192</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td><div>72</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$already{$plugin} = 1;</td></tr>
<tr><td class="h">193</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">194</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">195</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">196</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">197</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $user; # the user login name</td></tr>
<tr><td class="h">198</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $userDefiner; # the plugin that is defining the user</td></tr>
<tr><td class="h">199</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $pn ( @pluginList ) {</td></tr>
<tr><td class="h">200</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $p;</td></tr>
<tr><td class="h">201</td><td><div class="c3">13</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L201">50</a></div></td><td></td><td></td><td><div>69</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $p = $lookup{$pn} ) {</td></tr>
<tr><td class="h">202</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td><div>108</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$p = new TWiki::Plugin( $session, $pn,</td></tr>
<tr><td class="h">203</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$TWiki::cfg{Plugins}{$pn}{Module} )</td></tr>
<tr><td class="h">204</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">205</td><td><div class="c3">13</div><div class="c3">13</div></td><td></td><td></td><td></td><td><div>40</div><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @{$this-&gt;{plugins}}, $p;</td></tr>
<tr><td class="h">206</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $anotherUser = $p-&gt;load();</td></tr>
<tr><td class="h">207</td><td><div class="c3">13</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L207">50</a></div></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $anotherUser ) {</td></tr>
<tr><td class="h">208</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L208">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $userDefiner ) {</td></tr>
<tr><td class="h">209</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die &#39;Two plugins - &#39;. $userDefiner-&gt;{name} . &#39; and &#39; .</td></tr>
<tr><td class="h">210</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$p-&gt;{name} .</td></tr>
<tr><td class="h">211</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39; are both trying to define the user login name.&#39;;</td></tr>
<tr><td class="h">212</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">213</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$userDefiner = $p;</td></tr>
<tr><td class="h">214</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$user = $anotherUser;</td></tr>
<tr><td class="h">215</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">216</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">217</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Report initialisation errors</td></tr>
<tr><td class="h">218</td><td><div class="c3">13</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L218">50</a></div></td><td></td><td></td><td><div>58</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $p-&gt;{errors} ) {</td></tr>
<tr><td class="h">219</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;{session}-&gt;writeWarning( join( &quot;\n&quot;, @{$p-&gt;{errors}} ));</td></tr>
<tr><td class="h">220</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">221</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td><div>65</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$lookup{$pn} = $p;</td></tr>
<tr><td class="h">222</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">223</td><td colspan="6"></td></tr><tr><td class="h">224</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $user;</td></tr>
<tr><td class="h">225</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">226</td><td colspan="6"></td></tr><tr><td class="h">227 - 233</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod settings()

Push plugin settings onto preference stack

=cut</pre></td></tr>
<tr><td class="h">234</td><td colspan="6"></td></tr><tr><td class="h">235</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub settings {</td></tr>
<tr><td class="h">236</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L236">1</a></div></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">237</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>2</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ASSERT($this-&gt;isa( &#39;TWiki::Plugins&#39;)) if DEBUG;</td></tr>
<tr><td class="h">238</td><td colspan="6"></td></tr><tr><td class="h">239</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Set the session for this call stack</td></tr>
<tr><td class="h">240</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $TWiki::Plugins::SESSION = $this-&gt;{session};</td></tr>
<tr><td class="h">241</td><td colspan="6"></td></tr><tr><td class="h">242</td><td><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td></td><td><div>6</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $plugin ( @{$this-&gt;{plugins}} ) {</td></tr>
<tr><td class="h">243</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td><div>61</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$plugin-&gt;registerSettings( $this );</td></tr>
<tr><td class="h">244</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">245</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">246</td><td colspan="6"></td></tr><tr><td class="h">247 - 253</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod enable()

Initialisation that is done after the user is known.

=cut</pre></td></tr>
<tr><td class="h">254</td><td colspan="6"></td></tr><tr><td class="h">255</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub enable {</td></tr>
<tr><td class="h">256</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L256">1</a></div></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">257</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ASSERT($this-&gt;isa( &#39;TWiki::Plugins&#39;)) if DEBUG;</td></tr>
<tr><td class="h">258</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $prefs = $this-&gt;{session}-&gt;{prefs};</td></tr>
<tr><td class="h">259</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--condition.html#L259">50</a></div></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dissed = $prefs-&gt;getPreferencesValue(&#39;DISABLEDPLUGINS&#39;) || &#39;&#39;;</td></tr>
<tr><td class="h">260</td><td><div class="c3">1</div><div class="c0">0</div></td><td></td><td></td><td></td><td><div>5</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %disabled = map { $_ =&gt; 1 } split(/,\s*/, $dissed);</td></tr>
<tr><td class="h">261</td><td colspan="6"></td></tr><tr><td class="h">262</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Set the session for this call stack</td></tr>
<tr><td class="h">263</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $TWiki::Plugins::SESSION = $this-&gt;{session};</td></tr>
<tr><td class="h">264</td><td colspan="6"></td></tr><tr><td class="h">265</td><td><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td></td><td><div>3</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $plugin ( @{$this-&gt;{plugins}} ) {</td></tr>
<tr><td class="h">266</td><td><div class="c3">13</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L266">50</a></div></td><td></td><td></td><td><div>67</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($disabled{$plugin-&gt;{name}}) {</td></tr>
<tr><td class="h">267</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$plugin-&gt;{disabled} = 1;</td></tr>
<tr><td class="h">268</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @{$plugin-&gt;{errors}}, $plugin-&gt;{name}.&#39; has been disabled&#39; );</td></tr>
<tr><td class="h">269</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">270</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$plugin-&gt;registerHandlers( $this );</td></tr>
<tr><td class="h">271</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Report initialisation errors</td></tr>
<tr><td class="h">272</td><td><div class="c3">13</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L272">50</a></div></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $plugin-&gt;{errors} ) {</td></tr>
<tr><td class="h">273</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;{session}-&gt;writeWarning( join( &quot;\n&quot;, @{$plugin-&gt;{errors}} ));</td></tr>
<tr><td class="h">274</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">275</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">276</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">277</td><td colspan="6"></td></tr><tr><td class="h">278 - 286</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod getPluginVersion() -&gt; $number

Returns the $TWiki::Plugins::VERSION number if no parameter is specified,
else returns the version number of a named Plugin. If the Plugin cannot
be found or is not active, 0 is returned.

=cut</pre></td></tr>
<tr><td class="h">287</td><td colspan="6"></td></tr><tr><td class="h">288</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub getPluginVersion {</td></tr>
<tr><td class="h">289</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L289">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ( $this, $thePlugin ) = @_;</td></tr>
<tr><td class="h">290</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ASSERT($this-&gt;isa( &#39;TWiki::Plugins&#39;)) if DEBUG;</td></tr>
<tr><td class="h">291</td><td colspan="6"></td></tr><tr><td class="h">292</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L292">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $VERSION unless $thePlugin;</td></tr>
<tr><td class="h">293</td><td colspan="6"></td></tr><tr><td class="h">294</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $plugin ( @{$this-&gt;{plugins}} ) {</td></tr>
<tr><td class="h">295</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L295">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $plugin-&gt;{name} eq $thePlugin ) {</td></tr>
<tr><td class="h">296</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $plugin-&gt;getVersion();</td></tr>
<tr><td class="h">297</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">298</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">299</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">300</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">301</td><td colspan="6"></td></tr><tr><td class="h">302 - 313</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod addListener( $command, $handler )

   * =$command* - name of the event
   * =$handler= - the handler object.

Add a listener to the end of the list of registered listeners for this event.
The listener must implement =invoke($command,...)=, which will be triggered
when the event is to be processed.

=cut</pre></td></tr>
<tr><td class="h">314</td><td colspan="6"></td></tr><tr><td class="h">315</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub addListener {</td></tr>
<tr><td class="h">316</td><td><div class="c3">35</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L316">35</a></div></td><td><div>125</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $this, $c, $h ) = @_;</td></tr>
<tr><td class="h">317</td><td><div class="c3">35</div></td><td></td><td></td><td></td><td><div>79</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ASSERT($this-&gt;isa( &#39;TWiki::Plugins&#39;)) if DEBUG;</td></tr>
<tr><td class="h">318</td><td colspan="6"></td></tr><tr><td class="h">319</td><td><div class="c3">35</div><div class="c3">35</div></td><td></td><td></td><td></td><td><div>85</div><div>218</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push( @{$this-&gt;{registeredHandlers}{$c}}, $h );</td></tr>
<tr><td class="h">320</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">321</td><td colspan="6"></td></tr><tr><td class="h">322</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _dispatch {</td></tr>
<tr><td class="h">323</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# must be shifted to clear parameter vector</td></tr>
<tr><td class="h">324</td><td><div class="c3">87</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L324">87</a></div></td><td><div>274</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">325</td><td><div class="c3">87</div></td><td></td><td></td><td></td><td><div>207</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ASSERT($this-&gt;isa( &#39;TWiki::Plugins&#39;)) if DEBUG;</td></tr>
<tr><td class="h">326</td><td><div class="c3">87</div></td><td></td><td></td><td></td><td><div>277</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $handlerName = shift;</td></tr>
<tr><td class="h">327</td><td colspan="6"></td></tr><tr><td class="h">328</td><td><div class="c3">87</div><div class="c3">87</div></td><td></td><td></td><td></td><td><div>234</div><div>515</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $plugin ( @{$this-&gt;{registeredHandlers}{$handlerName}} ) {</td></tr>
<tr><td class="h">329</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Set the value of $SESSION for this call stack</td></tr>
<tr><td class="h">330</td><td><div class="c3">246</div></td><td></td><td></td><td></td><td><div>880</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $SESSION = $this-&gt;{session};</td></tr>
<tr><td class="h">331</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# apply handler on the remaining list of args</td></tr>
<tr><td class="h">332</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L332">1</a></div></td><td><div>6</div><div>3</div><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no strict &#39;refs&#39;;</td></tr>
<tr><td class="h">333</td><td><div class="c3">246</div></td><td></td><td></td><td></td><td><div>1154</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $status = $plugin-&gt;invoke( $handlerName, @_ );</td></tr>
<tr><td class="h">334</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L334">1</a></div></td><td><div>7</div><div>2</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use strict &#39;refs&#39;;</td></tr>
<tr><td class="h">335</td><td><div class="c3">246</div></td><td><div class="c0" title="-/F"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L335">50</a></div></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--condition.html#L335">67</a></div></td><td></td><td><div>1748</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $status &amp;&amp; $onlyOnceHandlers{$handlerName} ) {</td></tr>
<tr><td class="h">336</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $status;</td></tr>
<tr><td class="h">337</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">338</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">339</td><td><div class="c3">87</div></td><td></td><td></td><td></td><td><div>482</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return undef;</td></tr>
<tr><td class="h">340</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">341</td><td colspan="6"></td></tr><tr><td class="h">342 - 350</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod haveHandlerFor( $handlerName ) -&gt; $boolean

   * =$handlerName= - name of the handler e.g. preRenderingHandler
Return: true if at least one plugin has registered a handler of
this type.

=cut</pre></td></tr>
<tr><td class="h">351</td><td colspan="6"></td></tr><tr><td class="h">352</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub haveHandlerFor {</td></tr>
<tr><td class="h">353</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L353">6</a></div></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $this, $handlerName ) = @_;</td></tr>
<tr><td class="h">354</td><td colspan="6"></td></tr><tr><td class="h">355</td><td><div class="c3">6</div></td><td><div class="c0" title="T/-"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L355">50</a></div></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0 unless defined( $this-&gt;{registeredHandlers}{$handlerName} );</td></tr>
<tr><td class="h">356</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return scalar( @{$this-&gt;{registeredHandlers}{$handlerName}} );</td></tr>
<tr><td class="h">357</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">358</td><td colspan="6"></td></tr><tr><td class="h">359</td><td></td><td></td><td></td><td></td><td></td><td class="s"># %FAILEDPLUGINS reports reasons why plugins failed to load</td></tr>
<tr><td class="h">360</td><td></td><td></td><td></td><td></td><td></td><td class="s"># note this is invoked with the session as the first parameter</td></tr>
<tr><td class="h">361</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _handleFAILEDPLUGINS {</td></tr>
<tr><td class="h">362</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L362">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift-&gt;{plugins};</td></tr>
<tr><td class="h">363</td><td colspan="6"></td></tr><tr><td class="h">364</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $text = CGI::start_table( { border =&gt; 1, class =&gt; &#39;twikiTable&#39; } ).</td></tr>
<tr><td class="h">365</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CGI::Tr(CGI::th(&#39;Plugin&#39;).CGI::th(&#39;Errors&#39;));</td></tr>
<tr><td class="h">366</td><td colspan="6"></td></tr><tr><td class="h">367</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $plugin ( @{$this-&gt;{plugins}} ) {</td></tr>
<tr><td class="h">368</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $td;</td></tr>
<tr><td class="h">369</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L369">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $plugin-&gt;{errors}) {</td></tr>
<tr><td class="h">370</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$td = CGI::td( {class =&gt; &#39;twikiAlert&#39; },</td></tr>
<tr><td class="h">371</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;\n&lt;verbatim&gt;\n&quot;.</td></tr>
<tr><td class="h">372</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;join( &quot;\n&quot;, @{$plugin-&gt;{errors}} ).</td></tr>
<tr><td class="h">373</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;\n&lt;/verbatim&gt;\n&quot; );</td></tr>
<tr><td class="h">374</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">375</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$td = CGI::td( &#39;none&#39; );</td></tr>
<tr><td class="h">376</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">377</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$text .= CGI::Tr( { valign=&gt;&#39;top&#39; },</td></tr>
<tr><td class="h">378</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CGI::td(&#39; &#39;.$plugin-&gt;{installWeb}.&#39;.&#39;.$plugin-&gt;{name}.&#39; &#39;). $td );</td></tr>
<tr><td class="h">379</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">380</td><td colspan="6"></td></tr><tr><td class="h">381</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$text .= CGI::end_table().CGI::start_table({ border=&gt;1, class =&gt; &#39;twikiTable&#39; }).</td></tr>
<tr><td class="h">382</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CGI::Tr(CGI::th(&#39;Handler&#39;).CGI::th(&#39;Plugins&#39;));</td></tr>
<tr><td class="h">383</td><td colspan="6"></td></tr><tr><td class="h">384</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $handler (@TWiki::Plugin::registrableHandlers) {</td></tr>
<tr><td class="h">385</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $h = &#39;&#39;;</td></tr>
<tr><td class="h">386</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L386">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( defined( $this-&gt;{registeredHandlers}{$handler} ) ) {</td></tr>
<tr><td class="h">387</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$h = join( CGI::br(),</td></tr>
<tr><td class="h">388</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map{ $_-&gt;{name} }</td></tr>
<tr><td class="h">389</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@{$this-&gt;{registeredHandlers}{$handler}} );</td></tr>
<tr><td class="h">390</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">391</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L391">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $h ) {</td></tr>
<tr><td class="h">392</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L392">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined( $TWiki::Plugin::deprecated{ $handler })) {</td></tr>
<tr><td class="h">393</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$h .= CGI::br() . CGI::span(</td></tr>
<tr><td class="h">394</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ class=&gt;&#39;twikiAlert&#39; },</td></tr>
<tr><td class="h">395</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; __This handler is deprecated__ - please check for updated versions of the plugins that use it!&quot; );</td></tr>
<tr><td class="h">396</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">397</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$text .= CGI::Tr( { valign=&gt;&#39;top&#39; },</td></tr>
<tr><td class="h">398</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CGI::td( $handler ).CGI::td( $h ) );</td></tr>
<tr><td class="h">399</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">400</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">401</td><td colspan="6"></td></tr><tr><td class="h">402</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $text.CGI::end_table().&quot;\n*&quot;.scalar(@{$this-&gt;{plugins}}).</td></tr>
<tr><td class="h">403</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; plugins*\n\n&quot;;</td></tr>
<tr><td class="h">404</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">405</td><td colspan="6"></td></tr><tr><td class="h">406</td><td></td><td></td><td></td><td></td><td></td><td class="s"># note this is invoked with the session as the first parameter</td></tr>
<tr><td class="h">407</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _handlePLUGINDESCRIPTIONS {</td></tr>
<tr><td class="h">408</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L408">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift-&gt;{plugins};</td></tr>
<tr><td class="h">409</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $text = &#39;&#39;;</td></tr>
<tr><td class="h">410</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $plugin ( @{$this-&gt;{plugins}} ) {</td></tr>
<tr><td class="h">411</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$text .= CGI::li( $plugin-&gt;getDescription() );</td></tr>
<tr><td class="h">412</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">413</td><td colspan="6"></td></tr><tr><td class="h">414</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return CGI::ul( $text );</td></tr>
<tr><td class="h">415</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">416</td><td colspan="6"></td></tr><tr><td class="h">417</td><td></td><td></td><td></td><td></td><td></td><td class="s"># note this is invoked with the session as the first parameter</td></tr>
<tr><td class="h">418</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _handleACTIVATEDPLUGINS {</td></tr>
<tr><td class="h">419</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L419">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift-&gt;{plugins};</td></tr>
<tr><td class="h">420</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $text = &#39;&#39;;</td></tr>
<tr><td class="h">421</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $plugin ( @{$this-&gt;{plugins}} ) {</td></tr>
<tr><td class="h">422</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-share-perl5-TWiki-Plugins-pm--branch.html#L422">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $plugin-&gt;{disabled} ) {</td></tr>
<tr><td class="h">423</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$text .= &quot;$plugin-&gt;{installWeb}.$plugin-&gt;{name}, &quot;;</td></tr>
<tr><td class="h">424</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">425</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">426</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$text =~ s/\,\s*$//o;</td></tr>
<tr><td class="h">427</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $text;</td></tr>
<tr><td class="h">428</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">429</td><td colspan="6"></td></tr><tr><td class="h">430 - 436</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod registrationHandler ()

Called by the register script

=cut</pre></td></tr>
<tr><td class="h">437</td><td colspan="6"></td></tr><tr><td class="h">438</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub registrationHandler {</td></tr>
<tr><td class="h">439</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L439">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">440</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ASSERT($this-&gt;isa( &#39;TWiki::Plugins&#39;)) if DEBUG;</td></tr>
<tr><td class="h">441</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#my( $web, $wikiName, $loginName ) = @_;</td></tr>
<tr><td class="h">442</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dispatch( &#39;registrationHandler&#39;, @_ );</td></tr>
<tr><td class="h">443</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">444</td><td colspan="6"></td></tr><tr><td class="h">445 - 451</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod beforeCommonTagsHandler ()

Called at the beginning (for cache Plugins only)

=cut</pre></td></tr>
<tr><td class="h">452</td><td colspan="6"></td></tr><tr><td class="h">453</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub beforeCommonTagsHandler {</td></tr>
<tr><td class="h">454</td><td><div class="c3">16</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L454">16</a></div></td><td><div>58</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">455</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#my( $text, $topic, $theWeb ) = @_;</td></tr>
<tr><td class="h">456</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td><div>86</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dispatch( &#39;beforeCommonTagsHandler&#39;, @_ );</td></tr>
<tr><td class="h">457</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">458</td><td colspan="6"></td></tr><tr><td class="h">459 - 465</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod commonTagsHandler ()

Called after %INCLUDE:&quot;...&quot;%

=cut</pre></td></tr>
<tr><td class="h">466</td><td colspan="6"></td></tr><tr><td class="h">467</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub commonTagsHandler {</td></tr>
<tr><td class="h">468</td><td><div class="c3">22</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L468">22</a></div></td><td><div>82</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">469</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#my( $text, $topic, $theWeb ) = @_;</td></tr>
<tr><td class="h">470</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td><div>106</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dispatch( &#39;commonTagsHandler&#39;, @_ );</td></tr>
<tr><td class="h">471</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">472</td><td colspan="6"></td></tr><tr><td class="h">473 - 479</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod afterCommonTagsHandler ()

Called at the end (for cache Plugins only)

=cut</pre></td></tr>
<tr><td class="h">480</td><td colspan="6"></td></tr><tr><td class="h">481</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub afterCommonTagsHandler {</td></tr>
<tr><td class="h">482</td><td><div class="c3">16</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L482">16</a></div></td><td><div>60</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">483</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#my( $text, $topic, $theWeb ) = @_;</td></tr>
<tr><td class="h">484</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td><div>77</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dispatch( &#39;afterCommonTagsHandler&#39;, @_ );</td></tr>
<tr><td class="h">485</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">486</td><td colspan="6"></td></tr><tr><td class="h">487 - 517</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod preRenderingHandler( $text, \%map )

   * =$text= - the text, with the head, verbatim and pre blocks replaced with placeholders
   * =\%removed= - reference to a hash that maps the placeholders to the removed blocks.

Placeholders are text strings constructed using the tag name and a sequence number e.g. &#39;pre1&#39;, &quot;verbatim6&quot;, &quot;head1&quot; etc. Placeholders are inserted into the text inside \1 characters so the text will contain \1_pre1\1 for placeholder pre1.

Each removed block is represented by the block text and the parameters passed to the tag (usually empty) e.g. for
&lt;verbatim&gt;
&lt;pre class=&#39;slobadob&#39;&gt;
XYZ
&lt;/pre&gt;
the map will contain:
&lt;pre&gt;
$removed-&gt;{&#39;pre1&#39;}{text}:   XYZ
$removed-&gt;{&#39;pre1&#39;}{params}: class=&quot;slobadob&quot;
&lt;/pre&gt;
&lt;/verbatim&gt;

Iterating over blocks for a single tag is easy. For example, to prepend a line number to every line of a pre block you might use this code:

foreach my $placeholder ( keys %$map ) {
    if( $placeholder =~ /^pre/i ) {
       my $n = 1;
       $map-&gt;{$placeholder}{text} =~ s/^/$n++/gem;
    }
}

=cut</pre></td></tr>
<tr><td class="h">518</td><td colspan="6"></td></tr><tr><td class="h">519</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub preRenderingHandler {</td></tr>
<tr><td class="h">520</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L520">3</a></div></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">521</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dispatch( &#39;preRenderingHandler&#39;, @_ );</td></tr>
<tr><td class="h">522</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Apply the startRenderingHandler (*deprecated*!) if any are defined</td></tr>
<tr><td class="h">523</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">524</td><td colspan="6"></td></tr><tr><td class="h">525 - 531</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod postRenderingHandler( \$text )

   * =\$text= - a reference to the HTML, with the head, verbatim and pre blocks replaced with placeholders

=cut</pre></td></tr>
<tr><td class="h">532</td><td colspan="6"></td></tr><tr><td class="h">533</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub postRenderingHandler {</td></tr>
<tr><td class="h">534</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L534">3</a></div></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">535</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dispatch( &#39;postRenderingHandler&#39;, @_ );</td></tr>
<tr><td class="h">536</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">537</td><td colspan="6"></td></tr><tr><td class="h">538 - 548</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod startRenderingHandler ()

Called just before the line loop

*DEPRECATED* Use preRenderingHandler instead. This handler correctly 
handles verbatim and other TWiki ML block types, and exposes them to 
the plugin.

=cut</pre></td></tr>
<tr><td class="h">549</td><td colspan="6"></td></tr><tr><td class="h">550</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub startRenderingHandler {</td></tr>
<tr><td class="h">551</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L551">3</a></div></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">552</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#my ( $text, $web, $topic ) = @_;</td></tr>
<tr><td class="h">553</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dispatch( &#39;startRenderingHandler&#39;, @_ );</td></tr>
<tr><td class="h">554</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">555</td><td colspan="6"></td></tr><tr><td class="h">556 - 567</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod outsidePREHandler ()

Called in line loop outside of &amp;lt;PRE&amp;gt; tag

*DEPRECATED* Use preRenderingHandler instead. 
This handler correctly handles pre and other 
TWiki ML block types, and is called only once 
instead of line-by-line.

=cut</pre></td></tr>
<tr><td class="h">568</td><td colspan="6"></td></tr><tr><td class="h">569</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub outsidePREHandler {</td></tr>
<tr><td class="h">570</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L570">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">571</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#my( $text ) = @_;</td></tr>
<tr><td class="h">572</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dispatch( &#39;outsidePREHandler&#39;, @_ );</td></tr>
<tr><td class="h">573</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">574</td><td colspan="6"></td></tr><tr><td class="h">575 - 586</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod insidePREHandler ()

Called in line loop inside of &amp;lt;PRE&amp;gt; tag

*DEPRECATED* Use preRenderingHandler instead. 
This handler correctly handles pre and other 
TWiki ML block types, and is called only once 
instead of line-by-line.

=cut</pre></td></tr>
<tr><td class="h">587</td><td colspan="6"></td></tr><tr><td class="h">588</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub insidePREHandler {</td></tr>
<tr><td class="h">589</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L589">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">590</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#my( $text ) = @_;</td></tr>
<tr><td class="h">591</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dispatch( &#39;insidePREHandler&#39;, @_ );</td></tr>
<tr><td class="h">592</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">593</td><td colspan="6"></td></tr><tr><td class="h">594 - 602</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod endRenderingHandler ()

Called just after the line loop

*DEPRECATED* Use postRenderingHandler instead.

=cut</pre></td></tr>
<tr><td class="h">603</td><td colspan="6"></td></tr><tr><td class="h">604</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub endRenderingHandler {</td></tr>
<tr><td class="h">605</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L605">3</a></div></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">606</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#my ( $text ) = @_;</td></tr>
<tr><td class="h">607</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dispatch( &#39;endRenderingHandler&#39;, @_ );</td></tr>
<tr><td class="h">608</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">609</td><td colspan="6"></td></tr><tr><td class="h">610 - 616</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod beforeEditHandler ()

Called by edit

=cut</pre></td></tr>
<tr><td class="h">617</td><td colspan="6"></td></tr><tr><td class="h">618</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub beforeEditHandler {</td></tr>
<tr><td class="h">619</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L619">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">620</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#my( $text, $topic, $web, $meta ) = @_;</td></tr>
<tr><td class="h">621</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dispatch( &#39;beforeEditHandler&#39;, @_ );</td></tr>
<tr><td class="h">622</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">623</td><td colspan="6"></td></tr><tr><td class="h">624 - 630</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod afterEditHandler ()

Called by edit

=cut</pre></td></tr>
<tr><td class="h">631</td><td colspan="6"></td></tr><tr><td class="h">632</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub afterEditHandler {</td></tr>
<tr><td class="h">633</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L633">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">634</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#my( $text, $topic, $web ) = @_;</td></tr>
<tr><td class="h">635</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dispatch( &#39;afterEditHandler&#39;, @_ );</td></tr>
<tr><td class="h">636</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">637</td><td colspan="6"></td></tr><tr><td class="h">638 - 644</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod beforeSaveHandler ()

Called just before the save action

=cut</pre></td></tr>
<tr><td class="h">645</td><td colspan="6"></td></tr><tr><td class="h">646</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub beforeSaveHandler {</td></tr>
<tr><td class="h">647</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L647">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">648</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#my ( $theText, $theTopic, $theWeb, $meta ) = @_;</td></tr>
<tr><td class="h">649</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dispatch( &#39;beforeSaveHandler&#39;, @_ );</td></tr>
<tr><td class="h">650</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">651</td><td colspan="6"></td></tr><tr><td class="h">652 - 658</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod afterSaveHandler ()

Called just after the save action

=cut</pre></td></tr>
<tr><td class="h">659</td><td colspan="6"></td></tr><tr><td class="h">660</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub afterSaveHandler {</td></tr>
<tr><td class="h">661</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L661">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">662</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#my ( $theText, $theTopic, $theWeb, $error, $meta ) = @_;</td></tr>
<tr><td class="h">663</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dispatch( &#39;afterSaveHandler&#39;, @_ );</td></tr>
<tr><td class="h">664</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">665</td><td colspan="6"></td></tr><tr><td class="h">666 - 679</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod afterRenameHandler ( $oldWeb, $oldTopic, $oldAttachment, $newWeb, $newTopic, $newAttachment )

Called just after the rename/move/delete action of a web, topic or attachment.

   * =$oldWeb= - name of old web
   * =$oldTopic= - name of old topic (empty string if web rename)
   * =$oldAttachment= - name of old attachment (empty string if web or topic rename)
   * =$newWeb= - name of new web
   * =$newTopic= - name of new topic (empty string if web rename)
   * =$newAttachment= - name of new attachment (empty string if web or topic rename)

=cut</pre></td></tr>
<tr><td class="h">680</td><td colspan="6"></td></tr><tr><td class="h">681</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub afterRenameHandler {</td></tr>
<tr><td class="h">682</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L682">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">683</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#my ( $oldWeb, $oldTopic, $oldAttachment, $newWeb, $newTopic, $newAttachment ) = @_;</td></tr>
<tr><td class="h">684</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dispatch( &#39;afterRenameHandler&#39;, @_ );</td></tr>
<tr><td class="h">685</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">686</td><td colspan="6"></td></tr><tr><td class="h">687 - 693</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod mergeHandler ()

Called to handle text merge.

=cut</pre></td></tr>
<tr><td class="h">694</td><td colspan="6"></td></tr><tr><td class="h">695</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub mergeHandler {</td></tr>
<tr><td class="h">696</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L696">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">697</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dispatch( &#39;mergeHandler&#39;, @_ );</td></tr>
<tr><td class="h">698</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">699</td><td colspan="6"></td></tr><tr><td class="h">700 - 725</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod beforeAttachmentSaveHandler ( $attrHashRef, $topic, $web ) 

This code provides Plugins with the opportunity to alter an uploaded attachment between the upload and save-to-store processes. It is invoked as per other Plugins.
   * =$attrHashRef= - Hash reference of attachment attributes (keys are indicated below)
   * =$topic= -     | Topic name
   * =$web= -       | Web name

Keys in $attrHashRef:
| *Key*       | *Value* |
| attachment  | Name of the attachment |
| tmpFilename | Name of the local file that stores the upload |
| comment     | Comment to be associated with the upload |
| user        | Login name of the person submitting the attachment, e.g. &#39;jsmith&#39; |

Note: All keys should be used read-only, except for comment which can be modified.

Example usage:

&lt;pre&gt;
   my( $attrHashRef, $topic, $web ) = @_;
   $$attrHashRef{&#39;comment&#39;} .= &quot; (NOTE: Extracted from blah.tar.gz)&quot;;
&lt;/pre&gt;

=cut</pre></td></tr>
<tr><td class="h">726</td><td colspan="6"></td></tr><tr><td class="h">727</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub beforeAttachmentSaveHandler {</td></tr>
<tr><td class="h">728</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L728">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">729</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#my ( $theAttrHash, $theTopic, $theWeb ) = @_;</td></tr>
<tr><td class="h">730</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dispatch( &#39;beforeAttachmentSaveHandler&#39;, @_ );</td></tr>
<tr><td class="h">731</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">732</td><td colspan="6"></td></tr><tr><td class="h">733 - 753</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod afterAttachmentSaveHandler( $attachmentAttrHash, $topic, $web, $error )

deal with an uploaded attachment between the upload and save-to-store processes. It is invoked as per other plugins.

   * =$attrHashRef= - Hash reference of attachment attributes (keys are indicated below)
   * =$topic= -     | Topic name
   * =$web= -       | Web name
   * =$error= -     | Error string of save action, empty if OK

Keys in $attrHashRef:
| *Key*       | *Value* |
| attachment  | Name of the attachment |
| tmpFilename | Name of the local file that stores the upload |
| comment     | Comment to be associated with the upload |
| user        | Login name of the person submitting the attachment, e.g. &#39;jsmith&#39; |

Note: The hash is *read-only*

=cut</pre></td></tr>
<tr><td class="h">754</td><td colspan="6"></td></tr><tr><td class="h">755</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub afterAttachmentSaveHandler {</td></tr>
<tr><td class="h">756</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L756">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">757</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#my ( $theText, $theTopic, $theWeb ) = @_;</td></tr>
<tr><td class="h">758</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dispatch( &#39;afterAttachmentSaveHandler&#39;, @_ );</td></tr>
<tr><td class="h">759</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">760</td><td colspan="6"></td></tr><tr><td class="h">761</td><td colspan="6"></td></tr><tr><td class="h">762 - 773</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod writeHeaderHandler () -&gt; $headers

Called by TWiki::writePageHeader. *DEPRECATED* do not use!

*DEPRECATED* Use modifyHeaderHandler instead. it is a lot 
more flexible, and allows you to modify existing headers 
as well as add new ones. It also works correctly when 
multiple plugins want to modify headers.

=cut</pre></td></tr>
<tr><td class="h">774</td><td colspan="6"></td></tr><tr><td class="h">775</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub writeHeaderHandler {</td></tr>
<tr><td class="h">776</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L776">1</a></div></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">777</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $this-&gt;_dispatch( &#39;writeHeaderHandler&#39;, @_ );</td></tr>
<tr><td class="h">778</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">779</td><td colspan="6"></td></tr><tr><td class="h">780 - 784</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod modifyHeaderHandler ( \@headers, $query )

=cut</pre></td></tr>
<tr><td class="h">785</td><td colspan="6"></td></tr><tr><td class="h">786</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub modifyHeaderHandler {</td></tr>
<tr><td class="h">787</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L787">1</a></div></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">788</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $this-&gt;_dispatch( &#39;modifyHeaderHandler&#39;, @_ );</td></tr>
<tr><td class="h">789</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">790</td><td colspan="6"></td></tr><tr><td class="h">791 - 797</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod redirectCgiQueryHandler () -&gt; $result

Called by TWiki::redirect

=cut</pre></td></tr>
<tr><td class="h">798</td><td colspan="6"></td></tr><tr><td class="h">799</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub redirectCgiQueryHandler {</td></tr>
<tr><td class="h">800</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L800">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">801</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $this-&gt;_dispatch( &#39;redirectCgiQueryHandler&#39;, @_ );</td></tr>
<tr><td class="h">802</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">803</td><td colspan="6"></td></tr><tr><td class="h">804 - 825</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod renderFormFieldForEditHandler ( $name, $type, $size, $value, $attributes, $possibleValues ) -&gt; $html

This handler is called before built-in types are considered. It generates the HTML text rendering this form field, or false, if the rendering should be done by the built-in type handlers.
   * =$name= - name of form field
   * =$type= - type of form field
   * =$size= - size of form field
   * =$value= - value held in the form field
   * =$attributes= - attributes of form field 
   * =$possibleValues= - the values defined as options for form field, if any. May be a scalar (one legal value) or an array (several legal values)
Return HTML text that renders this field. If false, form rendering continues by considering the built-in types.

Note that a common application would be to generate formatting of the
field involving generation of javascript. Such usually also requires
the insertion of some common javascript into the page header. Unfortunately,
there is currently no mechanism to pass that script to where the header of
the page is visible. Consequentially, the common javascript may have to
be emitted as part of the field formatting and might be duplicated many
times throughout the page.

=cut</pre></td></tr>
<tr><td class="h">826</td><td colspan="6"></td></tr><tr><td class="h">827</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub renderFormFieldForEditHandler {</td></tr>
<tr><td class="h">828</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L828">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">829</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $this-&gt;_dispatch( &#39;renderFormFieldForEditHandler&#39;, @_ );</td></tr>
<tr><td class="h">830</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">831</td><td colspan="6"></td></tr><tr><td class="h">832 - 840</td><td colspan="5"></td><td class="s"><pre>=pod

---++ ObjectMethod renderWikiWordHandler () -&gt; $result

Change how a WikiWord is rendered

Originated from the TWiki:Plugins.SpacedWikiWordPlugin hack

=cut</pre></td></tr>
<tr><td class="h">841</td><td colspan="6"></td></tr><tr><td class="h">842</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub renderWikiWordHandler {</td></tr>
<tr><td class="h">843</td><td><div class="c3">19</div></td><td></td><td></td><td><div class="c3"><a href="-usr-share-perl5-TWiki-Plugins-pm--subroutine.html#L843">19</a></div></td><td><div>60</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">844</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td><div>90</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $this-&gt;_dispatch( &#39;renderWikiWordHandler&#39;, @_ );</td></tr>
<tr><td class="h">845</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">846</td><td colspan="6"></td></tr><tr><td class="h">847</td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
</table>
</body>
</html>
