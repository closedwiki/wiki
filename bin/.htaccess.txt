# bin/.htaccess.txt
#
# Controls access to TWiki scripts - to make Apache use it, rename this
# file to '.htaccess' and REPLACE THE FOLLOWING STRINGS WITH PATHS
# SPECIFIC TO YOUR INSTALLATION:
#
# !FILE_path_to_TWiki!
#    This is the absolute path to the directory where
#    you installed TWiki (where you unzipped the installation). The first
#    part should match the $dataDir setting in TWiki.cfg
# !URL_path_to_TWiki!
#    This is the URL path you put into the webserver for users to use to
#    access TWiki.
# !ADMIN_users!
#    Space-separated list of the login name(s) of the person(s) allowed
#    to run the configure script

# Use CGI & Perl to handle all files in 'bin' directory, i.e. run as scripts
# - this should remove the need to rename files to end in '.pl' etc,
# if your web hosting provider permits this.  Remove if using mod_perl.
SetHandler cgi-script

# Password file for TWiki users
#

# Authentication type (htpasswd file) (comment out this if you configure htpasswd / LDAP support)
AuthUserFile !FILE_path_to_TWiki!/data/.htpasswd
AuthName 'Enter your WikiName: (First name and last name, no space, no dots, capitalized, e.g. JohnSmith). Cancel to register if you do not have one.'
AuthType Basic

#for htdigest password suport uncomment the following
#AuthDigestDomain !URL_path_to_TWiki!/bin/viewauth !URL_path_to_TWiki!/bin/edit !URL_path_to_TWiki!/bin/preview !URL_path_to_TWiki!/bin/save !URL_path_to_TWiki!/bin/attach !URL_path_to_TWiki!/bin/upload !URL_path_to_TWiki!/bin/rename !URL_path_to_TWiki!/bin/manage !URL_path_to_TWiki!/bin/installpasswd !URL_path_to_TWiki!/bin/passwd
#AuthDigestFile !FILE_path_to_TWiki!/data/.htdigest
# For "Digest" authentication to work properly, this string must match
# the value of configuration variable $authRealm
#AuthName 'Enter your WikiName. (First name and last name, no space, no dots, capitalized, e.g. JohnSmith). Cancel to register if you do not have one.'
#AuthType Digest

#for LDAP password support uncomment the following (and fix up the paths)
#AuthLDAPURL ldap://yourldapserver/dc=yourldapserver,dc=com?uid?sub?(objectClass=posixAccount)
#AuthLDAPGroupAttribute memberUid
#AuthLDAPGroupAttributeIsDN off
#<Limit GET POST PUT>
#    require group cn=mygroup,ou=groups,dc=yourldapserver,dc=com
#</Limit>
#AuthName ByPassword
#AuthType Basic

# File to return on access control error (e.g. wrong password)
# The path here must be a URL path, not a file pathname - first part should 
# match the $scriptUrlPath in TWiki.cfg
ErrorDocument 401 !URL_path_to_TWiki!/bin/oops/TWiki/TWikiRegistration?template=oopsauth

<FilesMatch "[^/]*\.html$">
       SetHandler blabla
       allow from all
</FilesMatch>

# configure should be restricted to a small number of users
<FilesMatch "configure.*">
       require user "!ADMIN_users!"
</FilesMatch>

# These are scripts that might change content. The regular expression uses ".*"
# at the end so it matches the scripts even if you had to add a .cgi or .pl
# extension. If you want to require login for any other scripts, modify the
# regular expression below as appropriate.

# NB. The resetpasswd & passwd scripts are used to reset and change passwords.
# They do their own validation of the user and therefore
# should not use "require valid-user"

<FilesMatch "(attach|edit|manage|rename|save|upload|mail|logon|.*auth).*">
       require valid-user
</FilesMatch>

<FilesMatch ".*">
       allow from all
</FilesMatch>
