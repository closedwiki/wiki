%META:TOPICINFO{author="BaseUserMapping_666" date="1202996884" format="1.1" reprev="1.2" version="1.2"}%
---+!! %TOPIC%

_short description here_

%TOC%

---++ Syntax Rules

<verbatim>
%P4CHANGES{"p4changesoptions" format="format"}%
</verbatim>

| *Parameter* | *description* | *default value* |
| _p4changesoptions_ | This must be some valid [[http://www.perforce.com/perforce/doc.073/manuals/cmdref/changes.html][p4 changes]] options | none |
| _format_ | A template string used to format each change record. See below for the supported variables. If none specified the output of the command is returned with HTML br tags append to each line.  | none |

---+++ Format variable substitution

The following symbols specified in the _format_ parameter are substituted with the record information.

| *Variable* | *description* | *example* |
| =$changelist= | Perforce change list number | 12345 |
| =$year= | Changelist year as defined by Perforce | 2008 |
| =$month= | Changelist month as defined by Perforce | 02 |
| =$day= | Changelist day as defined by Perforce | 28 |
| =$date= | Changelist date as defined by Perforce | 2008/02/28 |
| =$user= | Perforce user to which the changelist belong to  | myperforceuser |
| =$client= | Perforce client to which the changelist belong to | myperforceclient |
| =$status= | Changelist status. Can be _submitted_ or _pending_ | pending |
| =$description= | Perforce change description | I fixed Bug:123 |
| =$n= | New line character | =\n= |

---++ Examples

---+++ Get the last ten change list

<verbatim>
%P4CHANGES{" -m 10" format="| $changelist | $date | $description | $user | $status | $n"}%
</verbatim>

---+++ Get the last ten change lists on a branch

<verbatim>
%P4CHANGES{" -m 10  //depot/branches/rel_1_0_1/..." format="| $changelist | $date | $description | $user | $status | $n"}%
</verbatim>

---+++ Get change lists on a branch between change 100 and change 200

<verbatim>
%P4CHANGES{" //depot/branches/rel_1_0_1/...@100,200" format="| $changelist | $date | $description | $user | $status | $n"}%
</verbatim>

---++ Plugin Settings

Plugin settings are stored as preferences variables. To reference a plugin setting write ==%<plugin>_<setting>%==, i.e. ==%NEWPLUGIN_SHORTDESCRIPTION%==

   * One line description, is shown in the %TWIKIWEB%.TextFormattingRules topic: 
      * Set SHORTDESCRIPTION = Provide access to informations from a [[http://www.perforce.com][Perforce]] CMS system.      

---++ Plugin Installation Instructions

__Note:__ You do not need to install anything on the browser to use this plugin. The following instructions are for the administrator who installs the plugin on the TWiki server.

   * Download the ZIP file from the Plugin Home (see below) 
   * Unzip ==%TOPIC%.zip== in your twiki installation directory. Content: 
| *File:* | *Description:* |
| ==data/TWiki/%TOPIC%.txt== | Plugin topic |
| ==data/TWiki/%TOPIC%.txt,v== | Plugin topic repository |
| ==lib/TWiki/Plugins/%TOPIC%.pm== | Plugin Perl module |
   * Configure the Plugin: 
      * TWiki 4.0 and up: Run the [[%SCRIPTURL%/configure%SCRIPTSUFFIX%][configure]] script to enable the Plugin 
      * Change the Plugin settings as needed 
      * Edit =/lib/LocalSite.cfg= and define the following values according to your Perforce environment: 

<verbatim>
$TWiki::cfg{Plugins}{PerforcePlugin}{p4port} = "perforce-srv:1666" ;
$TWiki::cfg{Plugins}{PerforcePlugin}{p4client} = "myp4clientname" ;
$TWiki::cfg{Plugins}{PerforcePlugin}{p4user} = "mylogin";
$TWiki::cfg{Plugins}{PerforcePlugin}{p4password} = "mypassword";
</verbatim>

   * If the installation was successful you should get valid information in the table below: 

| *Changelist* | *Date* | *Description* | *User* | *Status* |
%P4CHANGES{"-m 10" format="| $changelist | $date | $description | $user | $status | $n"}%

---++ Plugin Info

|  Plugin Author: | TWiki:Main.StephaneLenclud |
|  Copyright: | © 2007, TWiki:Main.StephaneLenclud |
|  License: | GPL ([[http://www.gnu.org/copyleft/gpl.html][GNU General Public License]]) |
|  Plugin Version: | 14 Feb 2008 (V1.000) |
|  Change History: | <!-- versions below in reverse order --> |
|  14 Feb 2008: | Initial version |
|  TWiki Dependency: | $TWiki::Plugins::VERSION 1.1 |
|  CPAN Dependencies: | none |
|  Other Dependencies: | none |
|  Perl Version: | 5.005 |
|  [[TWiki:Plugins/Benchmark][Benchmarks]]: | %TWIKIWEB%.GoodStyle nn%, %TWIKIWEB%.FormattedSearch nn%, %TOPIC% nn% |
|  Plugin Home: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC% |
|  Feedback: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC%Dev |
|  Appraisal: | http://TWiki.org/cgi-bin/view/Plugins/%TOPIC%Appraisal |

__Related Topics:__ %TWIKIWEB%.TWikiPlugins, %TWIKIWEB%.DeveloperDocumentationCategory, %TWIKIWEB%.AdminDocumentationCategory, %TWIKIWEB%.TWikiPreferences

%TOPICCREATE{ template="Plugins.PluginDevTemplate" topic="PerforcePluginDev" disable="NewPluginTemplate" parameters="pluginName=PerforcePlugin&RelatedTopics=PerforcePlugin, PerforcePluginAppraisal" }% %TOPICCREATE{ template="Plugins.PluginAppraisalTemplate" topic="PerforcePluginAppraisal" disable="NewPluginTemplate" parameters="RelatedTopics=PerforcePlugin, PerforcePluginDev" }% -- TWiki:Main.StephaneLenclud - 14 Feb 2008
